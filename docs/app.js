!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=23)}([function(t,e,n){"use strict";(function(e){function n(){l=!0;for(var t,e,n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}l=!1}function r(t){1!==h.push(t)||l||o()}var o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,s=new i(n),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),o=function(){u.data=a=++a%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var c=new e.MessageChannel;c.port1.onmessage=n,o=function(){c.port2.postMessage(0)}}var l,h=[];t.exports=r}).call(e,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n(6),n(7),n(9),n(8),n(11),n(10);var r=n(13),o=n(15),i=n(4),a=document.getElementById("root"),s="standalone"in window.navigator&&window.navigator.standalone,u=localStorage.getItem("thats-camping-starred-campsites"),c=i.App.embed(a,{version:"28c8e6c",standalone:s,starredCampsites:u?JSON.parse(u):null,online:navigator.onLine});c.ports.storeStarredCampsites.subscribe(function(t){localStorage.setItem("thats-camping-starred-campsites",JSON.stringify(t))});var l=new o("thats-camping"),h=new o("https://mlandauer.cloudant.com/thats-camping",{auth:{username:"cirtionewessinstroonheen",password:"5e5308b9016a700156164970fbb346f9ede08e8e"}});l.sync(h,{live:!0,retry:!0}).on("change",function(t){console.log("sync change:",t)}).on("paused",function(t){console.log("sync paused:",t)}).on("active",function(){console.log("sync active")}).on("denied",function(t){console.log("sync denied:",t)}).on("complete",function(t){console.log("sync complete:",t)}).on("error",function(t){console.log("sync error:",t)}),l.changes({live:!0,include_docs:!0}).on("change",function(t){c.ports.change.send(t)}).on("complete",function(t){console.log("complete",t)}).on("error",function(t){console.log("error",t)}),c.ports.put.subscribe(function(t){l.put(t).then(function(t){c.ports.putSuccess.send(t)}).catch(function(t){t instanceof Error?c.ports.putError.send({status:null,name:null,message:t.message,error:!0}):c.ports.putError.send(t.message)})}),c.ports.destroy.subscribe(function(t){l.destroy().then(function(t){c.ports.destroySuccess.send(t)}).catch(function(t){c.ports.destroyError.send(t)})}),c.ports.bulkDocs.subscribe(function(t){l.bulkDocs(t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}),window.addEventListener("online",function(t){c.ports.online.send(!0)},!1),window.addEventListener("offline",function(t){c.ports.online.send(!1)},!1);var f=void 0,d={};f=r.map("map").setView([51.505,-.09],9),r.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1IjoibWxhbmRhdWVyIiwiYSI6ImNpeXVzZ2c5djAxb28zM281amZ1emxmcHUifQ.dThcfHRKKNQckFMkCyObJw"}).addTo(f),c.ports.mapVisibility.subscribe(function(t){t?(document.getElementById("map-wrapper").style.display="",f&&f.invalidateSize()):document.getElementById("map-wrapper").style.display="none"}),c.ports.panMapTo.subscribe(function(t){f.panTo([t.latitude,t.longitude])}),c.ports.setMarker.subscribe(function(t){if(t.id in d){var e=d[t.id];e.setLatLng([t.location.latitude,t.location.longitude])}else{var e=r.marker([t.location.latitude,t.location.longitude]);d[t.id]=e,e.addTo(f)}})},function(t,e,n){"use strict";function r(t){return function(){var e=arguments.length;if(e){for(var n=[],r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}return t.call(this,[])}}t.exports=r},function(t,e){(function(){"use strict";function e(t){function e(e){return function(n){return t(e,n)}}return e.arity=2,e.func=t,e}function n(t){function e(e){return function(n){return function(r){return t(e,n,r)}}}return e.arity=3,e.func=t,e}function r(t){function e(e){return function(n){return function(r){return function(o){return t(e,n,r,o)}}}}return e.arity=4,e.func=t,e}function o(t){function e(e){return function(n){return function(r){return function(o){return function(i){return t(e,n,r,o,i)}}}}}return e.arity=5,e.func=t,e}function i(t){function e(e){return function(n){return function(r){return function(o){return function(i){return function(a){return t(e,n,r,o,i,a)}}}}}}return e.arity=6,e.func=t,e}function a(t){function e(e){return function(n){return function(r){return function(o){return function(i){return function(a){return function(s){return t(e,n,r,o,i,a,s)}}}}}}}return e.arity=7,e.func=t,e}function s(t){function e(e){return function(n){return function(r){return function(o){return function(i){return function(a){return function(s){return function(u){return t(e,n,r,o,i,a,s,u)}}}}}}}}return e.arity=8,e.func=t,e}function u(t){function e(e){return function(n){return function(r){return function(o){return function(i){return function(a){return function(s){return function(u){return function(c){return t(e,n,r,o,i,a,s,u,c)}}}}}}}}}return e.arity=9,e.func=t,e}function c(t,e,n){return 2===t.arity?t.func(e,n):t(e)(n)}function l(t,e,n,r){return 3===t.arity?t.func(e,n,r):t(e)(n)(r)}function h(t,e,n,r,o){return 4===t.arity?t.func(e,n,r,o):t(e)(n)(r)(o)}function f(t,e,n,r,o,i){return 5===t.arity?t.func(e,n,r,o,i):t(e)(n)(r)(o)(i)}function d(t,e,n,r,o,i,a){return 6===t.arity?t.func(e,n,r,o,i,a):t(e)(n)(r)(o)(i)(a)}var _=function(){function t(t,e){if(t<0||t>=I(e))throw new Error("Index "+t+" is out of range. Check the length of your array first or use getMaybe or getWithDefault.");return r(t,e)}function r(t,e){for(var n=e.height;n>0;n--){for(var r=t>>5*n;e.lengths[r]<=t;)r++;r>0&&(t-=e.lengths[r-1]),e=e.table[r]}return e.table[t]}function o(t,e,n){return t<0||I(n)<=t?n:i(t,e,n)}function i(t,e,n){if(n=N(n),0===n.height)n.table[t]=e;else{var r=R(t,n);r>0&&(t-=n.lengths[r-1]),n.table[r]=i(t,e,n.table[r])}return n}function a(t,e){if(t<=0)return V;var n=Math.floor(Math.log(t)/Math.log(J));return s(e,n,0,t)}function s(t,e,n,r){if(0===e){for(var o=new Array((r-n)%(J+1)),i=0;i<o.length;i++)o[i]=t(n+i);return{ctor:"_Array",height:0,table:o}}for(var a=Math.pow(J,e),o=new Array(Math.ceil((r-n)/a)),u=new Array(o.length),i=0;i<o.length;i++)o[i]=s(t,e-1,n+i*a,Math.min(n+(i+1)*a,r)),u[i]=I(o[i])+(i>0?u[i-1]:0);return{ctor:"_Array",height:e,table:o,lengths:u}}function u(t){if("[]"===t.ctor)return V;for(var e=new Array(J),n=[],r=0;"[]"!==t.ctor;)if(e[r]=t._0,t=t._1,r++,r===J){var o={ctor:"_Array",height:0,table:e};l(o,n),e=new Array(J),r=0}if(r>0){var o={ctor:"_Array",height:0,table:e.splice(0,r)};l(o,n)}for(var i=0;i<n.length-1;i++)n[i].table.length>0&&l(n[i],n);var a=n[n.length-1];return a.height>0&&1===a.table.length?a.table[0]:a}function l(t,e){var n=t.height;if(e.length===n){var r={ctor:"_Array",height:n+1,table:[],lengths:[]};e.push(r)}e[n].table.push(t);var o=I(t);e[n].lengths.length>0&&(o+=e[n].lengths[e[n].lengths.length-1]),e[n].lengths.push(o),e[n].table.length===J&&(l(e[n],e),e[n]={ctor:"_Array",height:n+1,table:[],lengths:[]})}function h(t,e){var n=f(t,e);if(null!==n)return n;var r=U(t,e.height);return z(e,r)}function f(t,e){if(0===e.height){if(e.table.length<J){var n={ctor:"_Array",height:0,table:e.table.slice()};return n.table.push(t),n}return null}var r=f(t,O(e));if(null!==r){var n=N(e);return n.table[n.table.length-1]=r,n.lengths[n.lengths.length-1]++,n}if(e.table.length<J){var o=U(t,e.height-1),n=N(e);return n.table.push(o),n.lengths.push(n.lengths[n.lengths.length-1]+I(o)),n}return null}function d(t){return _(j.Nil,t)}function _(t,e){for(var n=e.table.length-1;n>=0;n--)t=0===e.height?j.Cons(e.table[n],t):_(t,e.table[n]);return t}function p(t,e){var n={ctor:"_Array",height:e.height,table:new Array(e.table.length)};e.height>0&&(n.lengths=e.lengths);for(var r=0;r<e.table.length;r++)n.table[r]=0===e.height?t(e.table[r]):p(t,e.table[r]);return n}function m(t,e){return v(t,e,0)}function v(t,e,n){var r={ctor:"_Array",height:e.height,table:new Array(e.table.length)};e.height>0&&(r.lengths=e.lengths);for(var o=0;o<e.table.length;o++)r.table[o]=0===e.height?c(t,n+o,e.table[o]):v(t,e.table[o],0==o?n:n+e.lengths[o-1]);return r}function g(t,e,n){if(0===n.height)for(var r=0;r<n.table.length;r++)e=c(t,n.table[r],e);else for(var r=0;r<n.table.length;r++)e=g(t,e,n.table[r]);return e}function y(t,e,n){if(0===n.height)for(var r=n.table.length;r--;)e=c(t,n.table[r],e);else for(var r=n.table.length;r--;)e=y(t,e,n.table[r]);return e}function b(t,e,n){return t<0&&(t+=I(n)),e<0&&(e+=I(n)),T(t,w(e,n))}function w(t,e){if(t===I(e))return e;if(0===e.height){var n={ctor:"_Array",height:0};return n.table=e.table.slice(0,t),n}var r=R(t,e),o=w(t-(r>0?e.lengths[r-1]:0),e.table[r]);if(0===r)return o;var n={ctor:"_Array",height:e.height,table:e.table.slice(0,r),lengths:e.lengths.slice(0,r)};return o.table.length>0&&(n.table[r]=o,n.lengths[r]=I(o)+(r>0?n.lengths[r-1]:0)),n}function T(t,e){if(0===t)return e;if(0===e.height){var n={ctor:"_Array",height:0};return n.table=e.table.slice(t,e.table.length+1),n}var r=R(t,e),o=T(t-(r>0?e.lengths[r-1]:0),e.table[r]);if(r===e.table.length-1)return o;var n={ctor:"_Array",height:e.height,table:e.table.slice(r,e.table.length+1),lengths:new Array(e.table.length-r)};n.table[0]=o;for(var i=0,a=0;a<n.table.length;a++)i+=I(n.table[a]),n.lengths[a]=i;return n}function x(t,e){if(0===t.table.length)return e;if(0===e.table.length)return t;var n=E(t,e);if(n[0].table.length+n[1].table.length<=J){if(0===n[0].table.length)return n[1];if(0===n[1].table.length)return n[0];if(n[0].table=n[0].table.concat(n[1].table),n[0].height>0){for(var r=I(n[0]),o=0;o<n[1].lengths.length;o++)n[1].lengths[o]+=r;n[0].lengths=n[0].lengths.concat(n[1].lengths)}return n[0]}if(n[0].height>0){var i=P(t,e);i>G&&(n=B(n[0],n[1],i))}return z(n[0],n[1])}function E(t,e){if(0===t.height&&0===e.height)return[t,e];if(1!==t.height||1!==e.height)if(t.height===e.height){t=N(t),e=N(e);var n=E(O(t),M(e));k(t,n[1]),L(e,n[0])}else if(t.height>e.height){t=N(t);var n=E(O(t),e);k(t,n[0]),e=q(n[1],n[1].height+1)}else{e=N(e);var n=E(t,M(e)),r=0===n[0].table.length?0:1,o=0===r?1:0;L(e,n[r]),t=q(n[o],n[o].height+1)}if(0===t.table.length||0===e.table.length)return[t,e];var i=P(t,e);return i<=G?[t,e]:B(t,e,i)}function k(t,e){var n=t.table.length-1;t.table[n]=e,t.lengths[n]=I(e),t.lengths[n]+=n>0?t.lengths[n-1]:0}function L(t,e){if(e.table.length>0){t.table[0]=e,t.lengths[0]=I(e);for(var n=I(t.table[0]),r=1;r<t.lengths.length;r++)n+=I(t.table[r]),t.lengths[r]=n}else{t.table.shift();for(var r=1;r<t.lengths.length;r++)t.lengths[r]=t.lengths[r]-t.lengths[0];t.lengths.shift()}}function P(t,e){for(var n=0,r=0;r<t.table.length;r++)n+=t.table[r].table.length;for(var r=0;r<e.table.length;r++)n+=e.table[r].table.length;var o=t.table.length+e.table.length;return o-(Math.floor((n-1)/J)+1)}function S(t,e,n){return n<t.length?t[n]:e[n-t.length]}function C(t,e,n,r){n<t.length?t[n]=r:e[n-t.length]=r}function D(t,e,n,r){C(t.table,e.table,n,r);var o=0===n||n===t.lengths.length?0:S(t.lengths,t.lengths,n-1);C(t.lengths,e.lengths,n,o+I(r))}function A(t,e){e<0&&(e=0);var n={ctor:"_Array",height:t,table:new Array(e)};return t>0&&(n.lengths=new Array(e)),n}function B(t,e,n){for(var r=A(t.height,Math.min(J,t.table.length+e.table.length-n)),o=A(t.height,r.table.length-(t.table.length+e.table.length-n)),i=0;S(t.table,e.table,i).table.length%J===0;)C(r.table,o.table,i,S(t.table,e.table,i)),C(r.lengths,o.lengths,i,S(t.lengths,e.lengths,i)),i++;for(var a=i,s=new A(t.height-1,0),u=0;i-a-(s.table.length>0?1:0)<n;){var c=S(t.table,e.table,i),l=Math.min(J-s.table.length,c.table.length);if(s.table=s.table.concat(c.table.slice(u,l)),s.height>0)for(var h=s.lengths.length,f=h;f<h+l-u;f++)s.lengths[f]=I(s.table[f]),s.lengths[f]+=f>0?s.lengths[f-1]:0;u+=l,c.table.length<=l&&(i++,u=0),s.table.length===J&&(D(r,o,a,s),s=A(t.height-1,0),a++)}for(s.table.length>0&&(D(r,o,a,s),a++);i<t.table.length+e.table.length;)D(r,o,a,S(t.table,e.table,i)),i++,a++;return[r,o]}function O(t){return t.table[t.table.length-1]}function M(t){return t.table[0]}function N(t){var e={ctor:"_Array",height:t.height,table:t.table.slice()};return t.height>0&&(e.lengths=t.lengths.slice()),e}function I(t){return 0===t.height?t.table.length:t.lengths[t.lengths.length-1]}function R(t,e){for(var n=t>>5*e.height;e.lengths[n]<=t;)n++;return n}function U(t,e){return 0===e?{ctor:"_Array",height:0,table:[t]}:{ctor:"_Array",height:e,table:[U(t,e-1)],lengths:[1]}}function q(t,e){return e===t.height?t:{ctor:"_Array",height:e,table:[q(t,e-1)],lengths:[I(t)]}}function z(t,e){return{ctor:"_Array",height:t.height+1,table:[t,e],lengths:[I(t),I(t)+I(e)]}}function Z(t){var e=new Array(I(t));return F(e,0,t),e}function F(t,e,n){for(var r=0;r<n.table.length;r++)if(0===n.height)t[e+r]=n.table[r];else{var o=0===r?0:n.lengths[r-1];F(t,e+o,n.table[r])}}function W(t){if(0===t.length)return V;var e=Math.floor(Math.log(t.length)/Math.log(J));return H(t,e,0,t.length)}function H(t,e,n,r){if(0===e)return{ctor:"_Array",height:0,table:t.slice(n,r)};for(var o=Math.pow(J,e),i=new Array(Math.ceil((r-n)/o)),a=new Array(i.length),s=0;s<i.length;s++)i[s]=H(t,e-1,n+s*o,Math.min(n+(s+1)*o,r)),a[s]=I(i[s])+(s>0?a[s-1]:0);return{ctor:"_Array",height:e,table:i,lengths:a}}var J=32,G=2,V={ctor:"_Array",height:0,table:[]};return{empty:V,fromList:u,toList:d,initialize:e(a),append:e(x),push:e(h),slice:n(b),get:e(t),set:n(o),map:e(p),indexedMap:e(m),foldl:n(g),foldr:n(y),length:I,toJSArray:Z,fromJSArray:W}}(),p=function(){function t(t,e){return t/e|0}function r(t,e){return t%e}function o(t,e){if(0===e)throw new Error("Cannot perform mod 0. Division by zero error.");var n=t%e,r=0===t?0:e>0?t>=0?n:n+e:-o(-t,-e);return r===e?0:r}function i(t,e){return Math.log(e)/Math.log(t)}function a(t){return-t}function s(t){return t<0?-t:t}function u(t,e){return m.cmp(t,e)<0?t:e}function c(t,e){return m.cmp(t,e)>0?t:e}function l(t,e,n){return m.cmp(n,t)<0?t:m.cmp(n,e)>0?e:n}function h(t,e){return{ctor:w[m.cmp(t,e)+1]}}function f(t,e){return t!==e}function d(t){return!t}function _(t){return t===1/0||t===-(1/0)}function p(t){return 0|t}function v(t){return t*Math.PI/180}function g(t){return 2*Math.PI*t}function y(t){var e=t._0,n=t._1;return m.Tuple2(e*Math.cos(n),e*Math.sin(n))}function b(t){var e=t._0,n=t._1;return m.Tuple2(Math.sqrt(e*e+n*n),Math.atan2(n,e))}var w=["LT","EQ","GT"];return{div:e(t),rem:e(r),mod:e(o),pi:Math.PI,e:Math.E,cos:Math.cos,sin:Math.sin,tan:Math.tan,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:e(Math.atan2),degrees:v,turns:g,fromPolar:y,toPolar:b,sqrt:Math.sqrt,logBase:e(i),negate:a,abs:s,min:e(u),max:e(c),clamp:n(l),compare:e(h),xor:e(f),not:d,truncate:p,ceiling:Math.ceil,floor:Math.floor,round:Math.round,toFloat:function(t){return t},isNaN:isNaN,isInfinite:_}}(),m=function(){function t(t,e){for(var r,o=[],i=n(t,e,0,o);i&&(r=o.pop());)i=n(r.x,r.y,0,o);return i}function n(t,e,r,o){if(r>100)return o.push({x:t,y:e}),!0;if(t===e)return!0;if("object"!=typeof t){if("function"==typeof t)throw new Error('Trying to use `(==)` on functions. There is no way to know if functions are "the same" in the Elm sense. Read more about this at http://package.elm-lang.org/packages/elm-lang/core/latest/Basics#== which describes why it is this way and what the better version will look like.');return!1}if(null===t||null===e)return!1;if(t instanceof Date)return t.getTime()===e.getTime();if(!("ctor"in t)){for(var i in t)if(!n(t[i],e[i],r+1,o))return!1;return!0}if("RBNode_elm_builtin"!==t.ctor&&"RBEmpty_elm_builtin"!==t.ctor||(t=Mt(t),e=Mt(e)),"Set_elm_builtin"===t.ctor&&(t=_elm_lang$core$Set$toList(t),e=_elm_lang$core$Set$toList(e)),"::"===t.ctor){for(var a=t,s=e;"::"===a.ctor&&"::"===s.ctor;){if(!n(a._0,s._0,r+1,o))return!1;a=a._1,s=s._1}return a.ctor===s.ctor}if("_Array"===t.ctor){var u=_.toJSArray(t),c=_.toJSArray(e);if(u.length!==c.length)return!1;for(var l=0;l<u.length;l++)if(!n(u[l],c[l],r+1,o))return!1;return!0}if(!n(t.ctor,e.ctor,r+1,o))return!1;for(var i in t)if(!n(t[i],e[i],r+1,o))return!1;return!0}function r(t,e){if("object"!=typeof t)return t===e?v:t<e?m:g;if(t instanceof String){var n=t.valueOf(),o=e.valueOf();return n===o?v:n<o?m:g}if("::"===t.ctor||"[]"===t.ctor){for(;"::"===t.ctor&&"::"===e.ctor;){var i=r(t._0,e._0);if(i!==v)return i;t=t._1,e=e._1}return t.ctor===e.ctor?v:"[]"===t.ctor?m:g}if("_Tuple"===t.ctor.slice(0,6)){var i,a=t.ctor.slice(6)-0,s="cannot compare tuples with more than 6 elements.";if(0===a)return v;if(a>=1){if(i=r(t._0,e._0),i!==v)return i;if(a>=2){if(i=r(t._1,e._1),i!==v)return i;if(a>=3){if(i=r(t._2,e._2),i!==v)return i;if(a>=4){if(i=r(t._3,e._3),i!==v)return i;if(a>=5){if(i=r(t._4,e._4),i!==v)return i;if(a>=6){if(i=r(t._5,e._5),i!==v)return i;if(a>=7)throw new Error("Comparison error: "+s)}}}}}}return v}throw new Error("Comparison error: comparison is only defined on ints, floats, times, chars, strings, lists of comparable values, and tuples of comparable values.")}function o(t,e){return{ctor:"_Tuple2",_0:t,_1:e}}function i(t){return new String(t)}function a(t){return b++}function s(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function u(t,e){return{ctor:"::",_0:t,_1:e}}function c(t,e){if("string"==typeof t)return t+e;if("[]"===t.ctor)return e;var n=u(t._0,w),r=n;for(t=t._1;"[]"!==t.ctor;)r._1=u(t._0,w),t=t._1,r=r._1;return r._1=e,n}function l(t,e){return function(n){throw new Error("Ran into a `Debug.crash` in module `"+t+"` "+f(e)+"\nThe message provided by the code author is:\n\n    "+n)}}function h(t,e,n){return function(r){throw new Error("Ran into a `Debug.crash` in module `"+t+"`\n\nThis was caused by the `case` expression "+f(e)+".\nOne of the branches ended with a crash and the following value got through:\n\n    "+d(n)+"\n\nThe message provided by the code author is:\n\n    "+r)}}function f(t){return t.start.line==t.end.line?"on line "+t.start.line:"between lines "+t.start.line+" and "+t.end.line}function d(t){var e=typeof t;if("function"===e)return"<function>";if("boolean"===e)return t?"True":"False";if("number"===e)return t+"";if(t instanceof String)return"'"+p(t,!0)+"'";if("string"===e)return'"'+p(t,!1)+'"';if(null===t)return"null";if("object"===e&&"ctor"in t){var n=t.ctor.substring(0,5);if("_Tupl"===n){var r=[];for(var o in t)"ctor"!==o&&r.push(d(t[o]));return"("+r.join(",")+")"}if("_Task"===n)return"<task>";if("_Array"===t.ctor){var i=ft(t);return"Array.fromList "+d(i)}if("<decoder>"===t.ctor)return"<decoder>";if("_Process"===t.ctor)return"<process:"+t.id+">";if("::"===t.ctor){var r="["+d(t._0);for(t=t._1;"::"===t.ctor;)r+=","+d(t._0),t=t._1;return r+"]"}if("[]"===t.ctor)return"[]";if("Set_elm_builtin"===t.ctor)return"Set.fromList "+d(_elm_lang$core$Set$toList(t));if("RBNode_elm_builtin"===t.ctor||"RBEmpty_elm_builtin"===t.ctor)return"Dict.fromList "+d(Mt(t));var r="";for(var a in t)if("ctor"!==a){var s=d(t[a]),u=s[0],c="{"===u||"("===u||"<"===u||'"'===u||s.indexOf(" ")<0;r+=" "+(c?s:"("+s+")")}return t.ctor+r}if("object"===e){if(t instanceof Date)return"<"+t.toString()+">";if(t.elm_web_socket)return"<websocket>";var r=[];for(var o in t)r.push(o+" = "+d(t[o]));return 0===r.length?"{}":"{ "+r.join(", ")+" }"}return"<internal structure>"}function p(t,e){var n=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return e?n.replace(/\'/g,"\\'"):n.replace(/\"/g,'\\"')}var m=-1,v=0,g=1,y={ctor:"_Tuple0"},b=0,w={ctor:"[]"};return{eq:t,cmp:r,Tuple0:y,Tuple2:o,chr:i,update:s,guid:a,append:e(c),crash:l,crashCase:h,toString:d}}(),v=(e(function(t,e){var n=e;return c(t,n._0,n._1)}),n(function(t,e,n){return t({ctor:"_Tuple2",_0:e,_1:n})}),n(function(t,e,n){return c(t,n,e)}),e(function(t,e){return t})),g=function(t){return t},y=y||{};y["<|"]=e(function(t,e){return t(e)});var y=y||{};y["|>"]=e(function(t,e){return e(t)});var y=y||{};y[">>"]=n(function(t,e,n){return e(t(n))});var y=y||{};y["<<"]=n(function(t,e,n){return t(e(n))});var y=y||{};y["++"]=m.append;var b=m.toString,w=(p.isInfinite,p.isNaN,p.toFloat),T=(p.ceiling,p.floor),x=(p.truncate,p.round),y=(p.not,p.xor,y||{});y["||"]=p.or;var y=y||{};y["&&"]=p.and;var E=(p.max,p.min,p.compare),y=y||{};y[">="]=p.ge;var y=y||{};y["<="]=p.le;var y=y||{};y[">"]=p.gt;var y=y||{};y["<"]=p.lt;var y=y||{};y["/="]=p.neq;var y=y||{};y["=="]=p.eq;var k=(p.e,p.pi),L=(p.clamp,p.logBase,p.abs,p.negate,p.sqrt),P=p.atan2,S=(p.atan,p.asin,p.acos,p.tan,p.sin),C=p.cos,y=y||{};y["^"]=p.exp;var y=y||{};y["%"]=p.mod;var y=(p.rem,y||{});y["//"]=p.div;var y=y||{};y["/"]=p.floatDiv;var y=y||{};y["*"]=p.mul;var y=y||{};y["-"]=p.sub;var y=y||{};y["+"]=p.add;var D=(p.toPolar,p.fromPolar,p.turns,p.degrees),A={ctor:"GT"},B={ctor:"EQ"},O={ctor:"LT"},M=e(function(t,e){var n=e;return"Just"===n.ctor?n._0:t}),N={ctor:"Nothing"},I=e(function(t,e){var n=e;return"Just"===n.ctor?t(n._0):N}),R=function(t){return{ctor:"Just",_0:t}},U=e(function(t,e){var n=e;return"Just"===n.ctor?R(t(n._0)):N}),q=n(function(t,e,n){var r={ctor:"_Tuple2",_0:e,_1:n};return"_Tuple2"===r.ctor&&"Just"===r._0.ctor&&"Just"===r._1.ctor?R(c(t,r._0._0,r._1._0)):N}),j=(r(function(t,e,n,r){var o={ctor:"_Tuple3",_0:e,_1:n,_2:r};return"_Tuple3"===o.ctor&&"Just"===o._0.ctor&&"Just"===o._1.ctor&&"Just"===o._2.ctor?R(l(t,o._0._0,o._1._0,o._2._0)):N}),o(function(t,e,n,r,o){var i={ctor:"_Tuple4",_0:e,_1:n,_2:r,_3:o};return"_Tuple4"===i.ctor&&"Just"===i._0.ctor&&"Just"===i._1.ctor&&"Just"===i._2.ctor&&"Just"===i._3.ctor?R(h(t,i._0._0,i._1._0,i._2._0,i._3._0)):N}),i(function(t,e,n,r,o,i){var a={ctor:"_Tuple5",_0:e,_1:n,_2:r,_3:o,_4:i};return"_Tuple5"===a.ctor&&"Just"===a._0.ctor&&"Just"===a._1.ctor&&"Just"===a._2.ctor&&"Just"===a._3.ctor&&"Just"===a._4.ctor?R(f(t,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):N}),function(){function t(t,e){return{ctor:"::",_0:t,_1:e}}function a(e){for(var n=b,r=e.length;r--;)n=t(e[r],n);return n}function s(t){for(var e=[];"[]"!==t.ctor;)e.push(t._0),t=t._1;return e}function u(t,e,n){for(var r=s(n),o=e,i=r.length;i--;)o=c(t,r[i],o);return o}function d(t,e,n){for(var r=[];"[]"!==e.ctor&&"[]"!==n.ctor;)r.push(c(t,e._0,n._0)),e=e._1,n=n._1;return a(r)}function _(t,e,n,r){for(var o=[];"[]"!==e.ctor&&"[]"!==n.ctor&&"[]"!==r.ctor;)o.push(l(t,e._0,n._0,r._0)),e=e._1,n=n._1,r=r._1;return a(o)}function p(t,e,n,r,o){for(var i=[];"[]"!==e.ctor&&"[]"!==n.ctor&&"[]"!==r.ctor&&"[]"!==o.ctor;)i.push(h(t,e._0,n._0,r._0,o._0)),e=e._1,n=n._1,r=r._1,o=o._1;return a(i)}function v(t,e,n,r,o,i){for(var s=[];"[]"!==e.ctor&&"[]"!==n.ctor&&"[]"!==r.ctor&&"[]"!==o.ctor&&"[]"!==i.ctor;)s.push(f(t,e._0,n._0,r._0,o._0,i._0)),e=e._1,n=n._1,r=r._1,o=o._1,i=i._1;return a(s)}function g(t,e){return a(s(e).sort(function(e,n){return m.cmp(t(e),t(n))}))}function y(t,e){return a(s(e).sort(function(e,n){var r=t(e)(n).ctor;return"EQ"===r?0:"LT"===r?-1:1}))}var b={ctor:"[]"};return{Nil:b,Cons:t,cons:e(t),toArray:s,fromArray:a,foldr:n(u),map2:n(d),map3:r(_),map4:o(p),map5:i(v),sortBy:e(g),sortWith:e(y)}}()),z=j.sortWith,Z=(j.sortBy,e(function(t,e){for(;;){if(m.cmp(t,0)<1)return e;var n=e;if("[]"===n.ctor)return e;var r=t-1,o=n._1;t=r,e=o}})),F=(j.map5,j.map4,j.map3,j.map2),W=e(function(t,e){for(;;){var n=e;if("[]"===n.ctor)return!1;if(t(n._0))return!0;var r=t,o=n._1;t=r,e=o}}),H=(e(function(t,e){return!c(W,function(e){return!t(e)},e)}),j.foldr),J=n(function(t,e,n){for(;;){var r=n;if("[]"===r.ctor)return e;var o=t,i=c(t,r._0,e),a=r._1;t=o,e=i,n=a}}),G=function(t){return l(J,e(function(t,e){return e+1}),0,t)},V=e(function(t,e){return c(W,function(e){return m.eq(e,t)},e)}),K=function(t){var e=t;return"[]"===e.ctor},X=function(t){var e=t;return"::"===e.ctor?R(e._0):N},Y=Y||{};Y["::"]=j.cons;var Q=e(function(t,n){return l(H,e(function(e,n){return{ctor:"::",_0:t(e),_1:n}}),{ctor:"[]"},n)}),$=e(function(t,n){var r=e(function(e,n){return t(e)?{ctor:"::",_0:e,_1:n}:n});return l(H,r,{ctor:"[]"},n)}),tt=n(function(t,e,n){var r=t(e);return"Just"===r.ctor?{ctor:"::",_0:r._0,_1:n}:n}),et=(e(function(t,e){return l(H,tt(t),{ctor:"[]"},e)}),function(t){return l(J,e(function(t,e){return{ctor:"::",_0:t,_1:e}}),{ctor:"[]"},t)}),nt=(n(function(t,n,r){var o=e(function(e,n){var r=n;return"::"===r.ctor?{ctor:"::",_0:c(t,e,r._0),_1:n}:{ctor:"[]"}});return et(l(J,o,{ctor:"::",_0:n,_1:{ctor:"[]"}},r))}),e(function(t,n){var r=n;return"[]"===r.ctor?t:l(H,e(function(t,e){return{ctor:"::",_0:t,_1:e}}),n,t)})),rt=function(t){return l(H,nt,{ctor:"[]"},t)},ot=(e(function(t,e){return rt(c(Q,t,e))}),e(function(t,n){var r=e(function(e,n){var r=n,o=r._0,i=r._1;return t(e)?{ctor:"_Tuple2",_0:{ctor:"::",_0:e,_1:o},_1:i}:{ctor:"_Tuple2",_0:o,_1:{ctor:"::",_0:e,_1:i}}});return l(H,r,{ctor:"_Tuple2",_0:{ctor:"[]"},_1:{ctor:"[]"}},n)}),e(function(t,n){var r=n;if("[]"===r.ctor)return{ctor:"[]"};var o=e(function(e,n){return{ctor:"::",_0:t,_1:{ctor:"::",_0:e,_1:n}}}),i=l(H,o,{ctor:"[]"},r._1);return{ctor:"::",_0:r._0,_1:i}})),it=n(function(t,e,n){for(;;){if(m.cmp(t,0)<1)return n;var r=e;if("[]"===r.ctor)return n;var o=t-1,i=r._1,a={ctor:"::",_0:r._0,_1:n};t=o,e=i,n=a}}),at=e(function(t,e){return et(l(it,t,e,{ctor:"[]"}))}),st=n(function(t,e,n){if(m.cmp(e,0)<1)return{ctor:"[]"};var r={ctor:"_Tuple2",_0:e,_1:n};t:do{e:do{if("_Tuple2"!==r.ctor)break t;if("[]"===r._1.ctor)return n;if("::"!==r._1._1.ctor){if(1===r._0)break e;break t}switch(r._0){case 1:break e;case 2:return{ctor:"::",_0:r._1._0,_1:{ctor:"::",_0:r._1._1._0,_1:{ctor:"[]"}}};case 3:if("::"===r._1._1._1.ctor)return{ctor:"::",_0:r._1._0,_1:{ctor:"::",_0:r._1._1._0,_1:{ctor:"::",_0:r._1._1._1._0,_1:{ctor:"[]"}}}};break t;default:if("::"===r._1._1._1.ctor&&"::"===r._1._1._1._1.ctor){var o=r._1._1._1._0,i=r._1._1._0,a=r._1._0,s=r._1._1._1._1._0,u=r._1._1._1._1._1;return m.cmp(t,1e3)>0?{ctor:"::",_0:a,_1:{ctor:"::",_0:i,_1:{ctor:"::",_0:o,_1:{ctor:"::",_0:s,_1:c(at,e-4,u)}}}}:{ctor:"::",_0:a,_1:{ctor:"::",_0:i,_1:{ctor:"::",_0:o,_1:{ctor:"::",_0:s,_1:l(st,t+1,e-4,u)}}}}}break t}}while(!1);return{ctor:"::",_0:r._1._0,_1:{ctor:"[]"}}}while(!1);return n}),ut=(e(function(t,e){return l(st,0,t,e)}),n(function(t,e,n){for(;;){if(m.cmp(e,0)<1)return t;var r={ctor:"::",_0:n,_1:t},o=e-1,i=n;t=r,e=o,n=i}})),ct=(e(function(t,e){return l(ut,{ctor:"[]"},t,e)}),n(function(t,e,n){for(;;){if(!(m.cmp(t,e)<1))return n;var r=t,o=e-1,i={ctor:"::",_0:e,_1:n};t=r,e=o,n=i}})),lt=e(function(t,e){return l(ct,t,e,{ctor:"[]"})}),ht=(e(function(t,e){return l(F,t,c(lt,0,G(e)-1),e)}),_.append,_.length,_.slice,_.set,e(function(t,e){return m.cmp(0,t)<1&&m.cmp(t,_.length(e))<0?R(c(_.get,t,e)):N})),ft=(_.push,_.empty,e(function(t,n){var r=e(function(e,n){return t(e)?c(_.push,e,n):n});return l(_.foldl,r,_.empty,n)}),_.foldr,_.foldl,_.indexedMap,_.map,_.toList),dt=_.fromList,_t=_.initialize,pt=(e(function(t,e){return c(_t,t,v(e))}),function(){function t(t,e){var n=t+": "+m.toString(e),r=r||{};return r.stdout?r.stdout.write(n):console.log(n),e}function n(t){throw new Error(t)}return{crash:n,log:e(t)}}()),mt=function(){function t(t){return 0===t.length}function r(t,e){return t+e}function o(t){var e=t[0];return e?R(m.Tuple2(m.chr(e),t.slice(1))):N}function i(t,e){return t+e}function a(t){return j.toArray(t).join("")}function s(t){return t.length}function u(t,e){for(var n=e.split(""),r=n.length;r--;)n[r]=t(m.chr(n[r]));return n.join("")}function l(t,e){return e.split("").map(m.chr).filter(t).join("")}function h(t){return t.split("").reverse().join("")}function f(t,e,n){for(var r=n.length,o=0;o<r;++o)e=c(t,m.chr(n[o]),e);return e}function d(t,e,n){for(var r=n.length;r--;)e=c(t,m.chr(n[r]),e);return e}function _(t,e){return j.fromArray(e.split(t))}function p(t,e){return j.toArray(e).join(t)}function v(t,e){for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}function g(t,e,n){return n.slice(t,e)}function y(t,e){return t<1?"":e.slice(0,t)}function b(t,e){return t<1?"":e.slice(-t)}function w(t,e){return t<1?e:e.slice(t)}function T(t,e){return t<1?e:e.slice(0,-t)}function x(t,e,n){var r=(t-n.length)/2;return v(Math.ceil(r),e)+n+v(0|r,e)}function E(t,e,n){return n+v(t-n.length,e)}function k(t,e,n){return v(t-n.length,e)+n}function L(t){return t.trim()}function P(t){return t.replace(/^\s+/,"")}function S(t){return t.replace(/\s+$/,"")}function C(t){return j.fromArray(t.trim().split(/\s+/g))}function D(t){return j.fromArray(t.split(/\r\n|\r|\n/g))}function A(t){return t.toUpperCase()}function B(t){return t.toLowerCase()}function O(t,e){for(var n=e.length;n--;)if(t(m.chr(e[n])))return!0;return!1}function M(t,e){for(var n=e.length;n--;)if(!t(m.chr(e[n])))return!1;return!0}function I(t,e){return e.indexOf(t)>-1}function U(t,e){return 0===e.indexOf(t)}function q(t,e){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}function z(t,e){var n=t.length;if(n<1)return j.Nil;for(var r=0,o=[];(r=e.indexOf(t,r))>-1;)o.push(r),r+=n;return j.fromArray(o)}function Z(t){var e=t.length;if(0===e)return F(t);var n=t[0];if("0"===n&&"x"===t[1]){for(var r=2;r<e;++r){var n=t[r];if(!("0"<=n&&n<="9"||"A"<=n&&n<="F"||"a"<=n&&n<="f"))return F(t)}return wt(parseInt(t,16))}if(n>"9"||n<"0"&&"-"!==n&&"+"!==n)return F(t);for(var r=1;r<e;++r){var n=t[r];if(n<"0"||"9"<n)return F(t)}return wt(parseInt(t,10))}function F(t){return bt("could not convert string '"+t+"' to an Int")}function W(t){if(0===t.length||/[\sxbo]/.test(t))return H(t);var e=+t;return e===e?wt(e):H(t)}function H(t){return bt("could not convert string '"+t+"' to a Float")}function J(t){return j.fromArray(t.split("").map(m.chr))}function G(t){return j.toArray(t).join("")}return{isEmpty:t,cons:e(r),uncons:o,append:e(i),concat:a,length:s,map:e(u),filter:e(l),reverse:h,foldl:n(f),foldr:n(d),split:e(_),join:e(p),repeat:e(v),slice:n(g),left:e(y),right:e(b),dropLeft:e(w),dropRight:e(T),pad:n(x),padLeft:n(k),padRight:n(E),trim:L,trimLeft:P,trimRight:S,words:C,lines:D,toUpper:A,toLower:B,any:e(O),all:e(M),contains:e(I),startsWith:e(U),endsWith:e(q),indexes:e(z),toInt:Z,toFloat:W,toList:J,fromList:G}}(),vt=function(){return{fromCode:function(t){return m.chr(String.fromCharCode(t))},toCode:function(t){return t.charCodeAt(0)},toUpper:function(t){return m.chr(t.toUpperCase())},toLower:function(t){return m.chr(t.toLowerCase())},toLocaleUpper:function(t){return m.chr(t.toLocaleUpperCase())},toLocaleLower:function(t){return m.chr(t.toLocaleLowerCase())}}}(),gt=(vt.fromCode,vt.toCode),yt=(vt.toLocaleLower,vt.toLocaleUpper,vt.toLower,vt.toUpper,n(function(t,e,n){var r=gt(n);return m.cmp(r,gt(t))>-1&&m.cmp(r,gt(e))<1})),bt=(c(yt,m.chr("A"),m.chr("Z")),c(yt,m.chr("a"),m.chr("z")),c(yt,m.chr("0"),m.chr("9")),c(yt,m.chr("0"),m.chr("7")),e(function(t,e){var n=e;return"Ok"===n.ctor?n._0:t}),function(t){return{ctor:"Err",_0:t}}),wt=(e(function(t,e){var n=e;return"Ok"===n.ctor?t(n._0):bt(n._0)}),function(t){return{ctor:"Ok",_0:t}}),Tt=e(function(t,e){var n=e;return"Ok"===n.ctor?wt(t(n._0)):bt(n._0)}),xt=(n(function(t,e,n){var r={ctor:"_Tuple2",_0:e,_1:n};return"Ok"===r._0.ctor?"Ok"===r._1.ctor?wt(c(t,r._0._0,r._1._0)):bt(r._1._0):bt(r._0._0)}),r(function(t,e,n,r){var o={ctor:"_Tuple3",_0:e,_1:n,_2:r};return"Ok"===o._0.ctor?"Ok"===o._1.ctor?"Ok"===o._2.ctor?wt(l(t,o._0._0,o._1._0,o._2._0)):bt(o._2._0):bt(o._1._0):bt(o._0._0)}),o(function(t,e,n,r,o){var i={ctor:"_Tuple4",
_0:e,_1:n,_2:r,_3:o};return"Ok"===i._0.ctor?"Ok"===i._1.ctor?"Ok"===i._2.ctor?"Ok"===i._3.ctor?wt(h(t,i._0._0,i._1._0,i._2._0,i._3._0)):bt(i._3._0):bt(i._2._0):bt(i._1._0):bt(i._0._0)}),i(function(t,e,n,r,o,i){var a={ctor:"_Tuple5",_0:e,_1:n,_2:r,_3:o,_4:i};return"Ok"===a._0.ctor?"Ok"===a._1.ctor?"Ok"===a._2.ctor?"Ok"===a._3.ctor?"Ok"===a._4.ctor?wt(f(t,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):bt(a._4._0):bt(a._3._0):bt(a._2._0):bt(a._1._0):bt(a._0._0)}),e(function(t,e){var n=e;return"Ok"===n.ctor?wt(n._0):bt(t(n._0))}),e(function(t,e){var n=e;return"Just"===n.ctor?wt(n._0):bt(t)}),mt.fromList,mt.toList,mt.toFloat,mt.toInt),Et=(mt.indexes,mt.indexes,mt.endsWith,mt.startsWith),kt=(mt.contains,mt.all,mt.any,mt.toLower,mt.toUpper),Lt=(mt.lines,mt.words,mt.trimRight,mt.trimLeft,mt.trim,mt.padRight,mt.padLeft,mt.pad,mt.dropRight,mt.dropLeft),Pt=(mt.right,mt.left),St=(mt.slice,mt.repeat,mt.join),Ct=mt.split,Dt=(mt.foldr,mt.foldl,mt.reverse,mt.filter,mt.map,mt.length,mt.concat),At=(mt.append,mt.uncons,mt.cons,mt.isEmpty),Bt=n(function(t,e,n){for(;;){var r=n;if("RBEmpty_elm_builtin"===r.ctor)return e;var o=t,i=l(t,r._1,r._2,l(Bt,t,e,r._4)),a=r._3;t=o,e=i,n=a}}),Ot=function(t){return l(Bt,n(function(t,e,n){return{ctor:"::",_0:e,_1:n}}),{ctor:"[]"},t)},Mt=function(t){return l(Bt,n(function(t,e,n){return{ctor:"::",_0:{ctor:"_Tuple2",_0:t,_1:e},_1:n}}),{ctor:"[]"},t)},Nt=n(function(t,e,n){for(;;){var r=n;if("RBEmpty_elm_builtin"===r.ctor)return e;var o=t,i=l(t,r._1,r._2,l(Nt,t,e,r._3)),a=r._4;t=o,e=i,n=a}}),It=i(function(t,r,o,i,a,s){var u=n(function(e,n,i){for(;;){var a=i,s=a._1,u=a._0,c=u;if("[]"===c.ctor)return{ctor:"_Tuple2",_0:u,_1:l(o,e,n,s)};var f=c._1,d=c._0._1,_=c._0._0;if(!(m.cmp(_,e)<0))return m.cmp(_,e)>0?{ctor:"_Tuple2",_0:u,_1:l(o,e,n,s)}:{ctor:"_Tuple2",_0:f,_1:h(r,_,d,n,s)};var p=e,v=n,g={ctor:"_Tuple2",_0:f,_1:l(t,_,d,s)};e=p,n=v,i=g}}),c=l(Nt,u,{ctor:"_Tuple2",_0:Mt(i),_1:s},a),f=c._0,d=c._1;return l(J,e(function(e,n){var r=e;return l(t,r._0,r._1,n)}),d,f)}),Rt=r(function(t,e,n,r){return pt.crash(Dt({ctor:"::",_0:"Internal red-black tree invariant violated, expected ",_1:{ctor:"::",_0:t,_1:{ctor:"::",_0:" and got ",_1:{ctor:"::",_0:b(e),_1:{ctor:"::",_0:"/",_1:{ctor:"::",_0:n,_1:{ctor:"::",_0:"/",_1:{ctor:"::",_0:r,_1:{ctor:"::",_0:"\nPlease report this bug to <https://github.com/elm-lang/core/issues>",_1:{ctor:"[]"}}}}}}}}}}))}),Ut=function(t){var e=t;t:do{if("RBNode_elm_builtin"===e.ctor){if("BBlack"===e._0.ctor)return!0;break t}if("LBBlack"===e._0.ctor)return!0;break t}while(!1);return!1},qt=e(function(t,e){for(;;){var n=e;if("RBEmpty_elm_builtin"===n.ctor)return t;var r=c(qt,t+1,n._4),o=n._3;t=r,e=o}}),jt=e(function(t,e){t:for(;;){var n=e;if("RBEmpty_elm_builtin"===n.ctor)return N;var r=c(E,t,n._1);switch(r.ctor){case"LT":var o=t,i=n._3;t=o,e=i;continue t;case"EQ":return R(n._2);default:var a=t,s=n._4;t=a,e=s;continue t}}}),zt=e(function(t,e){var n=c(jt,t,e);return"Just"===n.ctor}),Zt=n(function(t,e,n){for(;;){var r=n;if("RBEmpty_elm_builtin"===r.ctor)return{ctor:"_Tuple2",_0:t,_1:e};var o=r._1,i=r._2,a=r._4;t=o,e=i,n=a}}),Ft={ctor:"NBlack"},Wt={ctor:"BBlack"},Ht={ctor:"Black"},Jt=function(t){var e=t;if("RBNode_elm_builtin"===e.ctor){var n=e._0;return m.eq(n,Ht)||m.eq(n,Wt)}return!0},Gt={ctor:"Red"},Vt=function(t){var e=t;switch(e.ctor){case"Black":return Wt;case"Red":return Ht;case"NBlack":return Gt;default:return pt.crash("Can't make a double black node more black!")}},Kt=function(t){var e=t;switch(e.ctor){case"BBlack":return Ht;case"Black":return Gt;case"Red":return Ft;default:return pt.crash("Can't make a negative black node less black!")}},Xt={ctor:"LBBlack"},Yt={ctor:"LBlack"},Qt=function(t){return{ctor:"RBEmpty_elm_builtin",_0:t}},$t=Qt(Yt),te=function(t){return m.eq(t,$t)},ee=o(function(t,e,n,r,o){return{ctor:"RBNode_elm_builtin",_0:t,_1:e,_2:n,_3:r,_4:o}}),ne=function(t){var e=t;return"RBNode_elm_builtin"===e.ctor&&"Red"===e._0.ctor?f(ee,Ht,e._1,e._2,e._3,e._4):t},re=function(t){var e=t;return"RBNode_elm_builtin"===e.ctor?f(ee,Kt(e._0),e._1,e._2,e._3,e._4):Qt(Yt)},oe=function(t){return function(e){return function(n){return function(r){return function(o){return function(i){return function(a){return function(s){return function(u){return function(c){return function(l){return f(ee,Kt(t),r,o,f(ee,Ht,e,n,s,u),f(ee,Ht,i,a,c,l))}}}}}}}}}}},ie=function(t){var e=t;return"RBEmpty_elm_builtin"===e.ctor?Qt(Yt):f(ee,Ht,e._1,e._2,e._3,e._4)},ae=function(t){var e=t;return"RBEmpty_elm_builtin"===e.ctor?pt.crash("can't make a Leaf red"):f(ee,Gt,e._1,e._2,e._3,e._4)},se=function(t){var e=t;t:do{e:do{n:do{r:do{o:do{i:do{a:do{if("RBNode_elm_builtin"!==e.ctor)break t;if("RBNode_elm_builtin"===e._3.ctor)if("RBNode_elm_builtin"===e._4.ctor)switch(e._3._0.ctor){case"Red":switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break a;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break i;if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break r;break t;case"NBlack":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break a;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break i;if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break n;break t;default:if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break a;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break i;break t}case"NBlack":switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break r;if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t;case"NBlack":if("BBlack"===e._0.ctor){if("RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break n;if("RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t}break t;default:if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t}default:switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break r;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break n;break t;default:break t}}else switch(e._3._0.ctor){case"Red":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break a;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break i;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t;default:break t}else{if("RBNode_elm_builtin"!==e._4.ctor)break t;switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break r;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break n;break t;default:break t}}}while(!1);return oe(e._0)(e._3._3._1)(e._3._3._2)(e._3._1)(e._3._2)(e._1)(e._2)(e._3._3._3)(e._3._3._4)(e._3._4)(e._4)}while(!1);return oe(e._0)(e._3._1)(e._3._2)(e._3._4._1)(e._3._4._2)(e._1)(e._2)(e._3._3)(e._3._4._3)(e._3._4._4)(e._4)}while(!1);return oe(e._0)(e._1)(e._2)(e._4._3._1)(e._4._3._2)(e._4._1)(e._4._2)(e._3)(e._4._3._3)(e._4._3._4)(e._4._4)}while(!1);return oe(e._0)(e._1)(e._2)(e._4._1)(e._4._2)(e._4._4._1)(e._4._4._2)(e._3)(e._4._3)(e._4._4._3)(e._4._4._4)}while(!1);return f(ee,Ht,e._4._3._1,e._4._3._2,f(ee,Ht,e._1,e._2,e._3,e._4._3._3),f(ue,Ht,e._4._1,e._4._2,e._4._3._4,ae(e._4._4)))}while(!1);return f(ee,Ht,e._3._4._1,e._3._4._2,f(ue,Ht,e._3._1,e._3._2,ae(e._3._3),e._3._4._3),f(ee,Ht,e._1,e._2,e._3._4._4,e._4))}while(!1);return t},ue=o(function(t,e,n,r,o){var i=f(ee,t,e,n,r,o);return Jt(i)?se(i):i}),ce=o(function(t,e,n,r,o){return Ut(r)||Ut(o)?f(ue,Vt(t),e,n,re(r),re(o)):f(ee,t,e,n,r,o)}),le=o(function(t,e,n,r,o){var i=o;return"RBEmpty_elm_builtin"===i.ctor?l(he,t,r,o):f(ce,t,e,n,r,f(le,i._0,i._1,i._2,i._3,i._4))}),he=n(function(t,e,n){var r={ctor:"_Tuple2",_0:e,_1:n};if("RBEmpty_elm_builtin"!==r._0.ctor){if("RBEmpty_elm_builtin"===r._1.ctor){var o=r._1._0,i=r._0._0,a={ctor:"_Tuple3",_0:t,_1:i,_2:o};return"_Tuple3"===a.ctor&&"Black"===a._0.ctor&&"Red"===a._1.ctor&&"LBlack"===a._2.ctor?f(ee,Ht,r._0._1,r._0._2,r._0._3,r._0._4):h(Rt,"Black/Red/LBlack",t,b(i),b(o))}var s=r._0._2,u=r._0._4,c=r._0._1,d=f(le,r._0._0,c,s,r._0._3,u),_=l(Zt,c,s,u),p=_._0,m=_._1;return f(ce,t,p,m,d,n)}if("RBEmpty_elm_builtin"!==r._1.ctor){var v=r._1._0,g=r._0._0,y={ctor:"_Tuple3",_0:t,_1:g,_2:v};return"_Tuple3"===y.ctor&&"Black"===y._0.ctor&&"LBlack"===y._1.ctor&&"Red"===y._2.ctor?f(ee,Ht,r._1._1,r._1._2,r._1._3,r._1._4):h(Rt,"Black/LBlack/Red",t,b(g),b(v))}var w=t;switch(w.ctor){case"Red":return Qt(Yt);case"Black":return Qt(Xt);default:return pt.crash("cannot have bblack or nblack nodes at this point")}}),fe=e(function(t,e){var n=e;if("RBEmpty_elm_builtin"===n.ctor)return Qt(Yt);var r=n._1;return f(ee,n._0,r,c(t,r,n._2),c(fe,t,n._3),c(fe,t,n._4))}),de={ctor:"Same"},_e={ctor:"Remove"},pe={ctor:"Insert"},me=n(function(t,e,n){var r=function(n){var o=n;if("RBEmpty_elm_builtin"===o.ctor){var i=e(N);return"Nothing"===i.ctor?{ctor:"_Tuple2",_0:de,_1:$t}:{ctor:"_Tuple2",_0:pe,_1:f(ee,Gt,t,i._0,$t,$t)}}var a=o._2,s=o._4,u=o._3,h=o._1,d=o._0,_=c(E,t,h);switch(_.ctor){case"EQ":var p=e(R(a));return"Nothing"===p.ctor?{ctor:"_Tuple2",_0:_e,_1:l(he,d,u,s)}:{ctor:"_Tuple2",_0:de,_1:f(ee,d,h,p._0,u,s)};case"LT":var m=r(u),v=m._0,g=m._1,y=v;switch(y.ctor){case"Same":return{ctor:"_Tuple2",_0:de,_1:f(ee,d,h,a,g,s)};case"Insert":return{ctor:"_Tuple2",_0:pe,_1:f(ue,d,h,a,g,s)};default:return{ctor:"_Tuple2",_0:_e,_1:f(ce,d,h,a,g,s)}}default:var b=r(s),v=b._0,w=b._1,T=v;switch(T.ctor){case"Same":return{ctor:"_Tuple2",_0:de,_1:f(ee,d,h,a,u,w)};case"Insert":return{ctor:"_Tuple2",_0:pe,_1:f(ue,d,h,a,u,w)};default:return{ctor:"_Tuple2",_0:_e,_1:f(ce,d,h,a,u,w)}}}},o=r(n),i=o._0,a=o._1,s=i;switch(s.ctor){case"Same":return a;case"Insert":return ne(a);default:return ie(a)}}),ve=n(function(t,e,n){return l(me,t,v(R(e)),n)}),ge=e(function(t,e){return l(ve,t,e,$t)}),ye=(e(function(t,e){return l(Nt,ve,e,t)}),e(function(t,e){var r=n(function(e,n,r){return c(t,e,n)?l(ve,e,n,r):r});return l(Nt,r,$t,e)})),be=(e(function(t,n){return c(ye,e(function(t,e){return c(zt,t,n)}),t)}),e(function(t,e){var r=n(function(e,n,r){var o=r,i=o._1,a=o._0;return c(t,e,n)?{ctor:"_Tuple2",_0:l(ve,e,n,a),_1:i}:{ctor:"_Tuple2",_0:a,_1:l(ve,e,n,i)}});return l(Nt,r,{ctor:"_Tuple2",_0:$t,_1:$t},e)}),function(t){return l(J,e(function(t,e){var n=t;return l(ve,n._0,n._1,e)}),$t,t)}),we=e(function(t,e){return l(me,t,v(N),e)}),Te=(e(function(t,e){return l(Nt,n(function(t,e,n){return c(we,t,n)}),t,e)}),function(){function t(t){return{ctor:"<decoder>",tag:"succeed",msg:t}}function c(t){return{ctor:"<decoder>",tag:"fail",msg:t}}function l(t){return{ctor:"<decoder>",tag:t}}function h(t,e){return{ctor:"<decoder>",tag:t,decoder:e}}function f(t){return{ctor:"<decoder>",tag:"null",value:t}}function d(t,e){return{ctor:"<decoder>",tag:"field",field:t,decoder:e}}function p(t,e){return{ctor:"<decoder>",tag:"index",index:t,decoder:e}}function v(t){return{ctor:"<decoder>",tag:"key-value",decoder:t}}function g(t,e){return{ctor:"<decoder>",tag:"map-many",func:t,decoders:e}}function y(t,e){return{ctor:"<decoder>",tag:"andThen",decoder:e,callback:t}}function b(t){return{ctor:"<decoder>",tag:"oneOf",decoders:t}}function w(t,e){return g(t,[e])}function T(t,e,n){return g(t,[e,n])}function x(t,e,n,r){return g(t,[e,n,r])}function E(t,e,n,r,o){return g(t,[e,n,r,o])}function k(t,e,n,r,o,i){return g(t,[e,n,r,o,i])}function L(t,e,n,r,o,i,a){return g(t,[e,n,r,o,i,a])}function P(t,e,n,r,o,i,a,s){return g(t,[e,n,r,o,i,a,s])}function S(t,e,n,r,o,i,a,s,u){return g(t,[e,n,r,o,i,a,s,u])}function C(t){return{tag:"ok",value:t}}function D(t,e){return{tag:"primitive",type:t,value:e}}function A(t,e){return{tag:"index",index:t,rest:e}}function B(t,e){return{tag:"field",field:t,rest:e}}function A(t,e){return{tag:"index",index:t,rest:e}}function O(t){return{tag:"oneOf",problems:t}}function M(t){return{tag:"fail",msg:t}}function I(t){for(var e="_";t;)switch(t.tag){case"primitive":return"Expecting "+t.type+("_"===e?"":" at "+e)+" but instead got: "+U(t.value);case"index":e+="["+t.index+"]",t=t.rest;break;case"field":e+="."+t.field,t=t.rest;break;case"oneOf":for(var n=t.problems,r=0;r<n.length;r++)n[r]=I(n[r]);return"I ran into the following problems"+("_"===e?"":" at "+e)+":\n\n"+n.join("\n");case"fail":return"I ran into a `fail` decoder"+("_"===e?"":" at "+e)+": "+t.msg}}function U(t){return void 0===t?"undefined":JSON.stringify(t)}function q(t,e){var n;try{n=JSON.parse(e)}catch(t){return bt("Given an invalid JSON: "+t.message)}return z(t,n)}function z(t,e){var n=Z(t,e);return"ok"===n.tag?wt(n.value):bt(I(n))}function Z(t,e){switch(t.tag){case"bool":return"boolean"==typeof e?C(e):D("a Bool",e);case"int":return"number"!=typeof e?D("an Int",e):-2147483647<e&&e<2147483647&&(0|e)===e?C(e):!isFinite(e)||e%1?D("an Int",e):C(e);case"float":return"number"==typeof e?C(e):D("a Float",e);case"string":return"string"==typeof e?C(e):e instanceof String?C(e+""):D("a String",e);case"null":return null===e?C(t.value):D("null",e);case"value":return C(e);case"list":if(!(e instanceof Array))return D("a List",e);for(var n=j.Nil,r=e.length;r--;){var o=Z(t.decoder,e[r]);if("ok"!==o.tag)return A(r,o);n=j.Cons(o.value,n)}return C(n);case"array":if(!(e instanceof Array))return D("an Array",e);for(var i=e.length,a=new Array(i),r=i;r--;){var o=Z(t.decoder,e[r]);if("ok"!==o.tag)return A(r,o);a[r]=o.value}return C(_.fromJSArray(a));case"maybe":var o=Z(t.decoder,e);return C("ok"===o.tag?R(o.value):N);case"field":var s=t.field;if("object"!=typeof e||null===e||!(s in e))return D("an object with a field named `"+s+"`",e);var o=Z(t.decoder,e[s]);return"ok"===o.tag?o:B(s,o);case"index":var u=t.index;if(!(e instanceof Array))return D("an array",e);if(u>=e.length)return D("a longer array. Need index "+u+" but there are only "+e.length+" entries",e);var o=Z(t.decoder,e[u]);return"ok"===o.tag?o:A(u,o);case"key-value":if("object"!=typeof e||null===e||e instanceof Array)return D("an object",e);var c=j.Nil;for(var l in e){var o=Z(t.decoder,e[l]);if("ok"!==o.tag)return B(l,o);var h=m.Tuple2(l,o.value);c=j.Cons(h,c)}return C(c);case"map-many":for(var f=t.func,d=t.decoders,r=0;r<d.length;r++){var o=Z(d[r],e);if("ok"!==o.tag)return o;f=f(o.value)}return C(f);case"andThen":var o=Z(t.decoder,e);return"ok"!==o.tag?o:Z(t.callback(o.value),e);case"oneOf":for(var p=[],v=t.decoders;"[]"!==v.ctor;){var o=Z(v._0,e);if("ok"===o.tag)return o;p.push(o),v=v._1}return O(p);case"fail":return M(t.msg);case"succeed":return C(t.msg)}}function F(t,e){if(t===e)return!0;if(t.tag!==e.tag)return!1;switch(t.tag){case"succeed":case"fail":return t.msg===e.msg;case"bool":case"int":case"float":case"string":case"value":return!0;case"null":return t.value===e.value;case"list":case"array":case"maybe":case"key-value":return F(t.decoder,e.decoder);case"field":return t.field===e.field&&F(t.decoder,e.decoder);case"index":return t.index===e.index&&F(t.decoder,e.decoder);case"map-many":return t.func===e.func&&W(t.decoders,e.decoders);case"andThen":return t.callback===e.callback&&F(t.decoder,e.decoder);case"oneOf":return W(t.decoders,e.decoders)}}function W(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(!F(t[r],e[r]))return!1;return!0}function H(t,e){return JSON.stringify(e,null,t)}function J(t){return t}function G(t){for(var e={};"[]"!==t.ctor;){var n=t._0;e[n._0]=n._1,t=t._1}return e}return{encode:e(H),runOnString:e(q),run:e(z),decodeNull:f,decodePrimitive:l,decodeContainer:e(h),decodeField:e(d),decodeIndex:e(p),map1:e(w),map2:n(T),map3:r(x),map4:o(E),map5:i(k),map6:a(L),map7:s(P),map8:u(S),decodeKeyValuePairs:v,andThen:e(y),fail:c,succeed:t,oneOf:b,identity:J,encodeNull:null,encodeArray:_.toJSArray,encodeList:j.toArray,encodeObject:G,equality:F}}()),xe=Te.encodeList,Ee=(Te.encodeArray,Te.encodeObject),ke=Te.encodeNull,Le=Te.identity,Pe=Te.identity,Se=(Te.identity,Te.identity),Ce=(Te.encode,Te.decodeNull),De=Te.decodePrimitive("value"),Ae=Te.andThen,Be=Te.fail,Oe=Te.succeed,Me=Te.run,Ne=Te.runOnString,Ie=(Te.map8,Te.map7,Te.map6,Te.map5),Re=(Te.map4,Te.map3),Ue=Te.map2,qe=Te.map1,je=Te.oneOf,ze=function(t){return c(Te.decodeContainer,"maybe",t)},Ze=(Te.decodeIndex,Te.decodeField),Fe=e(function(t,e){return l(H,Ze,e,t)}),We=(Te.decodeKeyValuePairs,function(t){return c(Te.decodeContainer,"list",t)}),He=function(t){return je({ctor:"::",_0:Ce(N),_1:{ctor:"::",_0:c(qe,R,t),_1:{ctor:"[]"}}})},Je=Te.decodePrimitive("float"),Ge=Te.decodePrimitive("int"),Ve=Te.decodePrimitive("bool"),Ke=Te.decodePrimitive("string"),Xe=(pt.crash,pt.log),Ye=(e(function(t,e){var n=e;return{ctor:"_Tuple2",_0:n._0,_1:t(n._1)}}),e(function(t,e){var n=e;return{ctor:"_Tuple2",_0:t(n._0),_1:n._1}}),function(){function t(t){return function(e){return function(e,n){e.worker=function(e){if("undefined"!=typeof e)throw new Error("The `"+n+"` module does not need flags.\nCall "+n+".worker() with no arguments and you should be all set!");return a(t.init,t.update,t.subscriptions,o)}}}}function r(t){return function(e){return function(n,r){n.worker=function(n){if("undefined"==typeof e)throw new Error("Are you trying to sneak a Never value into Elm? Trickster!\nIt looks like "+r+".main is defined with `programWithFlags` but has type `Program Never`.\nUse `program` instead if you do not want flags.");var i=c(Te.run,e,n);if("Err"===i.ctor)throw new Error(r+".worker(...) was called with an unexpected argument.\nI tried to convert it to an Elm value, but ran into this problem:\n\n"+i._0);return a(t.init(i._0),t.update,t.subscriptions,o)}}}}function o(t,e){return function(t){}}function i(t){var n=v(j.Nil),r=m.Tuple2(m.Tuple0,n);return pr({init:r,view:function(t){return main},update:e(function(t,e){return r}),subscriptions:function(t){return n}})}function a(t,e,n,r){function o(t,r){return Qe.nativeBinding(function(o){var i=c(e,t,r);r=i._0,a(r);var s=i._1,l=n(r);y(u,s,l),o(Qe.succeed(r))})}function i(t){Qe.rawSend(h,t)}var a,u={},l=Qe.nativeBinding(function(e){var o=t._0;a=r(i,o);var s=t._1,c=n(o);y(u,s,c),e(Qe.succeed(o))}),h=_(l,o),f=s(u,i);return f?{ports:f}:{}}function s(t,e){var n;for(var r in S){var o=S[r];o.isForeign&&(n=n||{},n[r]="cmd"===o.tag?k(r):P(r,e)),t[r]=u(o,e)}return n}function u(t,e){function n(t,e){if("self"===t.ctor)return l(a,r,t._0,e);var n=t._0;switch(o){case"cmd":return l(i,r,n.cmds,e);case"sub":return l(i,r,n.subs,e);case"fx":return h(i,r,n.cmds,n.subs,e)}}var r={main:e,self:void 0},o=t.tag,i=t.onEffects,a=t.onSelfMsg,s=_(t.init,n);return r.self=s,s}function f(t,e){return Qe.nativeBinding(function(n){t.main(e),n(Qe.succeed(m.Tuple0))})}function d(t,e){return c(Qe.send,t.self,{ctor:"self",_0:e})}function _(t,e){function n(t){var o=Qe.receive(function(n){return e(n,t)});return c(r,n,o)}var r=Qe.andThen,o=c(r,n,t);return Qe.rawSpawn(o)}function p(t){return function(e){return{type:"leaf",home:t,value:e}}}function v(t){return{type:"node",branches:t}}function g(t,e){return{type:"map",tagger:t,tree:e}}function y(t,e,n){var r={};b(!0,e,r,null),b(!1,n,r,null);for(var o in t){var i=o in r?r[o]:{cmds:j.Nil,subs:j.Nil};Qe.rawSend(t[o],{ctor:"fx",_0:i})}}function b(t,e,n,r){switch(e.type){case"leaf":var o=e.home,i=w(t,o,r,e.value);return void(n[o]=T(t,i,n[o]));case"node":for(var a=e.branches;"[]"!==a.ctor;)b(t,a._0,n,r),a=a._1;return;case"map":return void b(t,e.tree,n,{tagger:e.tagger,rest:r})}}function w(t,e,n,r){function o(t){for(var e=n;e;)t=e.tagger(t),e=e.rest;return t}var i=t?S[e].cmdMap:S[e].subMap;return c(i,o,r)}function T(t,e,n){return n=n||{cmds:j.Nil,subs:j.Nil},t?(n.cmds=j.Cons(e,n.cmds),n):(n.subs=j.Cons(e,n.subs),n)}function x(t){if(t in S)throw new Error("There can only be one port named `"+t+"`, but your program has multiple.")}function E(t,e){return x(t),S[t]={tag:"cmd",cmdMap:C,converter:e,isForeign:!0},p(t)}function k(t){function e(t,e,n){for(;"[]"!==e.ctor;){for(var r=i,o=a(e._0),u=0;u<r.length;u++)r[u](o);e=e._1}return s}function r(t){i.push(t)}function o(t){i=i.slice();var e=i.indexOf(t);e>=0&&i.splice(e,1)}var i=[],a=S[t].converter,s=Qe.succeed(null);return S[t].init=s,S[t].onEffects=n(e),{subscribe:r,unsubscribe:o}}function L(t,e){return x(t),S[t]={tag:"sub",subMap:D,converter:e,isForeign:!0},p(t)}function P(t,e){function r(t,e,n){for(var r=o(t,e,n),i=0;i<l.length;i++)s(l[i]);return l=null,_=s,d=o,r}function o(t,e,n){return h=e,p}function i(t,e,n){return d(t,e,n)}function a(t){l.push(t)}function s(t){for(var n=h;"[]"!==n.ctor;)e(n._0(t)),n=n._1}function u(e){var n=c(Me,f,e);if("Err"===n.ctor)throw new Error("Trying to send an unexpected type of value through port `"+t+"`:\n"+n._0);_(n._0)}var l=[],h=j.Nil,f=S[t].converter,d=r,_=a,p=Qe.succeed(null);return S[t].init=p,S[t].onEffects=n(i),{send:u}}var S={},C=e(function(t,e){return e}),D=e(function(t,e){return function(n){return t(e(n))}});return{sendToApp:e(f),sendToSelf:e(d),effectManagers:S,outgoingPort:E,incomingPort:L,htmlToProgram:i,program:t,programWithFlags:r,initialize:a,leaf:p,batch:v,map:e(g)}}()),Qe=function(){function t(t){return{ctor:"_Task_succeed",value:t}}function n(t){return{ctor:"_Task_fail",value:t}}function r(t){return{ctor:"_Task_nativeBinding",callback:t,cancel:null}}function o(t,e){return{ctor:"_Task_andThen",callback:t,task:e}}function i(t,e){return{ctor:"_Task_onError",callback:t,task:e}}function a(t){return{ctor:"_Task_receive",callback:t}}function s(t){var e={ctor:"_Process",id:m.guid(),root:t,stack:null,mailbox:[]};return _(e),e}function u(e){return r(function(n){var r=s(e);n(t(r))})}function c(t,e){t.mailbox.push(e),_(t)}function l(e,n){return r(function(r){c(e,n),r(t(m.Tuple0))})}function h(e){return r(function(n){var r=e.root;"_Task_nativeBinding"===r.ctor&&r.cancel&&r.cancel(),e.root=null,n(t(m.Tuple0))})}function f(e){return r(function(n){var r=setTimeout(function(){n(t(m.Tuple0))},e);return function(){clearTimeout(r)}})}function d(t,e){for(;t<v;){var n=e.root.ctor;if("_Task_succeed"!==n)if("_Task_fail"!==n)if("_Task_andThen"!==n)if("_Task_onError"!==n){if("_Task_nativeBinding"===n){e.root.cancel=e.root.callback(function(t){e.root=t,_(e)});break}if("_Task_receive"!==n)throw new Error(n);var r=e.mailbox;if(0===r.length)break;e.root=e.root.callback(r.shift()),++t}else e.stack={ctor:"_Task_onError",callback:e.root.callback,rest:e.stack},e.root=e.root.task,++t;else e.stack={ctor:"_Task_andThen",callback:e.root.callback,rest:e.stack},e.root=e.root.task,++t;else{for(;e.stack&&"_Task_andThen"===e.stack.ctor;)e.stack=e.stack.rest;if(null===e.stack)break;e.root=e.stack.callback(e.root.value),e.stack=e.stack.rest,++t}else{for(;e.stack&&"_Task_onError"===e.stack.ctor;)e.stack=e.stack.rest;if(null===e.stack)break;e.root=e.stack.callback(e.root.value),e.stack=e.stack.rest,++t}}return t<v?t+1:(_(e),t)}function _(t){y.push(t),g||(setTimeout(p,0),g=!0)}function p(){for(var t,e=0;e<v&&(t=y.shift());)t.root&&(e=d(e,t));return t?void setTimeout(p,0):void(g=!1)}var v=1e4,g=!1,y=[];return{succeed:t,fail:n,nativeBinding:r,andThen:e(o),onError:e(i),receive:a,spawn:u,kill:h,sleep:f,send:e(l),rawSpawn:s,rawSend:c}}(),$e=Ye.batch,tn=$e({ctor:"[]"}),en=en||{};en["!"]=e(function(t,e){return{ctor:"_Tuple2",_0:t,_1:$e(e)}});var nn=Ye.map,rn=Ye.batch,on=rn({ctor:"[]"}),an=Ye.map,sn=(Qe.succeed,Ye.sendToSelf),un=Ye.sendToApp,cn=(Ye.programWithFlags,Ye.program,Oe),ln=(Ae(g),Ue(e(function(t,e){return e(t)}))),hn=function(t){return ln(Oe(t))},fn=n(function(t,e,n){var r=function(t){return je({ctor:"::",_0:t,_1:{ctor:"::",_0:Ce(n),_1:{ctor:"[]"}}})},o=function(o){var i=c(Me,t,o);if("Ok"===i.ctor){var a=c(Me,r(e),i._0);return"Ok"===a.ctor?Oe(a._0):Be(a._0)}return Oe(n)};return c(Ae,o,De)}),dn=(r(function(t,e,n,r){return c(ln,l(fn,c(Fe,t,De),e,n),r)}),r(function(t,e,n,r){return c(ln,l(fn,c(Ze,t,De),e,n),r)}),n(function(t,e,n){return c(ln,c(Fe,t,e),n)}),n(function(t,e,n){return c(ln,c(Ze,t,e),n)})),_n=(e(function(t,e){var n=e;return{ctor:"_Tuple2",_0:n._0,_1:c(nn,t,n._1)}}),e(function(t,e){var n=e;return{ctor:"_Tuple2",_0:n._0,_1:$e({ctor:"::",_0:n._1,_1:{ctor:"::",_0:t,_1:{ctor:"[]"}}})}}),e(function(t,e){var n=e;return{ctor:"_Tuple2",_0:t(n._0),_1:n._1}}),e(function(t,e){return t?e:g}),n(function(t,e,n){var r=n,o=c(t,e,r._0),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:i,_1:$e({ctor:"::",_0:r._1,_1:{ctor:"::",_0:a,_1:{ctor:"[]"}}})}})),pn=n(function(t,e,n){var r=_n(t);return l(J,r,n,e)}),mn=Qe.onError,vn=Qe.andThen,gn=e(function(t,e){var n=e;return Qe.spawn(c(vn,un(t),n._0))}),yn=Qe.fail,bn=(e(function(t,e){return c(mn,function(e){return yn(t(e))},e)}),Qe.succeed),wn=e(function(t,e){return c(vn,function(e){return bn(t(e))},e)}),Tn=n(function(t,e,n){return c(vn,function(e){return c(vn,function(n){return bn(c(t,e,n))},n)},e)}),xn=(r(function(t,e,n,r){return c(vn,function(e){return c(vn,function(n){return c(vn,function(r){return bn(l(t,e,n,r))},r)},n)},e)}),o(function(t,e,n,r,o){return c(vn,function(e){return c(vn,function(n){return c(vn,function(r){return c(vn,function(o){return bn(h(t,e,n,r,o))},o)},r)},n)},e)}),i(function(t,e,n,r,o,i){return c(vn,function(e){return c(vn,function(n){return c(vn,function(r){return c(vn,function(o){return c(vn,function(i){return bn(f(t,e,n,r,o,i))},i)},o)},r)},n)},e)}),function(t){var n=t;return"[]"===n.ctor?bn({ctor:"[]"}):l(Tn,e(function(t,e){return{ctor:"::",_0:t,_1:e}}),n._0,xn(n._1))}),En=n(function(t,e,n){return c(wn,function(t){return{ctor:"_Tuple0"}},xn(c(Q,gn(t),e)))}),kn=bn({ctor:"_Tuple0"}),Ln=n(function(t,e,n){return bn({ctor:"_Tuple0"})}),Pn=Ye.leaf("Task"),Sn=function(t){return{ctor:"Perform",_0:t}},Cn=(e(function(t,e){return Pn(Sn(c(wn,t,e)))}),e(function(t,e){return Pn(Sn(c(mn,function(e){return bn(t(bt(e)))},c(vn,function(e){return bn(t(wt(e)))},e))))})),Dn=e(function(t,e){var n=e;return Sn(c(wn,t,n._0))});Ye.effectManagers.Task={pkg:"elm-lang/core",init:kn,onEffects:En,onSelfMsg:Ln,tag:"cmd",cmdMap:Dn};var An=function(){function t(t,e){return Qe.nativeBinding(function(n){var r=setInterval(function(){Qe.rawSpawn(e)},t);return function(){clearInterval(r)}})}var n=Qe.nativeBinding(function(t){t(Qe.succeed(Date.now()))});return{now:n,setInterval_:e(t)}}(),Bn=An.setInterval_,On=n(function(t,e,n){var r=e;if("[]"===r.ctor)return bn(n);var o=r._0,i=function(e){return l(On,t,r._1,l(ve,o,e,n))},a=Qe.spawn(c(Bn,o,c(sn,t,o)));return c(vn,i,a)}),Mn=e(function(t,e){var n=t,r=n._1,o=n._0,i=c(jt,o,e);return"Nothing"===i.ctor?l(ve,o,{ctor:"::",_0:r,_1:{ctor:"[]"}},e):l(ve,o,{ctor:"::",_0:r,_1:i._0},e)}),Nn=An.now,In=n(function(t,e,n){var r=c(jt,e,n.taggers);if("Nothing"===r.ctor)return bn(n);var o=function(e){return xn(c(Q,function(n){return c(un,t,n(e))},r._0))};return c(vn,function(t){return bn(n)},c(vn,o,Nn))}),Rn=Ye.leaf("Time"),Un=e(function(t,e){return{taggers:t,processes:e}}),qn=bn(c(Un,$t,$t)),jn=n(function(t,e,o){var i=o,a=n(function(t,e,n){var r=n;return{ctor:"_Tuple3",_0:r._0,_1:r._1,_2:c(vn,function(t){return r._2},Qe.kill(e))}}),s=r(function(t,e,n,r){var o=r;return{ctor:"_Tuple3",_0:o._0,_1:l(ve,t,n,o._1),_2:o._2}}),u=n(function(t,e,n){var r=n;return{ctor:"_Tuple3",_0:{ctor:"::",_0:t,_1:r._0},_1:r._1,_2:r._2}}),h=l(J,Mn,$t,e),f=d(It,u,s,a,h,i.processes,{ctor:"_Tuple3",_0:{ctor:"[]"},_1:$t,_2:bn({ctor:"_Tuple0"})}),_=f._0,p=f._1,m=f._2;return c(vn,function(t){return bn(c(Un,h,t))},c(vn,function(e){return l(On,t,_,p)},m))}),zn=e(function(t,e){return{ctor:"Every",_0:t,_1:e}}),Zn=(e(function(t,e){return Rn(c(zn,t,e))}),e(function(t,e){var n=e;return c(zn,n._0,function(e){return t(n._1(e))})}));Ye.effectManagers.Time={pkg:"elm-lang/core",init:qn,onEffects:jn,onSelfMsg:In,tag:"sub",subMap:Zn};var Fn=function(){function t(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(t){return new RegExp(t.source,"gi")}function i(t){return new RegExp(t,"g")}function a(t,e){return null!==e.match(t)}function s(t,e,n){t="All"===t.ctor?1/0:t._0;for(var r,o=[],i=0,a=n,s=e.lastIndex,u=-1;i++<t&&(r=e.exec(a))&&u!==e.lastIndex;){for(var c=r.length-1,l=new Array(c);c>0;){var h=r[c];l[--c]=void 0===h?N:R(h)}o.push({match:r[0],submatches:j.fromArray(l),index:r.index,number:i}),u=e.lastIndex}return e.lastIndex=s,j.fromArray(o)}function u(t,e,n,r){function o(e){if(i++>=t)return e;for(var r=arguments.length-3,o=new Array(r);r>0;){var a=arguments[r];o[--r]=void 0===a?N:R(a)}return n({match:e,submatches:j.fromArray(o),index:arguments[arguments.length-2],number:i})}t="All"===t.ctor?1/0:t._0;var i=0;return r.replace(e,o)}function c(t,e,n){if(t="All"===t.ctor?1/0:t._0,t===1/0)return j.fromArray(n.split(e));for(var r,o=n,i=[],a=e.lastIndex,s=e.lastIndex;t--&&(r=e.exec(o));)i.push(o.slice(a,r.index)),a=e.lastIndex;return i.push(o.slice(a)),e.lastIndex=s,j.fromArray(i)}return{regex:i,caseInsensitive:o,escape:t,contains:e(a),find:n(s),replace:r(u),split:n(c)}}(),Wn=Qe.kill,Hn=(Qe.sleep,Qe.spawn),Jn=(Fn.split,Fn.replace),Gn=Fn.find,Vn=Fn.contains,Kn=(Fn.caseInsensitive,Fn.regex),Xn=(Fn.escape,r(function(t,e,n,r){return{match:t,submatches:e,index:n,number:r}}),function(t){return{ctor:"AtMost",_0:t}}),Yn={ctor:"All"},Qn=function(){function t(t){return function(e,n,r){return Qe.nativeBinding(function(o){function i(t){var e=c(Me,n,t);"Ok"===e.ctor&&Qe.rawSpawn(r(e._0))}return t.addEventListener(e,i),function(){t.removeEventListener(e,i)}})}}function r(t,e){return Qe.nativeBinding(function(n){y(function(){var r=document.getElementById(t);return null===r?void n(Qe.fail({ctor:"NotFound",_0:t})):void n(Qe.succeed(e(r)))})})}function o(t){return r(t,function(t){return t.focus(),m.Tuple0})}function i(t){return r(t,function(t){return t.blur(),m.Tuple0})}function a(t){return r(t,function(t){return t.scrollTop})}function s(t,e){return r(t,function(t){return t.scrollTop=e,m.Tuple0})}function u(t){return r(t,function(t){return t.scrollTop=t.scrollHeight,m.Tuple0})}function l(t){return r(t,function(t){return t.scrollLeft})}function h(t,e){return r(t,function(t){return t.scrollLeft=e,m.Tuple0})}function f(t){return r(t,function(t){return t.scrollLeft=t.scrollWidth,m.Tuple0})}function d(t,e){return r(e,function(e){switch(t.ctor){case"Content":return e.scrollWidth;case"VisibleContent":return e.clientWidth;case"VisibleContentWithBorders":return e.offsetWidth;case"VisibleContentWithBordersAndMargins":var n=e.getBoundingClientRect();return n.right-n.left}})}function _(t,e){return r(e,function(e){switch(t.ctor){case"Content":return e.scrollHeight;case"VisibleContent":return e.clientHeight;case"VisibleContentWithBorders":return e.offsetHeight;case"VisibleContentWithBordersAndMargins":var n=e.getBoundingClientRect();return n.bottom-n.top}})}var p={addEventListener:function(){},removeEventListener:function(){}},v=t("undefined"!=typeof document?document:p),g=t("undefined"!=typeof window?window:p),y="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){t()};return{onDocument:n(v),onWindow:n(g),focus:o,blur:i,getScrollTop:a,setScrollTop:e(s),getScrollLeft:l,setScrollLeft:e(h),toBottom:u,toRight:f,height:e(_),width:e(d)}}(),$n=Qn.onWindow,tr=(Qn.onDocument,function(){function t(t){var e=t.coords,n=e.altitude,r=e.altitudeAccuracy,o=null===n||null===r?N:R({value:n,accuracy:r}),i=e.heading,a=e.speed,s=null===i||null===a?N:R(0===a?{ctor:"Static"}:{ctor:"Moving",
_0:{speed:a,degreesFromNorth:i}});return{latitude:e.latitude,longitude:e.longitude,accuracy:e.accuracy,altitude:o,movement:s,timestamp:t.timestamp}}function e(t){return{ctor:a[t.code-1],_0:t.message}}function r(t){return{enableHighAccuracy:t.enableHighAccuracy,timeout:t.timeout._0||1/0,maximumAge:t.maximumAge._0||0}}function o(n){return Qe.nativeBinding(function(o){function i(e){o(Qe.succeed(t(e)))}function a(t){o(Qe.fail(e(t)))}navigator.geolocation.getCurrentPosition(i,a,r(n))})}function i(n,o,i){return Qe.nativeBinding(function(a){function s(e){var n=t(e),r=o(n);Qe.rawSpawn(r)}function u(t){var n=e(t),r=i(n);Qe.rawSpawn(r)}var c=navigator.geolocation.watchPosition(s,u,r(n));return function(){navigator.geolocation.clearWatch(c)}})}var a=["PermissionDenied","PositionUnavailable","Timeout"];return{now:o,watch:n(i)}}()),er=n(function(t,e,n){var r=n;if("Nothing"===r.ctor)return bn(N);var o=function(n){var r=n;return c(un,t,r._0(e))};return c(vn,function(t){return bn(n)},xn(c(Q,o,r._0.subs)))}),nr=bn(N),rr={enableHighAccuracy:!1,timeout:N,maximumAge:N},or=tr.watch,ir=or(rr),ar=n(function(t,e,n){var r=n;if("Nothing"===r.ctor){var o=e;return"[]"===o.ctor?bn(n):c(vn,function(t){return bn(R({subs:e,watcher:t}))},Hn(c(ir,sn(t),function(t){return bn({ctor:"_Tuple0"})})))}var i=r._0.watcher,a=e;return"[]"===a.ctor?c(vn,function(t){return bn(N)},Wn(i)):bn(R({subs:e,watcher:i}))}),sr=tr.now,ur=sr(rr),cr=(Ye.leaf("Geolocation"),i(function(t,e,n,r,o,i){return{latitude:t,longitude:e,accuracy:n,altitude:r,movement:o,timestamp:i}}),e(function(t,e){return{value:t,accuracy:e}}),n(function(t,e,n){return{enableHighAccuracy:t,timeout:e,maximumAge:n}}),function(t){return{ctor:"Tagger",_0:t}}),lr=e(function(t,e){var n=e;return cr(function(e){return t(n._0(e))})});Ye.effectManagers.Geolocation={pkg:"elm-lang/geolocation",init:nr,onEffects:ar,onSelfMsg:er,tag:"sub",subMap:lr};var hr,fr,dr=function(){function t(t){return{type:"text",text:t}}function o(t){return e(function(e,n){return i(t,e,n)})}function i(t,e,n){for(var r=p(e),o=r.namespace,i=r.facts,a=[],s=0;"[]"!==n.ctor;){var u=n._0;s+=u.descendantsCount||0,a.push(u),n=n._1}return s+=a.length,{type:"node",tag:t,facts:i,children:a,namespace:o,descendantsCount:s}}function a(t,e,n){for(var r=p(e),o=r.namespace,i=r.facts,a=[],s=0;"[]"!==n.ctor;){var u=n._0;s+=u._1.descendantsCount||0,a.push(u),n=n._1}return s+=a.length,{type:"keyed-node",tag:t,facts:i,children:a,namespace:o,descendantsCount:s}}function s(t,e,n){var r=p(t).facts;return{type:"custom",facts:r,model:e,impl:n}}function u(t,e){return{type:"tagger",tagger:t,node:e,descendantsCount:1+(e.descendantsCount||0)}}function h(t,e,n){return{type:"thunk",func:t,args:e,thunk:n,node:void 0}}function f(t,e){return h(t,[e],function(){return t(e)})}function d(t,e,n){return h(t,[e,n],function(){return c(t,e,n)})}function _(t,e,n,r){return h(t,[e,n,r],function(){return l(t,e,n,r)})}function p(t){for(var e,n={};"[]"!==t.ctor;){var r=t._0,o=r.key;if(o===dt||o===_t||o===ft){var i=n[o]||{};i[r.realKey]=r.value,n[o]=i}else if(o===ht){for(var a=n[o]||{},s=r.value;"[]"!==s.ctor;){var u=s._0;a[u._0]=u._1,s=s._1}n[o]=a}else if("namespace"===o)e=r.value;else if("className"===o){var c=n[o];n[o]="undefined"==typeof c?r.value:c+" "+r.value}else n[o]=r.value;t=t._1}return{facts:n,namespace:e}}function v(t){return{key:ht,value:t}}function g(t,e){return{key:t,value:e}}function y(t,e){return{key:dt,realKey:t,value:e}}function b(t,e,n){return{key:_t,realKey:e,value:{value:n,namespace:t}}}function w(t,e,n){return{key:ft,realKey:t,value:{options:e,decoder:n}}}function T(t,e){return(t.options===e.options||t.options.stopPropagation===e.options.stopPropagation&&t.options.preventDefault===e.options.preventDefault)&&Te.equality(t.decoder,e.decoder)}function x(t,e){return e.key!==ft?e:w(e.realKey,e.value.options,c(qe,t,e.value.decoder))}function E(t,e){switch(t.type){case"thunk":return t.node||(t.node=t.thunk()),E(t.node,e);case"tagger":for(var n=t.node,r=t.tagger;"tagger"===n.type;)"object"!=typeof r?r=[r,n.tagger]:r.push(n.tagger),n=n.node;var o={tagger:r,parent:e},i=E(n,o);return i.elm_event_node_ref=o,i;case"text":return pt.createTextNode(t.text);case"node":var i=t.namespace?pt.createElementNS(t.namespace,t.tag):pt.createElement(t.tag);k(i,e,t.facts);for(var a=t.children,s=0;s<a.length;s++)i.appendChild(E(a[s],e));return i;case"keyed-node":var i=t.namespace?pt.createElementNS(t.namespace,t.tag):pt.createElement(t.tag);k(i,e,t.facts);for(var a=t.children,s=0;s<a.length;s++)i.appendChild(E(a[s]._1,e));return i;case"custom":var i=t.impl.render(t.model);return k(i,e,t.facts),i}}function k(t,e,n){for(var r in n){var o=n[r];switch(r){case ht:L(t,o);break;case ft:P(t,e,o);break;case dt:C(t,o);break;case _t:D(t,o);break;case"value":t[r]!==o&&(t[r]=o);break;default:t[r]=o}}}function L(t,e){var n=t.style;for(var r in e)n[r]=e[r]}function P(t,e,n){var r=t.elm_handlers||{};for(var o in n){var i=r[o],a=n[o];if("undefined"==typeof a)t.removeEventListener(o,i),r[o]=void 0;else if("undefined"==typeof i){var i=S(e,a);t.addEventListener(o,i),r[o]=i}else i.info=a}t.elm_handlers=r}function S(t,e){function n(e){var r=n.info,o=c(Te.run,r.decoder,e);if("Ok"===o.ctor){var i=r.options;i.stopPropagation&&e.stopPropagation(),i.preventDefault&&e.preventDefault();for(var a=o._0,s=t;s;){var u=s.tagger;if("function"==typeof u)a=u(a);else for(var l=u.length;l--;)a=u[l](a);s=s.parent}}}return n.info=e,n}function C(t,e){for(var n in e){var r=e[n];"undefined"==typeof r?t.removeAttribute(n):t.setAttribute(n,r)}}function D(t,e){for(var n in e){var r=e[n],o=r.namespace,i=r.value;"undefined"==typeof i?t.removeAttributeNS(o,n):t.setAttributeNS(o,n,i)}}function A(t,e){var n=[];return O(t,e,n,0),n}function B(t,e,n){return{index:e,type:t,data:n,domNode:void 0,eventNode:void 0}}function O(t,e,n,r){if(t!==e){var o=t.type,i=e.type;if(o!==i)return void n.push(B("p-redraw",r,e));switch(i){case"thunk":for(var a=t.args,s=e.args,u=a.length,c=t.func===e.func&&u===s.length;c&&u--;)c=a[u]===s[u];if(c)return void(e.node=t.node);e.node=e.thunk();var l=[];return O(t.node,e.node,l,0),void(l.length>0&&n.push(B("p-thunk",r,l)));case"tagger":for(var h=t.tagger,f=e.tagger,d=!1,_=t.node;"tagger"===_.type;)d=!0,"object"!=typeof h?h=[h,_.tagger]:h.push(_.tagger),_=_.node;for(var p=e.node;"tagger"===p.type;)d=!0,"object"!=typeof f?f=[f,p.tagger]:f.push(p.tagger),p=p.node;return d&&h.length!==f.length?void n.push(B("p-redraw",r,e)):((d?M(h,f):h===f)||n.push(B("p-tagger",r,f)),void O(_,p,n,r+1));case"text":if(t.text!==e.text)return void n.push(B("p-text",r,e.text));return;case"node":if(t.tag!==e.tag||t.namespace!==e.namespace)return void n.push(B("p-redraw",r,e));var m=N(t.facts,e.facts);return"undefined"!=typeof m&&n.push(B("p-facts",r,m)),void I(t,e,n,r);case"keyed-node":if(t.tag!==e.tag||t.namespace!==e.namespace)return void n.push(B("p-redraw",r,e));var m=N(t.facts,e.facts);return"undefined"!=typeof m&&n.push(B("p-facts",r,m)),void R(t,e,n,r);case"custom":if(t.impl!==e.impl)return void n.push(B("p-redraw",r,e));var m=N(t.facts,e.facts);"undefined"!=typeof m&&n.push(B("p-facts",r,m));var v=e.impl.diff(t,e);if(v)return void n.push(B("p-custom",r,v));return}}}function M(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function N(t,e,n){var r;for(var o in t)if(o!==ht&&o!==ft&&o!==dt&&o!==_t)if(o in e){var i=t[o],a=e[o];i===a&&"value"!==o||n===ft&&T(i,a)||(r=r||{},r[o]=a)}else r=r||{},r[o]="undefined"==typeof n?"string"==typeof t[o]?"":null:n===ht?"":n===ft||n===dt?void 0:{namespace:t[o].namespace,value:void 0};else{var s=N(t[o],e[o]||{},o);s&&(r=r||{},r[o]=s)}for(var u in e)u in t||(r=r||{},r[u]=e[u]);return r}function I(t,e,n,r){var o=t.children,i=e.children,a=o.length,s=i.length;a>s?n.push(B("p-remove-last",r,a-s)):a<s&&n.push(B("p-append",r,i.slice(a)));for(var u=r,c=a<s?a:s,l=0;l<c;l++){u++;var h=o[l];O(h,i[l],n,u),u+=h.descendantsCount||0}}function R(t,e,n,r){for(var o=[],i={},a=[],s=t.children,u=e.children,c=s.length,l=u.length,h=0,f=0,d=r;h<c&&f<l;){var _=s[h],p=u[f],m=_._0,v=p._0,g=_._1,y=p._1;if(m!==v){var b=h+1<c,w=f+1<l;if(b)var T=s[h+1],x=T._0,E=T._1,k=v===x;if(w)var L=u[f+1],P=L._0,S=L._1,C=m===P;if(b&&w&&C&&k)d++,O(g,S,o,d),U(i,o,m,y,f,a),d+=g.descendantsCount||0,d++,q(i,o,m,E,d),d+=E.descendantsCount||0,h+=2,f+=2;else if(w&&C)d++,U(i,o,v,y,f,a),O(g,S,o,d),d+=g.descendantsCount||0,h+=1,f+=2;else if(b&&k)d++,q(i,o,m,g,d),d+=g.descendantsCount||0,d++,O(E,y,o,d),d+=E.descendantsCount||0,h+=2,f+=1;else{if(!b||!w||x!==P)break;d++,q(i,o,m,g,d),U(i,o,v,y,f,a),d+=g.descendantsCount||0,d++,O(E,S,o,d),d+=E.descendantsCount||0,h+=2,f+=2}}else d++,O(g,y,o,d),d+=g.descendantsCount||0,h++,f++}for(;h<c;){d++;var _=s[h],g=_._1;q(i,o,_._0,g,d),d+=g.descendantsCount||0,h++}for(var D;f<l;){D=D||[];var p=u[f];U(i,o,p._0,p._1,void 0,D),f++}(o.length>0||a.length>0||"undefined"!=typeof D)&&n.push(B("p-reorder",r,{patches:o,inserts:a,endInserts:D}))}function U(t,e,n,r,o,i){var a=t[n];if("undefined"==typeof a)return a={tag:"insert",vnode:r,index:o,data:void 0},i.push({index:o,entry:a}),void(t[n]=a);if("remove"===a.tag){i.push({index:o,entry:a}),a.tag="move";var s=[];return O(a.vnode,r,s,a.index),a.index=o,void(a.data.data={patches:s,entry:a})}U(t,e,n+mt,r,o,i)}function q(t,e,n,r,o){var i=t[n];if("undefined"==typeof i){var a=B("p-remove",o,void 0);return e.push(a),void(t[n]={tag:"remove",vnode:r,index:o,data:a})}if("insert"===i.tag){i.tag="move";var s=[];O(r,i.vnode,s,o);var a=B("p-remove",o,{patches:s,entry:i});return void e.push(a)}q(t,e,n+mt,r,o)}function j(t,e,n,r){z(t,e,n,0,0,e.descendantsCount,r)}function z(t,e,n,r,o,i,a){for(var s=n[r],u=s.index;u===o;){var c=s.type;if("p-thunk"===c)j(t,e.node,s.data,a);else if("p-reorder"===c){s.domNode=t,s.eventNode=a;var l=s.data.patches;l.length>0&&z(t,e,l,0,o,i,a)}else if("p-remove"===c){s.domNode=t,s.eventNode=a;var h=s.data;if("undefined"!=typeof h){h.entry.data=t;var l=h.patches;l.length>0&&z(t,e,l,0,o,i,a)}}else s.domNode=t,s.eventNode=a;if(r++,!(s=n[r])||(u=s.index)>i)return r}switch(e.type){case"tagger":for(var f=e.node;"tagger"===f.type;)f=f.node;return z(t,f,n,r,o+1,i,t.elm_event_node_ref);case"node":for(var d=e.children,_=t.childNodes,p=0;p<d.length;p++){o++;var m=d[p],v=o+(m.descendantsCount||0);if(o<=u&&u<=v&&(r=z(_[p],m,n,r,o,v,a),!(s=n[r])||(u=s.index)>i))return r;o=v}return r;case"keyed-node":for(var d=e.children,_=t.childNodes,p=0;p<d.length;p++){o++;var m=d[p]._1,v=o+(m.descendantsCount||0);if(o<=u&&u<=v&&(r=z(_[p],m,n,r,o,v,a),!(s=n[r])||(u=s.index)>i))return r;o=v}return r;case"text":case"thunk":throw new Error("should never traverse `text` or `thunk` nodes like this")}}function Z(t,e,n,r){return 0===n.length?t:(j(t,e,n,r),F(t,n))}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=r.domNode,i=W(o,r);o===t&&(t=i)}return t}function W(t,e){switch(e.type){case"p-redraw":return H(t,e.data,e.eventNode);case"p-facts":return k(t,e.eventNode,e.data),t;case"p-text":return t.replaceData(0,t.length,e.data),t;case"p-thunk":return F(t,e.data);case"p-tagger":return"undefined"!=typeof t.elm_event_node_ref?t.elm_event_node_ref.tagger=e.data:t.elm_event_node_ref={tagger:e.data,parent:e.eventNode},t;case"p-remove-last":for(var n=e.data;n--;)t.removeChild(t.lastChild);return t;case"p-append":for(var r=e.data,n=0;n<r.length;n++)t.appendChild(E(r[n],e.eventNode));return t;case"p-remove":var o=e.data;if("undefined"==typeof o)return t.parentNode.removeChild(t),t;var i=o.entry;return"undefined"!=typeof i.index&&t.parentNode.removeChild(t),i.data=F(t,o.patches),t;case"p-reorder":return J(t,e);case"p-custom":var a=e.data;return a.applyPatch(t,a.data);default:throw new Error("Ran into an unknown patch!")}}function H(t,e,n){var r=t.parentNode,o=E(e,n);return"undefined"==typeof o.elm_event_node_ref&&(o.elm_event_node_ref=t.elm_event_node_ref),r&&o!==t&&r.replaceChild(o,t),o}function J(t,e){var n=e.data,r=G(n.endInserts,e);t=F(t,n.patches);for(var o=n.inserts,i=0;i<o.length;i++){var a=o[i],s=a.entry,u="move"===s.tag?s.data:E(s.vnode,e.eventNode);t.insertBefore(u,t.childNodes[a.index])}return"undefined"!=typeof r&&t.appendChild(r),t}function G(t,e){if("undefined"!=typeof t){for(var n=pt.createDocumentFragment(),r=0;r<t.length;r++){var o=t[r],i=o.entry;n.appendChild("move"===i.tag?i.data:E(i.vnode,e.eventNode))}return n}}function V(t){return e(function(e,n){return function(r){return function(o,i,a){var s=t(r,i);"undefined"==typeof a?$(n,o,i,s):nt(c(e,a,n),o,i,s)}}})}function K(t){var n=m.Tuple2(m.Tuple0,tn);return c(vt,hr,{init:n,view:function(){return t},update:e(function(){return n}),subscriptions:function(){return on}})()}function X(t,e){return function(t,n,r){if("undefined"==typeof n)return t;var o="The `"+e+"` module does not need flags.\nInitialize it with no arguments and you should be all set!";Q(o,r)}}function Y(t,e){return function(n,r,o){if("undefined"==typeof t){var i="Are you trying to sneak a Never value into Elm? Trickster!\nIt looks like "+e+".main is defined with `programWithFlags` but has type `Program Never`.\nUse `program` instead if you do not want flags.";Q(i,o)}var a=c(Te.run,t,r);if("Ok"===a.ctor)return n(a._0);var i="Trying to initialize the `"+e+"` module with an unexpected flag.\nI tried to convert it to an Elm value, but ran into this problem:\n\n"+a._0;Q(i,o)}}function Q(t,e){throw e&&(e.innerHTML='<div style="padding-left:1em;"><h2 style="font-weight:normal;"><b>Oops!</b> Something went wrong when starting your Elm program.</h2><pre style="padding-left:1em;">'+t+"</pre></div>"),new Error(t)}function $(t,e,n,r){e.embed=function(e,n){for(;e.lastChild;)e.removeChild(e.lastChild);return Ye.initialize(r(t.init,n,e),t.update,t.subscriptions,tt(e,t.view))},e.fullscreen=function(e){return Ye.initialize(r(t.init,e,document.body),t.update,t.subscriptions,tt(document.body,t.view))}}function tt(t,e){return function(n,r){var o={tagger:n,parent:void 0},i=e(r),a=E(i,o);return t.appendChild(a),et(a,e,i,o)}}function et(t,e,n,r){function o(){switch(a){case"NO_REQUEST":throw new Error("Unexpected draw callback.\nPlease report this to <https://github.com/elm-lang/virtual-dom/issues>.");case"PENDING_REQUEST":yt(o),a="EXTRA_REQUEST";var n=e(i),u=A(s,n);return t=Z(t,s,u,r),void(s=n);case"EXTRA_REQUEST":return void(a="NO_REQUEST")}}var i,a="NO_REQUEST",s=n;return function(t){"NO_REQUEST"===a&&yt(o),a="PENDING_REQUEST",i=t}}function nt(t,e,n,r){e.fullscreen=function(e){var o={doc:void 0};return Ye.initialize(r(t.init,e,document.body),t.update(rt(o)),t.subscriptions,ot(n,document.body,o,t.view,t.viewIn,t.viewOut))},e.embed=function(e,o){var i={doc:void 0};return Ye.initialize(r(t.init,o,e),t.update(rt(i)),t.subscriptions,ot(n,e,i,t.view,t.viewIn,t.viewOut))}}function rt(t){return Qe.nativeBinding(function(e){var n=t.doc;if(n){var r=n.getElementsByClassName("debugger-sidebar-messages")[0];r&&(r.scrollTop=r.scrollHeight)}e(Qe.succeed(m.Tuple0))})}function ot(t,e,n,r,o,i){return function(a,s){var u={tagger:a,parent:void 0},c={tagger:a,parent:void 0},l=r(s),h=E(l,u);e.appendChild(h);var f=et(h,r,l,u),d=o(s)._1,_=E(d,c);e.appendChild(_);var p=st(u,_,o),m=et(_,p,d,c),v=it(s,i,c,e,t,n);return function(t){f(t),m(t),v(t)}}}function it(t,e,n,r,o,i){var a,s;return function(t){if(t.isDebuggerOpen){if(!i.doc)return a=e(t),void(s=at(o,i,a,n));pt=i.doc;var r=e(t),u=A(a,r);s=Z(s,a,u,n),a=r,pt=document}}}function at(t,e,n,r){function o(){e.doc=void 0,c.close()}var i=900,a=360,s=screen.width-i,u=screen.height-a,c=window.open("","","width="+i+",height="+a+",left="+s+",top="+u);pt=c.document,e.doc=pt,pt.title="Debugger - "+t,pt.body.style.margin="0",pt.body.style.padding="0";var l=E(n,r);return pt.body.appendChild(l),pt.addEventListener("keydown",function(t){t.metaKey&&82===t.which&&window.location.reload(),38===t.which&&(r.tagger({ctor:"Up"}),t.preventDefault()),40===t.which&&(r.tagger({ctor:"Down"}),t.preventDefault())}),window.addEventListener("unload",o),c.addEventListener("unload",function(){e.doc=void 0,window.removeEventListener("unload",o),r.tagger({ctor:"Close"})}),pt=document,l}function st(t,e,n){var r,o=lt(e),i="Normal",a=t.tagger,s=function(){};return function(e){var u=n(e),c=u._0.ctor;return t.tagger="Normal"===c?a:s,i!==c&&(ut("removeEventListener",o,i),ut("addEventListener",o,c),"Normal"===i&&(r=document.body.style.overflow,document.body.style.overflow="hidden"),"Normal"===c&&(document.body.style.overflow=r),i=c),u._1}}function ut(t,e,n){switch(n){case"Normal":return;case"Pause":return ct(t,e,bt);case"Message":return ct(t,e,wt)}}function ct(t,e,n){for(var r=0;r<n.length;r++)document.body[t](n[r],e,!0)}function lt(t){return function(e){if("keydown"!==e.type||!e.metaKey||82!==e.which){for(var n="scroll"===e.type||"wheel"===e.type,r=e.target;null!==r;){if("elm-overlay-message-details"===r.className&&n)return;if(r===t&&!n)return;r=r.parentNode}e.stopPropagation(),e.preventDefault()}}}var ht="STYLE",ft="EVENT",dt="ATTR",_t="ATTR_NS",pt="undefined"!=typeof document?document:{},mt="_elmW6BL",vt=V(X),gt=V(Y),yt="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,1e3/60)},bt=["click","dblclick","mousemove","mouseup","mousedown","mouseenter","mouseleave","touchstart","touchend","touchcancel","touchmove","pointerdown","pointerup","pointerover","pointerout","pointerenter","pointerleave","pointermove","pointercancel","dragstart","drag","dragend","dragenter","dragover","dragleave","drop","keyup","keydown","keypress","input","change","focus","blur"],wt=bt.concat("wheel","scroll");return{node:o,text:t,custom:s,map:e(u),on:n(w),style:v,property:e(g),attribute:e(y),attributeNS:n(b),mapProperty:e(x),lazy:e(f),lazy2:n(d),lazy3:r(_),keyedNode:n(a),program:vt,programWithFlags:gt,staticProgram:K}}(),_r=function(t){return c(dr.programWithFlags,fr,t)},pr=function(t){return c(dr.program,hr,t)},mr=(dr.keyedNode,dr.lazy3,dr.lazy2,dr.lazy,{stopPropagation:!1,preventDefault:!1}),vr=dr.on,gr=e(function(t,e){return l(vr,t,mr,e)}),yr=(dr.style,dr.mapProperty,dr.attributeNS,dr.attribute,dr.property),br=dr.map,wr=dr.text,Tr=dr.node,xr=(e(function(t,e){return{stopPropagation:t,preventDefault:e}}),_r),Er=pr,kr=br,Lr=wr,Pr=Tr,Sr=(Pr("body"),Pr("section"),Pr("nav")),Cr=(Pr("article"),Pr("aside"),Pr("h1")),Dr=Pr("h2"),Ar=(Pr("h3"),Pr("h4"),Pr("h5"),Pr("h6"),Pr("header"),Pr("footer"),Pr("address"),Pr("main"),Pr("p")),Br=(Pr("hr"),Pr("pre"),Pr("blockquote"),Pr("ol"),Pr("ul"),Pr("li"),Pr("dl"),Pr("dt"),Pr("dd"),Pr("figure"),Pr("figcaption"),Pr("div")),Or=Pr("a"),Mr=(Pr("em"),Pr("strong")),Nr=(Pr("small"),Pr("s"),Pr("cite"),Pr("q"),Pr("dfn"),Pr("abbr"),Pr("time"),Pr("code"),Pr("var"),Pr("samp"),Pr("kbd"),Pr("sub"),Pr("sup"),Pr("i"),Pr("b"),Pr("u"),Pr("mark"),Pr("ruby"),Pr("rt"),Pr("rp"),Pr("bdi"),Pr("bdo"),Pr("span")),Ir=Pr("br"),Rr=(Pr("wbr"),Pr("ins"),Pr("del"),Pr("img"),Pr("iframe"),Pr("embed"),Pr("object"),Pr("param"),Pr("video"),Pr("audio"),Pr("source"),Pr("track"),Pr("canvas"),Pr("math"),Pr("table"),Pr("caption"),Pr("colgroup"),Pr("col"),Pr("tbody"),Pr("thead"),Pr("tfoot"),Pr("tr"),Pr("td"),Pr("th"),Pr("form"),Pr("fieldset"),Pr("legend"),Pr("label"),Pr("input"),Pr("button")),Ur=(Pr("select"),Pr("datalist"),Pr("optgroup"),Pr("option"),Pr("textarea"),Pr("keygen"),Pr("output"),Pr("progress"),Pr("meter"),Pr("details"),Pr("summary"),Pr("menuitem"),Pr("menu"),yr),qr=e(function(t,e){return c(Ur,t,Se(e))}),jr=function(t){return c(qr,"className",t)},zr=function(t){return c(qr,"id",t)},Zr=function(t){return c(qr,"href",t)},Fr=(e(function(t,e){return c(Ur,t,Le(e))}),c(Ze,"keyCode",Ge),c(Fe,{ctor:"::",_0:"target",_1:{ctor:"::",_0:"checked",_1:{ctor:"[]"}}},Ve),c(Fe,{ctor:"::",_0:"target",_1:{ctor:"::",_0:"value",_1:{ctor:"[]"}}},Ke),mr),Wr=gr,Hr=(m.update(Fr,{preventDefault:!0}),function(t){return c(Wr,"click",Oe(t))}),Jr=(e(function(t,e){return{stopPropagation:t,preventDefault:e}}),function(){function t(t){return encodeURIComponent(t)}function n(t){try{return R(decodeURIComponent(t))}catch(t){return N}}function r(t,e){return Qe.nativeBinding(function(n){var r=new XMLHttpRequest;o(r,e),r.addEventListener("error",function(){n(Qe.fail({ctor:"NetworkError"}))}),r.addEventListener("timeout",function(){n(Qe.fail({ctor:"Timeout"}))}),r.addEventListener("load",function(){n(s(r,t.expect.responseToResult))});try{r.open(t.method,t.url,!0)}catch(e){return n(Qe.fail({ctor:"BadUrl",_0:t.url}))}return i(r,t),a(r,t.body),function(){r.abort()}})}function o(t,e){"Nothing"!==e.ctor&&t.addEventListener("progress",function(t){t.lengthComputable&&Qe.rawSpawn(e._0({bytes:t.loaded,bytesExpected:t.total}))})}function i(t,e){function n(e){t.setRequestHeader(e._0,e._1)}c(Q,n,e.headers),t.responseType=e.expect.responseType,t.withCredentials=e.withCredentials,"Just"===e.timeout.ctor&&(t.timeout=e.timeout._0)}function a(t,e){switch(e.ctor){case"EmptyBody":return void t.send();case"StringBody":return t.setRequestHeader("Content-Type",e._0),void t.send(e._1);case"FormDataBody":return void t.send(e._0)}}function s(t,e){var n=u(t);if(t.status<200||300<=t.status)return n.body=t.responseText,Qe.fail({ctor:"BadStatus",_0:n});var r=e(n);return"Ok"===r.ctor?Qe.succeed(r._0):(n.body=t.responseText,Qe.fail({ctor:"BadPayload",_0:r._0,_1:n}))}function u(t){return{status:{code:t.status,message:t.statusText},headers:h(t.getAllResponseHeaders()),url:t.responseURL,body:t.response}}function h(t){var e=$t;if(!t)return e;for(var n=t.split("\r\n"),r=n.length;r--;){var o=n[r],i=o.indexOf(": ");if(i>0){var a=o.substring(0,i),s=o.substring(i+2);e=l(me,a,function(t){return R("Just"===t.ctor?s+", "+t._0:s)},e)}}return e}function f(t){return{responseType:"text",responseToResult:t}}function d(t,e){return{responseType:e.responseType,responseToResult:function(n){var r=e.responseToResult(n);return c(Tt,t,r)}}}function _(t){for(var e=new FormData;"[]"!==t.ctor;){var n=t._0;e.append(n._0,n._1),t=t._1}return{ctor:"FormDataBody",_0:e}}return{toTask:e(r),expectStringResponse:f,mapExpect:e(d),multipart:_,encodeUri:t,decodeUri:n}}()),Gr=(e(function(t,e){return m.update(e,{expect:c(Jr.mapExpect,t,e.expect)})}),a(function(t,e,n,r,o,i,a){return{method:t,headers:e,url:n,body:r,expect:o,timeout:i,withCredentials:a}}),function(t){return{ctor:"Request",_0:t}}),Vr=(e(function(t,e){return{ctor:"StringBody",_0:t,_1:e}}),{ctor:"EmptyBody"}),Kr=(e(function(t,e){return{ctor:"Header",_0:t,_1:e}}),Jr.decodeUri),Xr=Jr.encodeUri,Yr=Jr.expectStringResponse,Qr=function(t){return Yr(function(e){return c(Ne,t,e.body)})},$r=(Yr(function(t){return wt(t.body)}),Jr.multipart,Vr),to=Gr,eo=(n(function(t,e,n){return to({method:"POST",headers:{ctor:"[]"},url:t,body:e,expect:Qr(n),timeout:N,withCredentials:!1})}),e(function(t,e){return to({method:"GET",headers:{ctor:"[]"},url:t,body:$r,expect:Qr(e),timeout:N,withCredentials:!1})})),no=function(t){var e=t;return c(Jr.toTask,e._0,N)},ro=e(function(t,e){return c(Cn,t,no(e))}),oo=(r(function(t,e,n,r){return{url:t,status:e,headers:n,body:r}}),e(function(t,e){return{ctor:"BadPayload",_0:t,_1:e}}),e(function(t,e){return{ctor:"StringPart",_0:t,_1:e}}),function(){function t(t){return Qe.nativeBinding(function(e){0!==t&&history.go(t),e(Qe.succeed(m.Tuple0))})}function e(t){return Qe.nativeBinding(function(e){history.pushState({},"",t),e(Qe.succeed(i()))})}function n(t){return Qe.nativeBinding(function(e){history.replaceState({},"",t),e(Qe.succeed(i()))})}function r(t){return Qe.nativeBinding(function(e){document.location.reload(t),e(Qe.succeed(m.Tuple0))})}function o(t){return Qe.nativeBinding(function(e){try{window.location=t}catch(t){document.location.reload(!1)}e(Qe.succeed(m.Tuple0))})}function i(){var t=document.location;return{href:t.href,host:t.host,hostname:t.hostname,protocol:t.protocol,origin:t.origin,port_:t.port,pathname:t.pathname,search:t.search,hash:t.hash,username:t.username,password:t.password}}function a(){return window.navigator.userAgent.indexOf("Trident")!==-1}return{go:t,setLocation:o,reloadPage:r,pushState:e,replaceState:n,getLocation:i,isInternetExplorer11:a}}()),io=oo.replaceState,ao=oo.pushState,so=oo.go,uo=oo.reloadPage,co=oo.setLocation,lo=lo||{};lo["&>"]=e(function(t,e){return c(vn,function(t){return e},t)});var ho=n(function(t,e,n){var r=function(e){var r=e;return c(un,t,r._0(n))};return c(lo["&>"],xn(c(Q,r,e)),bn({ctor:"_Tuple0"}))}),fo=n(function(t,e,n){var r=n;switch(r.ctor){case"Jump":return so(r._0);case"New":return c(vn,c(ho,t,e),ao(r._0));case"Modify":return c(vn,c(ho,t,e),io(r._0));case"Visit":return co(r._0);default:return uo(r._0)}}),_o=function(t){var e=t;return"Normal"===e.ctor?Wn(e._0):c(lo["&>"],Wn(e._0),Wn(e._1))},po=n(function(t,e,n){return c(lo["&>"],l(ho,t,n.subs,e),bn(n))}),mo=Ye.leaf("Navigation"),vo=Ye.leaf("Navigation"),go=e(function(t,e){return{subs:t,popWatcher:e}}),yo=bn(c(go,{ctor:"[]"},N)),bo=function(t){return{ctor:"Reload",_0:t}},wo=(vo(bo(!1)),vo(bo(!0)),function(t){return{ctor:"Visit",_0:t}}),To=function(t){return{ctor:"Modify",_0:t}},xo=function(t){return vo(To(t))},Eo=function(t){return{ctor:"New",_0:t}},ko=function(t){return vo(Eo(t))},Lo=function(t){return{ctor:"Jump",_0:t}},Po=function(t){return vo(Lo(0-t))},So=e(function(t,e){var n=e;switch(n.ctor){case"Jump":return Lo(n._0);case"New":return Eo(n._0);case"Modify":return To(n._0);case"Visit":return wo(n._0);default:return bo(n._0)}}),Co=function(t){return{ctor:"Monitor",_0:t}},Do=(e(function(t,e){var n=e.init(oo.getLocation({ctor:"_Tuple0"})),r=function(n){return rn({ctor:"::",_0:mo(Co(t)),_1:{ctor:"::",_0:e.subscriptions(n),_1:{ctor:"[]"}}})};return Er({init:n,view:e.view,update:e.update,subscriptions:r})}),e(function(t,e){var n=function(t){return c(e.init,t,oo.getLocation({ctor:"_Tuple0"}))},r=function(n){return rn({ctor:"::",_0:mo(Co(t)),_1:{ctor:"::",_0:e.subscriptions(n),_1:{ctor:"[]"}}})};return xr({init:n,view:e.view,update:e.update,subscriptions:r})})),Ao=e(function(t,e){var n=e;return Co(function(e){return t(n._0(e))})}),Bo=e(function(t,e){return{ctor:"InternetExplorer",_0:t,_1:e}}),Oo=function(t){return{ctor:"Normal",_0:t}},Mo=function(t){var e=function(e){return c(sn,t,oo.getLocation({ctor:"_Tuple0"}))};return oo.isInternetExplorer11({ctor:"_Tuple0"})?l(Tn,Bo,Hn(l($n,"popstate",De,e)),Hn(l($n,"hashchange",De,e))):c(wn,Oo,Hn(l($n,"popstate",De,e)))},No=r(function(t,e,n,r){var o=r,i=o.popWatcher,a=function(){var e={ctor:"_Tuple2",_0:n,_1:i};t:do{if("[]"===e._0.ctor){if("Just"===e._1.ctor)return c(lo["&>"],_o(e._1._0),bn(c(go,n,N)));break t}if("Nothing"===e._1.ctor)return c(wn,function(t){return c(go,n,R(t))},Mo(t));break t}while(!1);return bn(c(go,n,i))}();return c(lo["&>"],xn(c(Q,c(fo,t,n),e)),a)});Ye.effectManagers.Navigation={pkg:"elm-lang/navigation",init:yo,onEffects:No,onSelfMsg:po,tag:"fx",cmdMap:So,subMap:Ao};var Io=(e(function(t,e){var n=c(nt,e.path,t);return m.update(e,{path:n})}),e(function(t,e){var n=c(we,t,e.query);return m.update(e,{query:n})}),n(function(t,e,n){var r=c(ge,t,e);return m.update(n,{query:r})}),n(function(t,e,n){var r=At(e)?c(we,t,n.query):l(ve,t,e,n.query);return m.update(n,{query:r})}),function(t){var e=Mt(t.query),n=c(Q,function(t){var e=t;return{ctor:"_Tuple2",_0:Xr(e._0),_1:Xr(e._1)}},e),r=c(Q,function(t){var e=t;return c(y["++"],e._0,c(y["++"],"=",e._1))},n);return te(t.query)?"":c(y["++"],"?",c(St,"&",r))}),Ro=function(t){var e=c(Ct,"=",t),n=c(M,"",X(e)),r=c(M,"",Kr(n)),o=c(M,"",X(c(Z,1,e))),i=c(M,"",Kr(o));return{ctor:"_Tuple2",_0:r,_1:i}},Uo=function(t){var e=c(Ct,"&",t);return At(t)?{ctor:"[]"}:c(Q,Ro,e)},qo=function(t){return be(Uo(t))},jo=function(t){return c(M,"",X(c(Ct,"#",c(M,"",X(c(Z,1,c(Ct,"?",t)))))))},zo=function(t){return qo(jo(t))},Zo=function(t){return c(M,"",X(c(Z,1,c(Ct,"#",t))))},Fo=function(t){return Zo(t)},Wo=function(t){return c(Ct,".",t)},Ho=function(t){var e=c(Ct,"://",t),n=G(e);return 1===n?"":c(M,"",X(e))},Jo=function(t){var e=Kn(":\\d+"),n=l(Gn,Xn(1),e,t);return function(e){var n=e;if("Ok"===n.ctor)return n._0;var r=Ho(t);switch(r){case"http":return 80;case"https":return 443;case"ftp":return 21;case"sftp":return 22;default:return 0}}(xt(c(Lt,1,c(M,"",X(c(Q,function(t){return t.match},n))))))},Go=(e(function(t,e){var n=c(Ct,t,e),r=X(n),o=G(n);switch(o){case 0:return"";case 1:return"";default:return c(M,"",r)}}),e(function(t,e){var n=c(Ct,t,e);return c(M,"",X(n))})),Vo=e(function(t,e){var n=c(Ct,t,e);return c(M,"",X(et(n)))}),Ko=function(t){var e="localhost",n="((\\w|-)+\\.)+(\\w|-)+",r=c(y["++"],"(",c(y["++"],n,c(y["++"],"|",c(y["++"],e,")"))));return c(M,"",X(c(Q,function(t){return t.match},l(Gn,Xn(1),Kn(r),c(Go,"/",c(Vo,"//",t))))))},Xo=function(t){return Wo(Ko(t))},Yo=function(t){var e=Ko(t);return h(Jn,Xn(1),Kn(":\\d+"),function(t){return""},h(Jn,Xn(1),Kn(e),function(t){return""},c(Go,"#",c(Go,"?",c(Vo,"//",t)))))},Qo=function(t){return c(Vn,Kn("^/"),Yo(t))},$o=function(t){return c(Vn,Kn("/$"),Yo(t))},ti=(e(function(t,e){var n=c(Ct,t,e),r=G(n);switch(r){case 0:return"";case 1:return"";default:return c(M,"",X(et(n)))}}),function(t){return!At(t)}),ei=function(t){return c(Q,M(""),c(Q,Kr,c($,ti,c(Ct,"/",t))))},ni=function(t){return ei(Yo(t))},ri=function(t){return{host:Xo(t),hash:Fo(t),password:"",path:ni(t),hasLeadingSlash:Qo(t),hasTrailingSlash:$o(t),port_:Jo(t),protocol:Ho(t),query:zo(t),username:""}},oi=function(t){return c(y["++"],"/",c(y["++"],c(St,"/",t.path),t.hasTrailingSlash&&!K(t.path)?"/":""))},ii=e(function(t,e){return m.eq(t.path,e.path)&&m.eq(t.hasTrailingSlash,e.hasTrailingSlash)&&m.eq(t.hash,e.hash)&&m.eq(Mt(t.query),Mt(e.query))}),ai=e(function(t,e){return c(ii,ri(e.url),t)?N:R(e)}),si=e(function(t,e){return m.update(e,{url:t(e.url)})}),ui=e(function(t,e){return c(si,c(Et,"?",e.url)?function(e){return c(y["++"],oi(t),e)}:c(Et,"#",e.url)?function(e){return c(y["++"],oi(t),c(y["++"],Io(t),e))}:function(t){return t},e)}),ci=function(t){return function(){var e=t.entry;return"NewEntry"===e.ctor?ko:xo}()(t.url)},li=function(t){return c(Do,t.locationToMessage,{init:t.init,update:t.update,view:t.view,subscriptions:t.subscriptions})},hi=(n(function(t,e,n){var r=n;return"RouterMsg"===r.ctor?t(r._0):e(r._0)}),function(t){return{delta2url:t.delta2url,location2messages:t.location2messages,update:t.update,subscriptions:t.subscriptions,view:t.view}}),fi=(i(function(t,e,n,r,o,i){return{delta2url:t,location2messages:e,init:n,update:r,subscriptions:o,view:i}}),i(function(t,e,n,r,o,i){return{delta2url:t,location2messages:e,init:n,update:r,subscriptions:o,view:i}}),o(function(t,e,n,r,o){return{delta2url:t,location2messages:e,update:n,subscriptions:r,view:o}}),e(function(t,e){return{entry:t,url:e}})),di=(e(function(t,e){return{reportedUrl:t,expectedUrlChanges:e}}),o(function(t,e,n,r,o){return{locationToMessage:t,init:e,update:n,view:r,subscriptions:o}}),o(function(t,e,n,r,o){return{locationToMessage:t,init:e,update:n,view:r,subscriptions:o}}),{ctor:"NewEntry"}),_i=e(function(t,e){return{ctor:"WrappedModel",_0:t,_1:e}}),pi=(e(function(t,e){var n=e;return c(_i,t(n._0),n._1)}),function(t){return{ctor:"UserMsg",_0:t}}),mi=e(function(t,e){var n=e;return c(kr,pi,t.view(n._0))}),vi=e(function(t,e){var n=e;return c(an,pi,t.subscriptions(n._0))}),gi=r(function(t,e,n,r){var o={expectedUrlChanges:0,reportedUrl:ri(r.href)},i=l(pn,e.update,e.location2messages(r),t(n)),a=i._0,s=i._1;return{ctor:"_Tuple2",_0:c(_i,a,o),_1:c(nn,pi,s)}}),yi=(n(function(t,e,n){var r={expectedUrlChanges:0,reportedUrl:ri(n.href)},o=l(pn,e.update,e.location2messages(n),t),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:c(_i,i,r),_1:c(nn,pi,a)}}),n(function(t,e,n){var r=n,o=r._0,i=r._1,a=e;if("RouterMsg"===a.ctor){var s=a._0,u={reportedUrl:ri(s.href),expectedUrlChanges:m.cmp(i.expectedUrlChanges,0)>0?i.expectedUrlChanges-1:0};if(m.cmp(i.expectedUrlChanges,0)>0)return{ctor:"_Tuple2",_0:c(_i,o,u),_1:tn};var h=l(pn,t.update,t.location2messages(s),{ctor:"_Tuple2",_0:o,_1:tn}),f=h._0,d=h._1;return{ctor:"_Tuple2",_0:c(_i,f,u),_1:c(nn,pi,d)}}var _=c(t.update,a._0,o),f=_._0,p=_._1,v=c(I,ai(i.reportedUrl),c(U,ui(i.reportedUrl),c(t.delta2url,o,f))),g=v;if("Just"===g.ctor){var y=g._0;return{ctor:"_Tuple2",_0:c(_i,f,{reportedUrl:ri(y.url),expectedUrlChanges:i.expectedUrlChanges+1}),_1:c(nn,pi,$e({ctor:"::",_0:ci(y),
_1:{ctor:"::",_0:p,_1:{ctor:"[]"}}}))}}return{ctor:"_Tuple2",_0:c(_i,f,i),_1:c(nn,pi,p)}})),bi=function(t){return{ctor:"RouterMsg",_0:t}},wi=function(t){var e=hi(t);return{locationToMessage:bi,init:c(gi,t.init,e),update:yi(e),view:mi(e),subscriptions:vi(e)}},Ti=function(t){return li(wi(t))},xi=e(function(t,e){var r=e,o=r._0,i=t?"$":"#",a=m.eq(o.hash,"")?"":c(y["++"],i,Xr(o.hash)),s=n(function(t,e,n){return{ctor:"::",_0:c(y["++"],Xr(t),c(y["++"],"=",Xr(e))),_1:n}}),u=c(St,"/",c(Q,Xr,o.path)),h=t?"^":"?",f=te(o.query)?"":c(y["++"],h,c(St,"&",l(Nt,s,{ctor:"[]"},o.query))),d=t?"#!/":"/";return{entry:o.entry,url:c(y["++"],d,c(y["++"],u,c(y["++"],f,a)))}}),Ei=(xi(!1),xi(!0),e(function(t,e){var n=e;return c(jt,t,n._0.query)}),function(t){var e=t;return e._0.query}),ki=function(t){var e=t;return e._0.path},Li=function(t){return{ctor:"Builder",_0:t}},Pi=(Li({entry:di,path:{ctor:"[]"},query:$t,hash:""}),e(function(t,e){var n=e,r=n._0;return Li(m.update(r,{path:t(r.path)}))}),e(function(t,e){var n=e;return Li(m.update(n._0,{path:t}))}),e(function(t,e){var n=e,r=n._0;return Li(m.update(r,{query:t(r.query)}))})),Si=(e(function(t,e){return Pi(c(ve,t,e))}),e(function(t,e){return Pi(c(me,t,e))}),e(function(t,e){var n=e;return Li(m.update(n._0,{query:t}))}),e(function(t,e){var n=e,r=n._0;return Li(m.update(r,{hash:t(r.hash)}))}),e(function(t,e){var n=e;return Li(m.update(n._0,{hash:t}))}),function(t){var e=ri(h(Jn,Xn(1),Kn("\\^"),v("?"),h(Jn,Xn(1),Kn("$"),v("#"),h(Jn,Xn(1),Kn("^!"),v(""),function(t){return t.hash}(ri(t))))));return Li({entry:di,path:e.path,query:e.query,hash:e.hash})}),Ci=function(t){var e=dt({ctor:"::",_0:"N",_1:{ctor:"::",_0:"NE",_1:{ctor:"::",_0:"E",_1:{ctor:"::",_0:"SE",_1:{ctor:"::",_0:"S",_1:{ctor:"::",_0:"SW",_1:{ctor:"::",_0:"W",_1:{ctor:"::",_0:"NW",_1:{ctor:"[]"}}}}}}}}}),n=c(y["%"],x(8*t/360),8),r=c(ht,n,e);return"Just"===r.ctor?r._0:""},Di=function(t){return m.cmp(t,1e3)>0?c(y["++"],b(x(t/1e3))," km"):c(y["++"],b(x(t))," m")},Ai=e(function(t,e){return t-e*w(T(t/e))}),Bi=e(function(t,e){return{latitude:t,longitude:e}}),Oi=function(t){return c(Bi,D(t.latitude),D(t.longitude))},Mi=e(function(t,e){var n=6371e3,r=Oi(t),o=Oi(e),i=r.latitude-o.latitude,a=r.longitude-o.longitude,s=S(i/2)*S(i/2)+C(o.latitude)*C(r.latitude)*S(a/2)*S(a/2),u=2*c(P,L(s),L(1-s));return n*u}),Ni=e(function(t,e){return Di(c(Mi,t,e))}),Ii=e(function(t,e){var n=Oi(t),r=Oi(e),o=r.longitude-n.longitude,i=S(o)*C(r.latitude),a=C(n.latitude)*S(r.latitude)-S(n.latitude)*C(r.latitude)*C(o),s=c(P,i,a)/k*180;return c(Ai,s,360)}),Ri=e(function(t,e){return Ci(c(Ii,t,e))}),Ui=e(function(t,e){return c(y["++"],c(Ni,t,e),c(y["++"]," ",c(Ri,t,e)))}),qi=u(function(t,e,n,r,o,i,a,s,u){return{id:t,shortName:e,longName:n,description:r,location:o,facilities:i,access:a,parkId:s,revision:u}}),ji=o(function(t,e,n,r,o){return{toilets:t,picnicTables:e,barbecues:n,showers:r,drinkingWater:o}}),zi=n(function(t,e,n){return{caravans:t,trailers:e,cars:n}}),Zi={ctor:"NoCaravans"},Fi={ctor:"Caravans"},Wi={ctor:"NoTrailers"},Hi={ctor:"Trailers"},Ji={ctor:"NoCars"},Gi={ctor:"Cars"},Vi={ctor:"NoToilets"},Ki={ctor:"FlushToilets"},Xi={ctor:"NonFlushToilets"},Yi={ctor:"NoPicnicTables"},Qi={ctor:"PicnicTables"},$i={ctor:"NoBarbecues"},ta={ctor:"GasElectricBarbecues"},ea={ctor:"WoodBringYourOwnBarbecues"},na={ctor:"WoodSuppliedBarbecues"},ra={ctor:"WoodBarbecues"},oa={ctor:"NoShowers"},ia={ctor:"ColdShowers"},aa={ctor:"HotShowers"},sa={ctor:"NoDrinkingWater"},ua={ctor:"DrinkingWater"},ca={text:N,campsites:$t},la=(e(function(t,e){return{text:t,campsites:e}}),i(function(t,e,n,r,o,i){return{id:t,shortName:e,longName:n,description:r,campsiteIds:o,revision:i}})),ha=e(function(t,e){return{id:t,location:e}}),fa={ctor:"Map"},da={ctor:"List"},_a={ctor:"UnknownPage"},pa={ctor:"AdminPage"},ma={ctor:"AboutPage"},va=function(t){return{ctor:"ParkPage",_0:t}},ga=function(t){return{ctor:"CampsitePage",_0:t}},ya=function(t){return{ctor:"CampsitesPage",_0:t}},ba=Ye.outgoingPort("put",function(t){return t}),wa=Ye.outgoingPort("destroy",function(t){return null}),Ta=Ye.incomingPort("destroySuccess",c(Ae,function(t){return Oe({ok:t})},c(Ze,"ok",Ve))),xa=Ye.incomingPort("destroyError",Oe({})),Ea=Ye.incomingPort("putSuccess",c(Ae,function(t){return c(Ae,function(e){return c(Ae,function(n){return Oe({ok:t,id:e,rev:n})},c(Ze,"rev",Ke))},c(Ze,"id",Ke))},c(Ze,"ok",Ve))),ka=Ye.incomingPort("putError",c(Ae,function(t){return c(Ae,function(e){return c(Ae,function(n){return c(Ae,function(r){return Oe({status:t,name:e,message:n,error:r})},c(Ze,"error",Ve))},c(Ze,"message",Ke))},c(Ze,"name",je({ctor:"::",_0:Ce(N),_1:{ctor:"::",_0:c(qe,R,Ke),_1:{ctor:"[]"}}})))},c(Ze,"status",je({ctor:"::",_0:Ce(N),_1:{ctor:"::",_0:c(qe,R,Ge),_1:{ctor:"[]"}}})))),La=function(t){return rn({ctor:"::",_0:ka(function(e){return t(bt(e))}),_1:{ctor:"::",_0:Ea(function(e){return t(wt(e))}),_1:{ctor:"[]"}}})},Pa=Ye.incomingPort("change",c(Ae,function(t){return c(Ae,function(e){return c(Ae,function(n){return c(Ae,function(r){return Oe({id:t,changes:e,doc:n,seq:r})},c(Ze,"seq",Ge))},c(Ze,"doc",De))},c(Ze,"changes",We(c(Ae,function(t){return Oe({rev:t})},c(Ze,"rev",Ke)))))},c(Ze,"id",Ke))),Sa=Ye.outgoingPort("bulkDocs",function(t){return j.toArray(t).map(function(t){return t})}),Ca=(r(function(t,e,n,r){return{status:t,name:e,message:n,error:r}}),n(function(t,e,n){return{ok:t,id:e,rev:n}}),r(function(t,e,n,r){return{id:t,changes:e,doc:n,seq:r}}),c(hn,N,l(dn,"campsites",We(c(qe,function(t){return c(y["++"],"c",b(t))},Ge)),l(dn,"description",Ke,l(dn,"longName",Ke,l(dn,"shortName",Ke,l(dn,"id",c(qe,function(t){return c(y["++"],"p",b(t))},Ge),cn(la)))))))),Da=c(qe,function(t){return R(t?Gi:Ji)},Ve),Aa=c(qe,function(t){return R(t?Hi:Wi)},Ve),Ba=c(qe,function(t){return R(t?Fi:Zi)},Ve),Oa=h(Re,zi,c(Ze,"caravans",Ba),c(Ze,"trailers",Aa),c(Ze,"car",Da)),Ma=c(qe,function(t){return R(t?ua:sa)},Ve),Na=c(qe,function(t){return m.eq(t,"hot")?R(aa):m.eq(t,"cold")?R(ia):m.eq(t,"none")?R(oa):N},Ke),Ia=c(qe,function(t){return m.eq(t,"wood")?R(ra):m.eq(t,"wood_supplied")?R(na):m.eq(t,"wood_bring_your_own")?R(ea):m.eq(t,"gas_electric")?R(ta):m.eq(t,"none")?R($i):N},Ke),Ra=c(qe,function(t){return R(t?Qi:Yi)},Ve),Ua=c(qe,function(t){return m.eq(t,"non_flush")?R(Xi):m.eq(t,"flush")?R(Ki):m.eq(t,"none")?R(Vi):N},Ke),qa=d(Ie,ji,c(Ze,"toilets",Ua),c(Ze,"picnicTables",Ra),c(Ze,"barbecues",Ia),c(Ze,"showers",Na),c(Ze,"drinkingWater",Ma)),ja=ze(l(Ue,Bi,c(Ze,"latitude",Je),c(Ze,"longitude",Je))),za=c(hn,N,l(dn,"park",c(qe,function(t){return c(y["++"],"p",b(t))},Ge),c(ln,Oa,c(ln,qa,c(ln,ja,l(dn,"description",Ke,l(dn,"longName",Ke,l(dn,"shortName",Ke,l(dn,"id",c(qe,function(t){return c(y["++"],"c",b(t))},Ge),cn(qi)))))))))),Za=e(function(t,e){return{parks:t,campsites:e}}),Fa=l(Ue,Za,c(Ze,"parks",We(Ca)),c(Ze,"campsites",We(za))),Wa=function(t){var e=t;return"Just"===e.ctor?Se(e._0):ke},Ha=function(t){return Ee({ctor:"::",_0:{ctor:"_Tuple2",_0:"_id",_1:Se(t.id)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"_rev",_1:Wa(t.revision)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"type",_1:Se("park")},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"shortName",_1:Se(t.shortName)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"longName",_1:Se(t.longName)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"description",_1:Se(t.description)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"campsiteIds",_1:xe(c(Q,Se,t.campsiteIds))},_1:{ctor:"[]"}}}}}}}})},Ja=function(t){var e=t;return"Just"===e.ctor?Le("Cars"===e._0.ctor?!0:!1):ke},Ga=function(t){var e=t;return"Just"===e.ctor?Le("Trailers"===e._0.ctor?!0:!1):ke},Va=function(t){var e=t;return"Just"===e.ctor?Le("Caravans"===e._0.ctor?!0:!1):ke},Ka=function(t){return Ee({ctor:"::",_0:{ctor:"_Tuple2",_0:"caravans",_1:Va(t.caravans)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"trailers",_1:Ga(t.trailers)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"cars",_1:Ja(t.cars)},_1:{ctor:"[]"}}}})},Xa=function(t){var e=t;return"Just"===e.ctor?Le("DrinkingWater"===e._0.ctor?!0:!1):ke},Ya=function(t){var e=t;if("Just"!==e.ctor)return ke;switch(e._0.ctor){case"HotShowers":return Se("hot");case"ColdShowers":return Se("cold");default:return Se("no")}},Qa=function(t){var e=t;if("Just"!==e.ctor)return ke;switch(e._0.ctor){case"WoodBarbecues":return Se("wood");case"WoodSuppliedBarbecues":return Se("wood_supplied");case"WoodBringYourOwnBarbecues":return Se("wood_bring_your_own");case"GasElectricBarbecues":return Se("gas_electric");default:return Se("no")}},$a=function(t){var e=t;return"Just"===e.ctor?Le("PicnicTables"===e._0.ctor?!0:!1):ke},ts=function(t){var e=t;if("Just"!==e.ctor)return ke;switch(e._0.ctor){case"NonFlushToilets":return Se("non_flush");case"FlushToilets":return Se("flush");default:return Se("no")}},es=function(t){return Ee({ctor:"::",_0:{ctor:"_Tuple2",_0:"toilets",_1:ts(t.toilets)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"picnicTables",_1:$a(t.picnicTables)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"barbecues",_1:Qa(t.barbecues)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"showers",_1:Ya(t.showers)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"drinkingWater",_1:Xa(t.drinkingWater)},_1:{ctor:"[]"}}}}}})},ns=function(t){var e=t;if("Just"===e.ctor){var n=e._0;return Ee({ctor:"::",_0:{ctor:"_Tuple2",_0:"latitude",_1:Pe(n.latitude)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"longitude",_1:Pe(n.longitude)},_1:{ctor:"[]"}}})}return ke},rs=function(t){return Ee({ctor:"::",_0:{ctor:"_Tuple2",_0:"_id",_1:Se(t.id)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"_rev",_1:Wa(t.revision)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"type",_1:Se("campsite")},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"shortName",_1:Se(t.shortName)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"longName",_1:Se(t.longName)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"description",_1:Se(t.description)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"location",_1:ns(t.location)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"facilities",_1:es(t.facilities)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"access",_1:Ka(t.access)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"parkId",_1:Se(t.parkId)},_1:{ctor:"[]"}}}}}}}}}}})},os=function(t){var e=t;switch(e.ctor){case"BadUrl":return c(y["++"],"Bad URL: ",e._0);case"Timeout":return"Timeout";case"NetworkError":return"Network Error";case"BadStatus":return"Bad Status";default:return c(y["++"],"Bad payload: ",e._0)}},is=function(t){return!m.eq(t.shortName,"Lane Cove River")},as=function(t){return is(t)?m.update(t,{shortName:"Lane Cove River"}):m.update(t,{shortName:"Lane Cove River - I've been updated!"})},ss=function(t){return c(jt,"c126",t)},us={ctor:"ToggleLaneCoveName"},cs=function(t){return{ctor:"DestroyError",_0:t}},ls=function(t){return{ctor:"DestroySuccess",_0:t}},hs={ctor:"Destroy"},fs=function(t){return{ctor:"Put",_0:t}},ds=function(t){return rn({ctor:"::",_0:La(fs),_1:{ctor:"::",_0:Ta(ls),_1:{ctor:"::",_0:xa(cs),_1:{ctor:"[]"}}}})},_s=function(t){return{ctor:"NewData",_0:t}},ps=function(){var t="https://raw.githubusercontent.com/mlandauer/thats-camping-react/master/data.json",e=c(eo,t,Fa);return c(ro,_s,e)}(),ms=e(function(t,e){var n=t;switch(n.ctor){case"LoadData":return{ctor:"_Tuple2",_0:m.update(e,{text:R("We should be loading data now")}),_1:ps};case"NewData":if("Err"===n._0.ctor)return{ctor:"_Tuple2",_0:m.update(e,{text:R(os(n._0._0))}),_1:tn};var r=n._0._0;return{ctor:"_Tuple2",_0:e,_1:Sa(c(y["++"],c(Q,Ha,r.parks),c(Q,rs,r.campsites)))};case"Destroy":return{ctor:"_Tuple2",_0:e,_1:wa({ctor:"_Tuple0"})};case"DestroySuccess":return{ctor:"_Tuple2",_0:m.update(e,{text:R("Destroyed local database")}),_1:tn};case"DestroyError":return{ctor:"_Tuple2",_0:m.update(e,{text:R("Error destroying local database")}),_1:tn};case"Put":return"Ok"===n._0.ctor?{ctor:"_Tuple2",_0:m.update(e,{text:R("Added data")}),_1:tn}:{ctor:"_Tuple2",_0:m.update(e,{text:R(c(y["++"],"Error: ",n._0._0.message))}),_1:tn};default:var o=ss(e.campsites);if("Just"===o.ctor){var i=rs(as(o._0));return{ctor:"_Tuple2",_0:e,_1:ba(c(Xe,"data",i))}}return{ctor:"_Tuple2",_0:e,_1:tn}}}),vs={ctor:"LoadData"},gs=Oe(l(zi,N,N,N)),ys=c(qe,function(t){return R(t?ua:sa)},Ve),bs=c(qe,function(t){return m.eq(t,"hot")?R(aa):m.eq(t,"cold")?R(ia):m.eq(t,"no")?R(oa):N},Ke),ws=c(qe,function(t){return m.eq(t,"wood")?R(ra):m.eq(t,"wood_supplied")?R(na):m.eq(t,"wood_bring_your_own")?R(ea):m.eq(t,"gas_electric")?R(ta):m.eq(t,"no")?R($i):N},Ke),Ts=c(qe,function(t){return R(t?Qi:Yi)},Ve),xs=c(qe,function(t){return m.eq(t,"non_flush")?R(Xi):m.eq(t,"flush")?R(Ki):m.eq(t,"no")?R(Vi):N},Ke),Es=d(Ie,ji,c(Ze,"toilets",xs),c(Ze,"picnicTables",Ts),c(Ze,"barbecues",ws),c(Ze,"showers",bs),c(Ze,"drinkingWater",ys)),ks=l(Ue,Bi,c(Ze,"latitude",Je),c(Ze,"longitude",Je)),Ls=l(dn,"_rev",He(Ke),l(dn,"parkId",Ke,l(dn,"access",gs,l(dn,"facilities",Es,l(dn,"location",He(ks),l(dn,"description",Ke,l(dn,"longName",Ke,l(dn,"shortName",Ke,l(dn,"_id",Ke,cn(qi)))))))))),Ps=l(dn,"_rev",He(Ke),l(dn,"campsiteIds",We(Ke),l(dn,"description",Ke,l(dn,"longName",Ke,l(dn,"shortName",Ke,l(dn,"_id",Ke,cn(la))))))),Ss=function(t){return{ctor:"Campsite",_0:t}},Cs=function(t){return{ctor:"Park",_0:t}},Ds=function(t){var e=t;switch(e){case"campsite":return c(qe,Ss,Ls);case"park":return c(qe,Cs,Ps);default:return Be("Unsupported type")}},As=c(Ae,Ds,c(Ze,"type",Ke)),Bs=function(t){var e=t;switch(e.ctor){case"CampsitesPage":return"List"===e._0.ctor?"#/campsites?type=list":"#/campsites?type=map";case"CampsitePage":return c(y["++"],"#/campsites/",e._0);case"ParkPage":return c(y["++"],"#/parks/",e._0);case"AboutPage":return"#/about";case"AdminPage":return"#/admin";default:return"#/404"}},Os=e(function(t,e){return R(c(fi,di,Bs(e.page)))}),Ms=function(t){var e=t;switch(e.ctor){case"PermissionDenied":return c(y["++"],"Permission denied: ",e._0);case"LocationUnavailable":return c(y["++"],"Location unavailable: ",e._0);default:return c(y["++"],"Timeout: ",e._0)}},Ns=Ye.outgoingPort("storeStarredCampsites",function(t){return j.toArray(t).map(function(t){return t})}),Is=Ye.incomingPort("online",Ve),Rs=Ye.outgoingPort("mapVisibility",function(t){return t}),Us=Ye.outgoingPort("setMarker",function(t){return{id:t.id,location:{latitude:t.location.latitude,longitude:t.location.longitude}}}),qs=Ye.outgoingPort("panMapTo",function(t){return{latitude:t.latitude,longitude:t.longitude}}),js=(r(function(t,e,n,r){return{version:t,standalone:e,starredCampsites:n,online:r}}),function(t){return{ctor:"Online",_0:t}}),zs=function(t){return{ctor:"ToggleStarCampsite",_0:t}},Zs=function(t){return{ctor:"Change",_0:t}},Fs=function(t){return{ctor:"AdminMsg",_0:t}},Ws=e(function(t,e){var n=t;switch(n.ctor){case"UpdateLocation":if("Err"===n._0.ctor)return{ctor:"_Tuple2",_0:m.update(e,{errors:{ctor:"::",_0:Ms(n._0._0),_1:e.errors}}),_1:tn};var r=n._0._0,o=c(Bi,r.latitude,r.longitude);return{ctor:"_Tuple2",_0:m.update(e,{location:R(o)}),_1:qs(o)};case"ChangePage":var i=n._0;return{ctor:"_Tuple2",_0:m.update(e,{page:i}),_1:Rs(m.eq(i,ya(fa)))};case"PageBack":return{ctor:"_Tuple2",_0:e,_1:Po(1)};case"AdminMsg":var a=c(ms,n._0,e.adminModel),s=a._0,u=a._1;return{ctor:"_Tuple2",_0:m.update(e,{adminModel:s}),_1:c(nn,Fs,u)};case"Change":var h=c(Me,As,n._0.doc),f=h;if("Ok"===f.ctor){if("Park"===f._0.ctor){var d=f._0._0;return{ctor:"_Tuple2",_0:m.update(e,{parks:l(ve,d.id,d,e.parks)}),_1:tn}}var _=f._0._0,p=e.adminModel,v=l(ve,_.id,_,e.campsites);return{ctor:"_Tuple2",_0:m.update(e,{campsites:v,adminModel:m.update(p,{campsites:v})}),_1:function(){var t=_.location;return"Just"===t.ctor?Us(c(ha,_.id,t._0)):tn}()}}return{ctor:"_Tuple2",_0:e,_1:tn};case"ToggleStarCampsite":var g=n._0,y=c(V,g,e.starredCampsites)?c($,function(t){return!m.eq(t,g)},e.starredCampsites):{ctor:"::",_0:g,_1:e.starredCampsites};return{ctor:"_Tuple2",_0:m.update(e,{starredCampsites:y}),_1:Ns(y)};default:return{ctor:"_Tuple2",_0:m.update(e,{online:n._0}),_1:tn}}}),Hs={ctor:"PageBack"},Js=function(t){return{ctor:"ChangePage",_0:t}},Gs=function(t){var e=Si(t.href),n=ki(e);t:do{if("::"!==n.ctor)return{ctor:"::",_0:Js(ya(da)),_1:{ctor:"[]"}};if("::"===n._1.ctor){if("[]"!==n._1._1.ctor)break t;switch(n._0){case"campsites":return{ctor:"::",_0:Js(ga(n._1._0)),_1:{ctor:"[]"}};case"parks":return{ctor:"::",_0:Js(va(n._1._0)),_1:{ctor:"[]"}};default:break t}}else switch(n._0){case"campsites":var r=c(jt,"type",Ei(e));return"Just"===r.ctor&&"map"===r._0?{ctor:"::",_0:Js(ya(fa)),_1:{ctor:"[]"}}:{ctor:"::",_0:Js(ya(da)),_1:{ctor:"[]"}};case"about":return{ctor:"::",_0:Js(ma),_1:{ctor:"[]"}};case"admin":return{ctor:"::",_0:Js(pa),_1:{ctor:"[]"}};default:break t}}while(!1);return{ctor:"::",_0:Js(_a),_1:{ctor:"[]"}}},Vs=function(t){return{ctor:"UpdateLocation",_0:t}},Ks=function(t){return{ctor:"_Tuple2",_0:{campsites:$t,parks:$t,location:N,errors:{ctor:"[]"},page:ya(da),adminModel:ca,standalone:t.standalone,version:t.version,starredCampsites:c(M,{ctor:"[]"},t.starredCampsites),online:t.online},_1:c(Cn,Vs,ur)}},Xs=e(function(t,e){return c(Br,c(y["++"],{ctor:"::",_0:jr(c(y["++"],"star star-",t?"on":"off")),_1:{ctor:"[]"}},function(){var t=e;return"Just"===t.ctor?{ctor:"::",_0:Hr(t._0),_1:{ctor:"[]"}}:{ctor:"[]"}}()),{ctor:"::",_0:c(Nr,{ctor:"::",_0:jr(c(y["++"],"glyphicon glyphicon-",t?"star":"star-empty")),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"[]"}})}),Ys=function(t){for(;;){var e=t;if("[]"===e.ctor)return{ctor:"[]"};var n=e._1,r=e._0;if("Just"===r.ctor)return{ctor:"::",_0:r._0,_1:Ys(n)};var o=n;t=o}},Qs=e(function(t,e){var n=l(q,Ui,t,e);return"Just"===n.ctor?n._0:""}),$s=e(function(t,e){return c(jt,t.parkId,e)}),tu=e(function(t,e){var n=t;if("Just"===n.ctor){var r=e;return"Just"===r.ctor?c(E,n._0,r._0):O}var o=e;return"Just"===o.ctor?A:B}),eu=n(function(t,e,n){return c(tu,l(q,Mi,t,e.location),l(q,Mi,t,n.location))}),nu=e(function(t,e){return t&&!e?O:!t&&e?A:B}),ru=n(function(t,e,n){return m.eq(c(nu,e.starred,n.starred),B)?m.eq(l(eu,t,e.campsite,n.campsite),B)?c(E,e.campsite.shortName,n.campsite.shortName):l(eu,t,e.campsite,n.campsite):c(nu,e.starred,n.starred)}),ou=e(function(t,e){return c(z,ru(t),e)}),iu=n(function(t,e,n){return c(Or,{ctor:"::",_0:Zr(Bs(t)),_1:e},n)}),au=o(function(t,e,n,r,o){return l(iu,ga(r.id),{ctor:"::",_0:jr("list-group-item"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("campsite"),_1:{ctor:"[]"}},c(y["++"],{ctor:"::",_0:c(Xs,o,N),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("pull-right distance"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr(c(Qs,t,r.location)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("name"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr(r.shortName),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}},n?{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("park"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr(c(M,"",c(U,function(t){return t.shortName},c($s,r,e)))),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}:{ctor:"[]"})),_1:{ctor:"[]"}})}),su=l(iu,ma,{ctor:"::",_0:jr("btn navbar-link navbar-text pull-right"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Nr,{ctor:"::",_0:jr("glyphicon glyphicon-info-sign"),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"[]"}}),uu=c(Rr,{ctor:"::",_0:Hr(Hs),_1:{ctor:"::",_0:jr("btn btn-link navbar-link navbar-text pull-left"),_1:{ctor:"[]"}}},{ctor:"::",_0:c(Nr,{ctor:"::",_0:jr("glyphicon glyphicon-menu-left"),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"[]"}}),cu=n(function(t,e,n){return c(Sr,{ctor:"::",_0:jr("navbar navbar-default navbar-fixed-top"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},c(y["++"],e?{ctor:"::",_0:uu,_1:{ctor:"[]"}}:{ctor:"[]"},c(y["++"],n?{ctor:"::",_0:su,_1:{ctor:"[]"}}:{ctor:"[]"},{ctor:"::",_0:c(Cr,{ctor:"[]"},{ctor:"::",_0:Lr(t),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}))),_1:{ctor:"[]"}})}),lu=e(function(t,e){return{campsite:t,starred:e}}),hu=e(function(t,e){return c(Q,function(t){return c(lu,t,c(V,t.id,e))},t)}),fu=o(function(t,e,n,r,o){return c(Br,{ctor:"::",_0:jr("list-group"),_1:{ctor:"[]"}},c(Q,function(e){return f(au,t,n,r,e.campsite,e.starred)},c(ou,t,c(hu,e,o))))}),du=function(t){return c(Br,{ctor:"::",_0:jr("campsite-list"),_1:{ctor:"[]"}},{ctor:"::",_0:l(cu,"About",!0,!1),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("content"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr("About That's Camping"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("Find campsites near you in New South Wales, Australia. It covers camping on public, common land such as National Parks, State Forests and Local Council land."),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("It works "),_1:{ctor:"::",_0:c(Mr,{ctor:"[]"},{ctor:"::",_0:Lr("completely offline"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Lr(", even when you're far far away from a mobile phone tower. When does that ever happen while camping?"),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("Made by "),_1:{ctor:"::",_0:c(Or,{ctor:"::",_0:Zr("https://twitter.com/matthewlandauer"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr("Matthew Landauer"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Lr(" based on an iOS app. It's free and "),_1:{ctor:"::",_0:c(Or,{ctor:"::",_0:Zr("https://github.com/mlandauer/thats-camping-elm"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr("open source"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Lr(" because that's the way it ought to be."),_1:{ctor:"[]"}}}}}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("You're currently using version "),_1:{ctor:"::",_0:c(Or,{ctor:"::",_0:Zr(c(y["++"],"https://github.com/mlandauer/thats-camping-elm/commit/",t)),_1:{ctor:"[]"}},{ctor:"::",_0:Lr(t),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr("Things you might want to do"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:c(Or,{ctor:"::",_0:Zr("https://github.com/mlandauer/thats-camping-elm/issues"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr("Suggest a "),_1:{ctor:"::",_0:c(Mr,{ctor:"[]"},{ctor:"::",_0:Lr("feature"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Lr(" or report an "),_1:{ctor:"::",_0:c(Mr,{ctor:"[]"},{ctor:"::",_0:Lr("issue"),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}}}}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}})},_u=(i(function(t,e,n,r,o,i){return{campsites:t,parks:e,location:n,errors:r,starredCampsites:o,displayType:i}}),function(t){return c(Br,{ctor:"[]"},c(Q,function(t){return c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr(t),_1:{ctor:"[]"}})},t))}),pu=function(t){return c(Br,{ctor:"::",_0:jr("campsite-list"),_1:{ctor:"[]"}},{ctor:"::",_0:l(cu,"Camping near you",!1,!0),_1:{ctor:"::",_0:K(t.campsites)?c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("centering-box"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Dr,{ctor:"::",_0:jr("text-center"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr("Getting some lovely campsites for you"),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}):c(Br,{ctor:"::",_0:jr("content "),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("content-inner"),_1:{ctor:"[]"}},{ctor:"::",_0:_u(t.errors),_1:{ctor:"::",_0:function(){var e=t.displayType;return"List"===e.ctor?f(fu,t.location,t.campsites,t.parks,!0,t.starredCampsites):Lr("")}(),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Sr,{ctor:"::",_0:jr("navbar navbar-default navbar-fixed-bottom"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("btn-group"),_1:{ctor:"[]"}},{ctor:"::",_0:l(iu,ya(da),{ctor:"::",_0:jr("btn navbar-link navbar-text"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Nr,{ctor:"::",_0:jr("glyphicon glyphicon-list"),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:l(iu,ya(fa),{ctor:"::",_0:jr("btn navbar-link navbar-text"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Nr,{ctor:"::",_0:jr("glyphicon glyphicon-map-marker"),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}})},mu=(r(function(t,e,n,r){return{campsite:t,park:e,starred:n,online:r}}),function(t){return c(ot,c(Ir,{ctor:"[]"},{ctor:"[]"}),c(Q,function(t){return Lr(t)},c(Ct,"\n",t)))}),vu=function(t){return h(Jn,Yn,Kn("\r\n"),function(t){return"\n"},t)},gu=function(t){return c(Br,{ctor:"[]"},c(Q,function(t){return c(Ar,{ctor:"[]"},mu(t))},c(Ct,"\n\n",vu(t))))},yu=function(t){return et(function(){var e=et(t);return"[]"===e.ctor?{ctor:"[]"}:"[]"===e._1.ctor?{ctor:"::",_0:e._0,_1:{ctor:"[]"}}:c(y["++"],{ctor:"::",_0:e._0,_1:{ctor:"::",_0:" and ",_1:{ctor:"[]"}}},c(ot,", ",e._1))}())},bu=function(t){var n=t;return"[]"===n.ctor?N:R(l(H,e(function(t,e){return c(y["++"],t,e)}),"",yu(n)))},wu=n(function(t,e,n){var r=t;if("Just"===r.ctor){var o=r._0,i=n;return R("Just"===i.ctor?c(y["++"],o,c(y["++"]," ",c(y["++"],e,c(y["++"]," ",i._0)))):o)}var a=n;return"Just"===a.ctor?R(a._0):N}),Tu=function(t){return c(y["++"],kt(c(Pt,1,t)),c(Lt,1,t))},xu=o(function(t,e,n,r,o){return c(U,function(t){return Tu(c(y["++"],t,"."))},l(wu,c(U,function(e){return c(y["++"],t,c(y["++"]," ",e))},e),n,c(U,function(t){return c(y["++"],r,c(y["++"]," ",t))},o)))}),Eu=r(function(t,e,n,r){var o=r;if("Just"===o.ctor){var i=o._0;return m.eq(e(i),t)?R(n(i)):N}return N}),ku=function(t){return"car camping"},Lu=function(t){return"trailers"},Pu=function(t){return"caravans"},Su=function(t){return"drinking water"},Cu=function(t){var e=t;switch(e.ctor){case"HotShowers":return"hot showers";case"ColdShowers":return"cold showers";default:return"showers"}},Du=function(t){var e=t;switch(e.ctor){case"WoodBarbecues":return"wood BBQs";case"WoodSuppliedBarbecues":return"wood BBQs";case"WoodBringYourOwnBarbecues":return"wood BBQs";case"GasElectricBarbecues":return"gas/electric BBQs";default:return"BBQs"}},Au=function(t){return"picnic tables"},Bu=function(t){var e=t;switch(e.ctor){case"FlushToilets":return"flush toilets";case"NonFlushToilets":return"non-flush toilets";default:return"toilets"}},Ou=function(t){var e=t;return"Cars"===e.ctor},Mu=function(t){var e=t;return"Trailers"===e.ctor},Nu=function(t){var e=t;return"Caravans"===e.ctor},Iu=e(function(t,e){return Ys({ctor:"::",_0:h(Eu,t,Nu,Pu,e.caravans),_1:{ctor:"::",_0:h(Eu,t,Mu,Lu,e.trailers),_1:{ctor:"::",_0:h(Eu,t,Ou,ku,e.cars),_1:{ctor:"[]"}}}})}),Ru=function(t){var e=t;return"DrinkingWater"===e.ctor},Uu=function(t){var e=t;switch(e.ctor){case"HotShowers":return!0;case"ColdShowers":return!0;default:return!1}},qu=function(t){var e=t;switch(e.ctor){case"WoodBarbecues":return!0;case"WoodSuppliedBarbecues":return!0;case"WoodBringYourOwnBarbecues":return!0;case"GasElectricBarbecues":return!0;default:return!1}},ju=function(t){var e=t;return"PicnicTables"===e.ctor},zu=function(t){var e=t;switch(e.ctor){case"FlushToilets":return!0;case"NonFlushToilets":return!0;default:return!1}},Zu=e(function(t,e){return Ys({ctor:"::",_0:h(Eu,t,zu,Bu,e.toilets),_1:{ctor:"::",_0:h(Eu,t,ju,Au,e.picnicTables),_1:{ctor:"::",_0:h(Eu,t,qu,Du,e.barbecues),_1:{ctor:"::",_0:h(Eu,t,Uu,Cu,e.showers),_1:{ctor:"::",_0:h(Eu,t,Ru,Su,e.drinkingWater),_1:{ctor:"[]"}}}}}})}),Fu=function(t){return c(M,"",f(xu,"for",bu(c(Iu,!0,t)),"but","not for",bu(c(Iu,!1,t))))},Wu=function(t){return c(M,"",f(xu,"has",bu(c(Zu,!0,t)),"but","no",bu(c(Zu,!1,t))))},Hu=e(function(t,e){return e?c(U,function(t){return c(y["++"],"https://maps.google.com/maps?daddr=",c(y["++"],b(t.latitude),c(y["++"],",",b(t.longitude))))},t):N}),Ju=function(t){return c(Br,{ctor:"::",_0:jr("campsite-detail-page"),_1:{ctor:"[]"}},{ctor:"::",_0:l(cu,t.campsite.shortName,!0,!1),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("content"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("campsite-detail"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Xs,t.starred,R(zs(t.campsite.id))),_1:{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr(t.campsite.longName),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},function(){var e=t.park;if("Just"===e.ctor){var n=e._0;return{ctor:"::",_0:Lr("in "),_1:{ctor:"::",_0:l(iu,va(n.id),{ctor:"[]"},{ctor:"::",_0:Lr(n.longName),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Lr("."),_1:{ctor:"[]"}}}}}return{ctor:"[]"}}()),_1:{ctor:"::",_0:gu(t.campsite.description),_1:{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr("Facilities"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr(Wu(t.campsite.facilities)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr("Access"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr(Fu(t.campsite.access)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:function(){var e=c(Hu,t.campsite.location,t.online);return"Just"===e.ctor?c(Or,{ctor:"::",_0:Zr(e._0),_1:{ctor:"::",_0:jr("directions btn btn-default"),_1:{ctor:"[]"}}},{ctor:"::",_0:Lr("Directions to campsite"),_1:{ctor:"[]"}}):c(Nr,{ctor:"::",_0:jr("directions btn btn-default disabled"),_1:{ctor:"[]"}},{ctor:"::",_0:Lr("Directions to campsite"),_1:{ctor:"[]"}})}(),_1:{ctor:"[]"}}}}}}}}}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}})},Gu=(o(function(t,e,n,r,o){return{park:t,campsites:e,parks:n,location:r,starredCampsites:o}}),function(t){return c(Br,{ctor:"::",_0:jr("park-detail-page"),_1:{ctor:"[]"}},{ctor:"::",_0:l(cu,t.park.shortName,!0,!1),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("content"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("park-details"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr(t.park.longName),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:gu(t.park.description),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("park-campsite-list"),_1:{ctor:"[]"}},{ctor:"::",_0:f(fu,t.location,t.campsites,t.parks,!1,t.starredCampsites),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}})}),Vu=function(t){return c(Br,{ctor:"::",_0:jr("content"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("container"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Dr,{ctor:"[]"},{ctor:"::",_0:Lr("Database admin page"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("Here you can do actions on the local PouchDB database"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Br,{ctor:"::",_0:jr("btn-group-vertical"),_1:{ctor:"[]"}},{ctor:"::",_0:c(Rr,{ctor:"::",_0:jr("btn btn-default"),_1:{ctor:"::",_0:Hr(hs),_1:{ctor:"[]"}}},{ctor:"::",_0:Lr("Destroy local database"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Rr,{ctor:"::",_0:jr("btn btn-default"),_1:{ctor:"::",_0:Hr(vs),_1:{ctor:"[]"}}},{ctor:"::",_0:Lr("Load local database campsite data from Github"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:c(Rr,{ctor:"::",_0:jr("btn btn-default"),_1:{ctor:"::",_0:Hr(us),_1:{ctor:"[]"}}},{ctor:"::",_0:Lr(c(y["++"],c(M,!1,c(U,is,ss(t.campsites)))?"Reset":"Change"," name of Lane Cover River campsite")),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("Or you can go "),_1:{ctor:"::",_0:l(iu,ya(da),{ctor:"[]"},{ctor:"::",_0:Lr("back to the main campsites list"),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr(c(M,"",t.text)),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}}}),_1:{ctor:"[]"}})},Ku=c(Ar,{ctor:"[]"},{ctor:"::",_0:Lr("This is a 404"),_1:{ctor:"[]"}}),Xu=e(function(t,e){return Ys(c(Q,function(t){return c(jt,t,e)},t.campsiteIds))}),Yu=function(t){return c(Br,{ctor:"::",_0:zr("app"),_1:{ctor:"::",_0:jr(t.standalone?"fullscreen":""),_1:{ctor:"[]"}}},{ctor:"::",_0:function(){var e=t.page;switch(e.ctor){case"CampsitesPage":return pu({campsites:Ot(t.campsites),parks:t.parks,location:t.location,errors:t.errors,starredCampsites:t.starredCampsites,displayType:e._0});case"CampsitePage":var n=e._0,r=c(jt,n,t.campsites);if("Just"===r.ctor){var o=r._0;return Ju({campsite:o,park:c(jt,o.parkId,t.parks),starred:c(V,n,t.starredCampsites),online:t.online})}return Ku;case"ParkPage":var i=c(jt,e._0,t.parks);if("Just"===i.ctor){var a=i._0;return Gu({park:a,campsites:c(Xu,a,t.campsites),parks:t.parks,location:t.location,starredCampsites:t.starredCampsites})}return Ku;case"AboutPage":return du(t.version);case"AdminPage":return c(kr,Fs,Vu(t.adminModel));default:return Ku}}(),_1:{ctor:"[]"}})},Qu=function(t){return rn({ctor:"::",_0:Pa(Zs),_1:{ctor:"::",_0:c(an,Fs,ds(t.adminModel)),_1:{ctor:"::",_0:Is(js),_1:{ctor:"[]"}}}})},$u=Ti({delta2url:Os,location2messages:Gs,init:Ks,view:Yu,update:Ws,subscriptions:Qu})(c(Ae,function(t){return c(Ae,function(e){return c(Ae,function(n){
return c(Ae,function(r){return Oe({online:t,standalone:e,starredCampsites:n,version:r})},c(Ze,"version",Ke))},c(Ze,"starredCampsites",je({ctor:"::",_0:Ce(N),_1:{ctor:"::",_0:c(qe,R,We(Ke)),_1:{ctor:"[]"}}})))},c(Ze,"standalone",Ve))},c(Ze,"online",Ve))),tc={};if(tc.App=tc.App||{},"undefined"!=typeof $u&&$u(tc.App,"App",void 0),"function"==typeof define&&define.amd)return void define([],function(){return tc});if("object"==typeof t)return void(t.exports=tc);var ec=this.Elm;if("undefined"==typeof ec)return void(this.Elm=tc);for(var nc in tc){if(nc in ec)throw new Error("There are two Elm modules called `"+nc+"` on this page! Rename one of them.");ec[nc]=tc[nc]}}).call(this)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,u=0;u<o;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){t.exports=n.p+"marker-shadow.png"},function(t,e,n){t.exports=n.p+"apple-touch-icon.png"},function(t,e,n){t.exports=n.p+"index.html"},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r,o;!function(i,a,s){function u(){var t=i.L;c.noConflict=function(){return i.L=t,this},i.L=c}var c={version:"1.0.3"};"object"==typeof t&&"object"==typeof t.exports?t.exports=c:(r=c,o="function"==typeof r?r.call(e,n,e,t):r,!(o!==s&&(t.exports=o))),"undefined"!=typeof i&&u(),c.Util={extend:function(t){var e,n,r,o;for(n=1,r=arguments.length;n<r;n++){o=arguments[n];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++c.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var r,o,i,a;return a=function(){r=!1,o&&(i.apply(n,o),o=!1)},i=function(){r?o=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}},wrapNum:function(t,e,n){var r=e[1],o=e[0],i=r-o;return t===r&&n?t:((t-o)%i+i)%i+o},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return c.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?c.Util.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var r=[];for(var o in t)r.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+r.join("&")},template:function(t,e){return t.replace(c.Util.templateRe,function(t,n){var r=e[n];if(r===s)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return i["webkit"+t]||i["moz"+t]||i["ms"+t]}function e(t){var e=+new Date,r=Math.max(0,16-(e-n));return n=e+r,i.setTimeout(t,r)}var n=0,r=i.requestAnimationFrame||t("RequestAnimationFrame")||e,o=i.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){i.clearTimeout(t)};c.Util.requestAnimFrame=function(t,n,o){return o&&r===e?void t.call(n):r.call(i,c.bind(t,n))},c.Util.cancelAnimFrame=function(t){t&&o.call(i,t)}}(),c.extend=c.Util.extend,c.bind=c.Util.bind,c.stamp=c.Util.stamp,c.setOptions=c.Util.setOptions,c.Class=function(){},c.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=c.Util.create(n);r.constructor=e,e.prototype=r;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(c.extend(e,t.statics),delete t.statics),t.includes&&(c.Util.extend.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=c.Util.extend(c.Util.create(r.options),t.options)),c.extend(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},c.Class.include=function(t){return c.extend(this.prototype,t),this},c.Class.mergeOptions=function(t){return c.extend(this.prototype.options,t),this},c.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},c.Evented=c.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else{t=c.Util.splitWords(t);for(var o=0,i=t.length;o<i;o++)this._on(t[o],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else{t=c.Util.splitWords(t);for(var o=0,i=t.length;o<i;o++)this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=s);for(var o={fn:e,ctx:n},i=r,a=0,u=i.length;a<u;a++)if(i[a].fn===e&&i[a].ctx===n)return;i.push(o)},_off:function(t,e,n){var r,o,i;if(this._events&&(r=this._events[t])){if(!e){for(o=0,i=r.length;o<i;o++)r[o].fn=c.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=s),r)for(o=0,i=r.length;o<i;o++){var a=r[o];if(a.ctx===n&&a.fn===e)return a.fn=c.Util.falseFn,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(o,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=c.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var i=0,a=o.length;i<a;i++){var s=o[i];s.fn.call(s.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=c.bind(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,c.extend({layer:t.target},t),!0)}});var l=c.Evented.prototype;l.addEventListener=l.on,l.removeEventListener=l.clearAllEventListeners=l.off,l.addOneTimeEventListener=l.once,l.fireEvent=l.fire,l.hasEventListeners=l.listens,c.Mixin={Events:l},function(){var t=navigator.userAgent.toLowerCase(),e=a.documentElement,n="ActiveXObject"in i,r=t.indexOf("webkit")!==-1,o=t.indexOf("phantom")!==-1,s=t.search("android [23]")!==-1,u=t.indexOf("chrome")!==-1,l=t.indexOf("gecko")!==-1&&!r&&!i.opera&&!n,h=0===navigator.platform.indexOf("Win"),f="undefined"!=typeof orientation||t.indexOf("mobile")!==-1,d=!i.PointerEvent&&i.MSPointerEvent,_=i.PointerEvent||d,p=n&&"transition"in e.style,m="WebKitCSSMatrix"in i&&"m11"in new i.WebKitCSSMatrix&&!s,v="MozPerspective"in e.style,g="OTransition"in e.style,y=!i.L_NO_TOUCH&&(_||"ontouchstart"in i||i.DocumentTouch&&a instanceof i.DocumentTouch);c.Browser={ie:n,ielt9:n&&!a.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in a),webkit:r,gecko:l,android:t.indexOf("android")!==-1,android23:s,chrome:u,safari:!u&&t.indexOf("safari")!==-1,win:h,ie3d:p,webkit3d:m,gecko3d:v,opera12:g,any3d:!i.L_DISABLE_3D&&(p||m||v)&&!g&&!o,mobile:f,mobileWebkit:f&&r,mobileWebkit3d:f&&m,mobileOpera:f&&i.opera,mobileGecko:f&&l,touch:!!y,msPointer:!!d,pointer:!!_,retina:(i.devicePixelRatio||i.screen.deviceXDPI/i.screen.logicalXDPI)>1}}(),c.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(t){return this.clone()._add(c.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(c.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new c.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new c.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=c.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=c.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=c.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}},c.point=function(t,e,n){return t instanceof c.Point?t:c.Util.isArray(t)?new c.Point(t[0],t[1]):t===s||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new c.Point(t.x,t.y):new c.Point(t,e,n)},c.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,o=n.length;r<o;r++)this.extend(n[r])},c.Bounds.prototype={extend:function(t){return t=c.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof c.Point?c.point(t):c.bounds(t),t instanceof c.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=c.bounds(t);var e=this.min,n=this.max,r=t.min,o=t.max,i=o.x>=e.x&&r.x<=n.x,a=o.y>=e.y&&r.y<=n.y;return i&&a},overlaps:function(t){t=c.bounds(t);var e=this.min,n=this.max,r=t.min,o=t.max,i=o.x>e.x&&r.x<n.x,a=o.y>e.y&&r.y<n.y;return i&&a},isValid:function(){return!(!this.min||!this.max)}},c.bounds=function(t,e){return!t||t instanceof c.Bounds?t:new c.Bounds(t,e)},c.Transformation=function(t,e,n,r){this._a=t,this._b=e,this._c=n,this._d=r},c.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new c.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},c.DomUtil={get:function(t){return"string"==typeof t?a.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&a.defaultView){var r=a.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n},create:function(t,e,n){var r=a.createElement(t);return r.className=e||"",n&&n.appendChild(r),r},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==s)return t.classList.contains(e);var n=c.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==s)for(var n=c.Util.splitWords(e),r=0,o=n.length;r<o;r++)t.classList.add(n[r]);else if(!c.DomUtil.hasClass(t,e)){var i=c.DomUtil.getClass(t);c.DomUtil.setClass(t,(i?i+" ":"")+e)}},removeClass:function(t,e){t.classList!==s?t.classList.remove(e):c.DomUtil.setClass(t,c.Util.trim((" "+c.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===s?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===s?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&c.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"},testProp:function(t){for(var e=a.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var r=e||new c.Point(0,0);t.style[c.DomUtil.TRANSFORM]=(c.Browser.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,c.Browser.any3d?c.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new c.Point(0,0)}},function(){c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(c.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in a)c.DomUtil.disableTextSelection=function(){c.DomEvent.on(i,"selectstart",c.DomEvent.preventDefault)},c.DomUtil.enableTextSelection=function(){c.DomEvent.off(i,"selectstart",c.DomEvent.preventDefault)};else{var e=c.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);c.DomUtil.disableTextSelection=function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},c.DomUtil.enableTextSelection=function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}}c.DomUtil.disableImageDrag=function(){c.DomEvent.on(i,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.enableImageDrag=function(){c.DomEvent.off(i,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.preventOutline=function(t){for(;t.tabIndex===-1;)t=t.parentNode;t&&t.style&&(c.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",c.DomEvent.on(i,"keydown",c.DomUtil.restoreOutline,this))},c.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,c.DomEvent.off(i,"keydown",c.DomUtil.restoreOutline,this))}}(),c.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==s&&(this.alt=+n)},c.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=c.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===s?1e-9:e)},toString:function(t){return"LatLng("+c.Util.formatNum(this.lat,t)+", "+c.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return c.CRS.Earth.distance(this,c.latLng(t))},wrap:function(){return c.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return c.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new c.LatLng(this.lat,this.lng,this.alt)}},c.latLng=function(t,e,n){return t instanceof c.LatLng?t:c.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new c.LatLng(t[0],t[1],t[2]):2===t.length?new c.LatLng(t[0],t[1]):null:t===s||null===t?t:"object"==typeof t&&"lat"in t?new c.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===s?null:new c.LatLng(t,e,n)},c.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,o=n.length;r<o;r++)this.extend(n[r])},c.LatLngBounds.prototype={extend:function(t){var e,n,r=this._southWest,o=this._northEast;if(t instanceof c.LatLng)e=t,n=t;else{if(!(t instanceof c.LatLngBounds))return t?this.extend(c.latLng(t)||c.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||o?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new c.LatLng(e.lat,e.lng),this._northEast=new c.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new c.LatLngBounds(new c.LatLng(e.lat-r,e.lng-o),new c.LatLng(n.lat+r,n.lng+o))},getCenter:function(){return new c.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof c.LatLng||"lat"in t?c.latLng(t):c.latLngBounds(t);var e,n,r=this._southWest,o=this._northEast;return t instanceof c.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=o.lat&&e.lng>=r.lng&&n.lng<=o.lng},intersects:function(t){t=c.latLngBounds(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),o=t.getNorthEast(),i=o.lat>=e.lat&&r.lat<=n.lat,a=o.lng>=e.lng&&r.lng<=n.lng;return i&&a},overlaps:function(t){t=c.latLngBounds(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),o=t.getNorthEast(),i=o.lat>e.lat&&r.lat<n.lat,a=o.lng>e.lng&&r.lng<n.lng;return i&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=c.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},c.latLngBounds=function(t,e){return t instanceof c.LatLngBounds?t:new c.LatLngBounds(t,e)},c.Projection={},c.Projection.LonLat={project:function(t){return new c.Point(t.lng,t.lat)},unproject:function(t){return new c.LatLng(t.y,t.x)},bounds:c.bounds([-180,-90],[180,90])},c.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),o=Math.sin(r*e);return new c.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new c.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return c.bounds([-t,-t],[t,t])}()},c.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),o=this.transformation.transform(e.max,n);return c.bounds(r,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?c.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?c.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return c.latLng(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,o=e.lng-n.lng;if(0===r&&0===o)return t;var i=t.getSouthWest(),a=t.getNorthEast(),s=c.latLng({lat:i.lat-r,lng:i.lng-o}),u=c.latLng({lat:a.lat-r,lng:a.lng-o});return new c.LatLngBounds(s,u)}},c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0}),c.CRS.Earth=c.extend({},c.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,o=e.lat*n,i=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(i,1))}}),c.CRS.EPSG3857=c.extend({},c.CRS.Earth,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*c.Projection.SphericalMercator.R);return new c.Transformation(t,.5,-t,.5)}()}),c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"}),c.CRS.EPSG4326=c.extend({},c.CRS.Earth,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/180,1,-1/180,.5)}),c.Map=c.Evented.extend({options:{crs:c.CRS.EPSG3857,center:s,zoom:s,minZoom:s,maxZoom:s,layers:[],maxBounds:s,renderer:s,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=c.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=c.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==s&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==s&&this.setView(c.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),c.DomEvent.on(this._proxy,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===s?this._zoom:this._limitZoom(e),t=this._limitCenter(c.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==s&&(n.zoom=c.extend({animate:n.animate},n.zoom),n.pan=c.extend({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),o=this.getSize().divideBy(2),i=t instanceof c.Point?t:this.latLngToContainerPoint(t),a=i.subtract(o).multiplyBy(1-1/r),s=this.containerPointToLatLng(o.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():c.latLngBounds(t);var n=c.point(e.paddingTopLeft||e.padding||[0,0]),r=c.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(r));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var i=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o),u=this.unproject(a.add(s).divideBy(2).add(i),o);return{center:u,zoom:o}},fitBounds:function(t,e){if(t=c.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=c.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function r(t){var e=t?-1:1,n=t?g:v,r=g*g-v*v+e*w*w*y*y,o=2*n*w*y,i=r/o,a=Math.sqrt(i*i+1)-i,s=a<1e-9?-18:Math.log(a);return s}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function i(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return o(t)/i(t)}function u(t){return v*(i(T)/i(T+b*t))}function l(t){return v*(i(T)*a(T+b*t)-o(T))/w}function h(t){return 1-Math.pow(1-t,1.5)}function f(){var n=(Date.now()-x)/k,r=h(n)*E;n<=1?(this._flyToFrame=c.Util.requestAnimFrame(f,this),this._move(this.unproject(d.add(_.subtract(d).multiplyBy(l(r)/y)),m),this.getScaleZoom(v/u(r),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!c.Browser.any3d)return this.setView(t,e,n);this._stop();var d=this.project(this.getCenter()),_=this.project(t),p=this.getSize(),m=this._zoom;t=c.latLng(t),e=e===s?m:e;var v=Math.max(p.x,p.y),g=v*this.getZoomScale(m,e),y=_.distanceTo(d)||1,b=1.42,w=b*b,T=r(0),x=Date.now(),E=(r(1)-T)/b,k=n.duration?1e3*n.duration:1e3*E*.8;return this._moveStart(!0),f.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=c.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,c.latLngBounds(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=c.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),o=n.divideBy(2).round(),i=r.subtract(o);return i.x||i.y?(t.animate&&t.pan?this.panBy(i):(t.pan&&this._rawPanBy(i),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=c.bind(this._handleGeolocationResponse,this),n=c.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){
var e=t.coords.latitude,n=t.coords.longitude,r=new c.LatLng(e,n),o=r.toBounds(t.coords.accuracy),i=this._locateOptions;if(i.setView){var a=this.getBoundsZoom(o);this.setView(r,i.maxZoom?Math.min(a,i.maxZoom):a)}var s={latlng:r,bounds:o,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(s[u]=t.coords[u]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=s,this._containerId=s}c.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=c.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new c.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===s?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===s?this._layersMaxZoom===s?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=c.latLngBounds(t),n=c.point(n||[0,0]);var r=this.getZoom()||0,o=this.getMinZoom(),i=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=c.bounds(this.project(s,r),this.project(a,r)).getSize(),h=c.Browser.any3d?this.options.zoomSnap:1,f=Math.min(u.x/l.x,u.y/l.y);return r=this.getScaleZoom(f,r),h&&(r=Math.round(r/(h/100))*(h/100),r=e?Math.ceil(r/h)*h:Math.floor(r/h)*h),Math.max(o,Math.min(i,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new c.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new c.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===s?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===s?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===s?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=e===s?this._zoom:e,this.options.crs.latLngToPoint(c.latLng(t),e)},unproject:function(t,e){return e=e===s?this._zoom:e,this.options.crs.pointToLatLng(c.point(t),e)},layerPointToLatLng:function(t){var e=c.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(c.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(c.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(c.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(c.latLng(t),c.latLng(e))},containerPointToLayerPoint:function(t){return c.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return c.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(c.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(t)))},mouseEventToContainerPoint:function(t){return c.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=c.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");c.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=c.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&c.Browser.any3d,c.DomUtil.addClass(t,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(c.Browser.ielt9?" leaflet-oldie":"")+(c.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=c.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),c.DomUtil.setPosition(this._mapPane,new c.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(c.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),c.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===s&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return c.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(c.DomEvent){this._targets={},this._targets[c.stamp(this._container)]=this;var e=t?"off":"on";c.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&c.DomEvent[e](i,"resize",this._onResize,this),c.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=c.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],o="mouseout"===e||"mouseover"===e,i=t.target||t.srcElement,a=!1;i;){if(n=this._targets[c.stamp(i)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!c.DomEvent._isExternalTarget(i,t))break;if(r.push(n),o)break}if(i===this._container)break;i=i.parentNode}return r.length||a||o||!c.DomEvent._isExternalTarget(i,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!c.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&c.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=c.Util.extend({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e)),n.length)){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&c.DomEvent.preventDefault(t);var i={originalEvent:t};if("keypress"!==t.type){var a=o instanceof c.Marker;i.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),i.layerPoint=this.containerPointToLayerPoint(i.containerPoint),i.latlng=a?o.getLatLng():this.layerPointToLatLng(i.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,i,!0),i.originalEvent._stopped||n[s].options.nonBubblingEvents&&c.Util.indexOf(n[s].options.nonBubblingEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)||new c.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==s?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return c.bounds([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),o=this.getSize().divideBy(2),i=new c.Bounds(r.subtract(o),r.add(o)),a=this._getBoundsOffset(i,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new c.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=c.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=r.min.subtract(t.min),i=r.max.subtract(t.max),a=this._rebound(o.x,-i.x),s=this._rebound(o.y,-i.y);return new c.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=c.Browser.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=c.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=c.DomUtil.TRANSFORM,r=t.style[n];c.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();c.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/r);return!(n.animate!==!0&&!this.getSize().contains(o))&&(c.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(c.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),c.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),c.map=function(t,e){return new c.Map(t,e)},c.Layer=c.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),c.Map.include({addLayer:function(t){var e=c.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=c.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&c.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?c.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[c.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var o=this._zoomBoundLayers[r].options;t=o.minZoom===s?t:Math.min(t,o.minZoom),e=o.maxZoom===s?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-(1/0)?s:e,this._layersMinZoom=t===1/0?s:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===s&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===s&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var h="_leaflet_events";c.DomEvent={on:function(t,e,n,r){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],n);else{e=c.Util.splitWords(e);for(var i=0,a=e.length;i<a;i++)this._on(t,e[i],n,r)}return this},off:function(t,e,n,r){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],n);else{e=c.Util.splitWords(e);for(var i=0,a=e.length;i<a;i++)this._off(t,e[i],n,r)}return this},_on:function(t,e,n,r){var o=e+c.stamp(n)+(r?"_"+c.stamp(r):"");if(t[h]&&t[h][o])return this;var a=function(e){return n.call(r||t,e||i.event)},s=a;return c.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,o):!c.Browser.touch||"dblclick"!==e||!this.addDoubleTapListener||c.Browser.pointer&&c.Browser.chrome?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||i.event,c.DomEvent._isExternalTarget(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&c.Browser.android&&(a=function(t){return c.DomEvent._filterClick(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):this.addDoubleTapListener(t,a,o),t[h]=t[h]||{},t[h][o]=a,this},_off:function(t,e,n,r){var o=e+c.stamp(n)+(r?"_"+c.stamp(r):""),i=t[h]&&t[h][o];return i?(c.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):c.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",i,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,i,!1):"detachEvent"in t&&t.detachEvent("on"+e,i),t[h][o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,c.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return c.DomEvent.on(t,"mousewheel",c.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=c.DomEvent.stopPropagation;return c.DomEvent.on(t,c.Draggable.START.join(" "),e),c.DomEvent.on(t,{click:c.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return c.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new c.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new c.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:c.Browser.win&&c.Browser.chrome?2:c.Browser.gecko?i.devicePixelRatio:1,getWheelDelta:function(t){return c.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/c.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){c.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=c.DomEvent._lastClick&&n-c.DomEvent._lastClick;return r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?void c.DomEvent.stop(t):(c.DomEvent._lastClick=n,void e(t))}},c.DomEvent.addListener=c.DomEvent.on,c.DomEvent.removeListener=c.DomEvent.off,c.PosAnimation=c.Evented.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=c.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),c.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),c.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:c.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,o=this.R_MINOR/n,i=Math.sqrt(1-o*o),a=i*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),i/2);return r=-n*Math.log(Math.max(s,1e-10)),new c.Point(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,o=this.R_MINOR/r,i=Math.sqrt(1-o*o),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=i*Math.sin(s),e=Math.pow((1-e)/(1+e),i/2),l=Math.PI/2-2*Math.atan(a*e)-s,s+=l;return new c.LatLng(s*n,t.x*n/r)}},c.CRS.EPSG3395=c.extend({},c.CRS.Earth,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*c.Projection.Mercator.R);return new c.Transformation(t,.5,-t,.5)}()}),c.GridLayer=c.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:c.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:s,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){c.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),c.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(c.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(c.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return a.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof c.Point?t:new c.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==s&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-(1/0),1/0),o=0,i=n.length;o<i;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!c.Browser.ielt9){c.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var o=this._tiles[r];if(o.current&&o.loaded){var i=Math.min(1,(t-o.loaded)/200);c.DomUtil.setOpacity(o.el,i),i<1?e=!0:(o.active&&(n=!0),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=c.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===s)return s;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(c.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var r=this._levels[t],o=this._map;return r||(r=this._levels[t]={},r.el=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,o.getCenter(),o.getZoom()),c.Util.falseFn(r.el.offsetWidth)),this._level=r,r},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)c.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,r){var o=Math.floor(t/2),i=Math.floor(e/2),a=n-1,s=new c.Point(+o,+i);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>r&&this._retainParent(o,i,a,r))},_retainChildren:function(t,e,n,r){for(var o=2*t;o<2*t+2;o++)for(var i=2*e;i<2*e+2;i++){var a=new c.Point(o,i);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(o,i,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,r){var o=Math.round(e);(this.options.maxZoom!==s&&o>this.options.maxZoom||this.options.minZoom!==s&&o<this.options.minZoom)&&(o=s);var i=this.options.updateWhenZooming&&o!==this._tileZoom;r&&!i||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==s&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();c.Browser.any3d?c.DomUtil.setTransform(t.el,o,r):c.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),i=e.getSize().divideBy(2*r);return new c.Bounds(o.subtract(i),o.add(i))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(t===s&&(t=e.getCenter()),this._tileZoom!==s){var r=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(r),i=o.getCenter(),u=[],l=this.options.keepBuffer,h=new c.Bounds(o.getBottomLeft().subtract([l,-l]),o.getTopRight().add([l,-l]));for(var f in this._tiles){var d=this._tiles[f].coords;d.z===this._tileZoom&&h.contains(c.point(d.x,d.y))||(this._tiles[f].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var _=o.min.y;_<=o.max.y;_++)for(var p=o.min.x;p<=o.max.x;p++){var m=new c.Point(p,_);if(m.z=this._tileZoom,this._isValidTile(m)){var v=this._tiles[this._tileCoordsToKey(m)];v?v.current=!0:u.push(m)}}if(u.sort(function(t,e){return t.distanceTo(i)-e.distanceTo(i)}),0!==u.length){this._loading||(this._loading=!0,this.fire("loading"));var g=a.createDocumentFragment();for(p=0;p<u.length;p++)this._addTile(u[p],g);this._level.el.appendChild(g)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return c.latLngBounds(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),o=r.add(n),i=e.unproject(r,t.z),a=e.unproject(o,t.z),s=new c.LatLngBounds(i,a);return this.options.noWrap||e.wrapLatLngBounds(s),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new c.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(c.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){c.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c.Util.falseFn,t.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity<1&&c.DomUtil.setOpacity(t,this.options.opacity),c.Browser.android&&!c.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),c.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&c.Util.requestAnimFrame(c.bind(this._tileReady,this,t,null,o)),c.DomUtil.setPosition(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(c.DomUtil.setOpacity(n.el,0),c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(c.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),c.Browser.ielt9||!this._map._fadeAnimated?c.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(c.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new c.Point(this._wrapX?c.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?c.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new c.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),c.gridLayer=function(t){return new c.GridLayer(t)},c.TileLayer=c.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=c.setOptions(this,e),e.detectRetina&&c.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),
c.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=a.createElement("img");return c.DomEvent.on(n,"load",c.bind(this._tileOnLoad,this,e,n)),c.DomEvent.on(n,"error",c.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:c.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return c.Util.template(this._url,c.extend(e,this.options))},_tileOnLoad:function(t,e){c.Browser.ielt9?setTimeout(c.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.src!==r&&(e.src=r),t(n,e)},getTileSize:function(){var t=this._map,e=c.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,r=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==r&&n<r?e.divideBy(t.getZoomScale(r,n)).round():null!==o&&n>o?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset,o=this.options.minNativeZoom,i=this.options.maxNativeZoom;return n&&(t=e-t),t+=r,null!==o&&t<o?o:null!==i&&t>i?i:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=c.Util.falseFn,e.onerror=c.Util.falseFn,e.complete||(e.src=c.Util.emptyImageUrl,c.DomUtil.remove(e)))}}),c.tileLayer=function(t,e){return new c.TileLayer(t,e)},c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=c.extend({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);e=c.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&c.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,c.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),r=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===c.CRS.EPSG4326?[r.y,n.x,n.y,r.x]:[n.x,r.y,r.x,n.y]).join(","),i=c.TileLayer.prototype.getTileUrl.call(this,t);return i+c.Util.getParamString(this.wmsParams,i,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return c.extend(this.wmsParams,t),e||this.redraw(),this}}),c.tileLayer.wms=function(t,e){return new c.TileLayer.WMS(t,e)},c.ImageOverlay=c.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=c.latLngBounds(e),c.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(c.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){c.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=c.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=c.Util.falseFn,t.onmousemove=c.Util.falseFn,t.onload=c.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;c.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new c.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();c.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}}),c.imageOverlay=function(t,e,n){return new c.ImageOverlay(t,e,n)},c.Icon=c.Class.extend({initialize:function(t){c.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var o=c.point(r),i=c.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||a.createElement("img"),e.src=t,e},_getIconUrl:function(t){return c.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),c.icon=function(t){return new c.Icon(t)},c.Icon.Default=c.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return c.Icon.Default.imagePath||(c.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||c.Icon.Default.imagePath)+c.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=c.DomUtil.create("div","leaflet-default-icon-path",a.body),e=c.DomUtil.getStyle(t,"background-image")||c.DomUtil.getStyle(t,"backgroundImage");return a.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),c.Marker=c.Layer.extend({options:{icon:new c.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){c.setOptions(this,e),this._latlng=c.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=c.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),c.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),i=!1;o!==this._shadow&&(this._removeShadow(),i=!0),o&&(c.DomUtil.addClass(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&i&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),c.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&c.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){c.DomUtil.setPosition(this._icon,t),this._shadow&&c.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(c.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new c.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;c.DomUtil.setOpacity(this._icon,t),this._shadow&&c.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),c.marker=function(t,e){return new c.Marker(t,e)},c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:a.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=c.point(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),c.divIcon=function(t){return new c.DivIcon(t)},c.DivOverlay=c.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){c.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&c.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&c.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(c.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(c.bind(c.DomUtil.remove,c.DomUtil,this._container),200)):c.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=c.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=c.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?c.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),c.Popup=c.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){c.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof c.Path||this._source.on("preclick",c.DomEvent.stopPropagation))},onRemove:function(t){c.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof c.Path||this._source.off("preclick",c.DomEvent.stopPropagation))},getEvents:function(){var t=c.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=c.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=c.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",c.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var r=this._wrapper=c.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=c.DomUtil.create("div",t+"-content",r),c.DomEvent.disableClickPropagation(r).disableScrollPropagation(this._contentNode).on(r,"contextmenu",c.DomEvent.stopPropagation),this._tipContainer=c.DomUtil.create("div",t+"-tip-container",e),this._tip=c.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,o=this.options.maxHeight,i="leaflet-popup-scrolled";o&&r>o?(e.height=o+"px",c.DomUtil.addClass(t,i)):c.DomUtil.removeClass(t,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();c.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(c.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,o=new c.Point(this._containerLeft,-n-this._containerBottom);o._add(c.DomUtil.getPosition(this._container));var i=t.layerPointToContainerPoint(o),a=c.point(this.options.autoPanPadding),s=c.point(this.options.autoPanPaddingTopLeft||a),u=c.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),h=0,f=0;i.x+r+u.x>l.x&&(h=i.x+r-l.x+u.x),i.x-h-s.x<0&&(h=i.x-s.x),i.y+n+u.y>l.y&&(f=i.y+n-l.y+u.y),i.y-f-s.y<0&&(f=i.y-s.y),(h||f)&&t.fire("autopanstart").panBy([h,f])}},_onCloseButtonClick:function(t){this._close(),c.DomEvent.stop(t)},_getAnchor:function(){return c.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),c.popup=function(t,e){return new c.Popup(t,e)},c.Map.mergeOptions({closePopupOnClick:!0}),c.Map.include({openPopup:function(t,e,n){return t instanceof c.Popup||(t=new c.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),c.Layer.include({bindPopup:function(t,e){return t instanceof c.Popup?(c.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new c.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof c.Layer||(e=t,t=this),t instanceof c.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return c.DomEvent.stop(t),e instanceof c.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),c.Tooltip=c.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){c.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){c.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=c.DivOverlay.prototype.getEvents.call(this);return c.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=c.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),i=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=c.point(this.options.offset),l=this._getAnchor();"top"===i?t=t.add(c.point(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===i?t=t.subtract(c.point(a/2-u.x,-u.y,!0)):"center"===i?t=t.subtract(c.point(a/2+u.x,s/2-l.y+u.y,!0)):"right"===i||"auto"===i&&o.x<r.x?(i="right",t=t.add(c.point(u.x+l.x,l.y-s/2+u.y,!0))):(i="left",t=t.subtract(c.point(a+l.x-u.x,s/2-l.y-u.y,!0))),c.DomUtil.removeClass(n,"leaflet-tooltip-right"),c.DomUtil.removeClass(n,"leaflet-tooltip-left"),c.DomUtil.removeClass(n,"leaflet-tooltip-top"),c.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),c.DomUtil.addClass(n,"leaflet-tooltip-"+i),c.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&c.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return c.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),c.tooltip=function(t,e){return new c.Tooltip(t,e)},c.Map.include({openTooltip:function(t,e,n){return t instanceof c.Tooltip||(t=new c.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),c.Layer.include({bindTooltip:function(t,e){return t instanceof c.Tooltip?(c.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=c.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),c.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof c.Layer||(e=t,t=this),t instanceof c.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:s)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}}),c.LayerGroup=c.Layer.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,r);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c.stamp(t)}}),c.layerGroup=function(t){return new c.LayerGroup(t)},c.FeatureGroup=c.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),c.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),c.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new c.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),c.featureGroup=function(t){return new c.FeatureGroup(t)},c.Renderer=c.Layer.extend({options:{padding:.1},initialize:function(t){c.setOptions(this,t),c.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){c.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=c.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(i),u=o.multiplyBy(-n).add(r).add(o).subtract(s);c.Browser.any3d?c.DomUtil.setTransform(this._container,u,n):c.DomUtil.setPosition(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new c.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),c.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&c.canvas()||c.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===s)return!1;var e=this._paneRenderers[t];return e===s&&(e=c.SVG&&c.svg({pane:t})||c.Canvas&&c.canvas({pane:t}),this._paneRenderers[t]=e),e}}),c.Path=c.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return c.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(c.Browser.touch?10:0)}}),c.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,r=typeof Uint8Array!=s+""?Uint8Array:Array,o=new r(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var i,a=[];for(i=0;i<n;i++)o[i]&&a.push(t[i]);return a},_simplifyDPStep:function(t,e,n,r,o){var i,a,s,u=0;for(a=r+1;a<=o-1;a++)s=this._sqClosestPointOnSegment(t[a],t[r],t[o],!0),s>u&&(i=a,u=s);u>n&&(e[i]=1,this._simplifyDPStep(t,e,n,r,i),this._simplifyDPStep(t,e,n,i,o))},_reducePoints:function(t,e){for(var n=[t[0]],r=1,o=0,i=t.length;r<i;r++)this._sqDist(t[r],t[o])>e&&(n.push(t[r]),o=r);return o<i-1&&n.push(t[i-1]),n},clipSegment:function(t,e,n,r,o){var i,a,s,u=r?this._lastCode:this._getBitCode(t,n),c=this._getBitCode(e,n);for(this._lastCode=c;;){if(!(u|c))return[t,e];if(u&c)return!1;i=u||c,a=this._getEdgeIntersection(t,e,i,n,o),s=this._getBitCode(a,n),i===u?(t=a,u=s):(e=a,c=s)}},_getEdgeIntersection:function(t,e,n,r,o){var i,a,s=e.x-t.x,u=e.y-t.y,l=r.min,h=r.max;return 8&n?(i=t.x+s*(h.y-t.y)/u,a=h.y):4&n?(i=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(i=h.x,a=t.y+u*(h.x-t.x)/s):1&n&&(i=l.x,a=t.y+u*(l.x-t.x)/s),new c.Point(i,a,o)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},_sqClosestPointOnSegment:function(t,e,n,r){var o,i=e.x,a=e.y,s=n.x-i,u=n.y-a,l=s*s+u*u;return l>0&&(o=((t.x-i)*s+(t.y-a)*u)/l,o>1?(i=n.x,a=n.y):o>0&&(i+=s*o,a+=u*o)),s=t.x-i,u=t.y-a,r?s*s+u*u:new c.Point(i,a)}},c.Polyline=c.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){c.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,o=null,i=c.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,h=u.length;l<h;l++){e=u[l-1],n=u[l];var f=i(t,e,n,!0);f<r&&(r=f,o=i(t,e,n))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,o,i,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(o=s[t],i=s[t+1],n=o.distanceTo(i),r+=n,r>e)return a=(r-e)/n,this._map.layerPointToLatLng([i.x-a*(i.x-o.x),i.y-a*(i.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=c.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new c.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return c.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=c.Polyline._flat(t),r=0,o=t.length;r<o;r++)n?(e[r]=c.latLng(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new c.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new c.Point(e,e);
this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var r,o,i=t[0]instanceof c.LatLng,a=t.length;if(i){for(o=[],r=0;r<a;r++)o[r]=this._map.latLngToLayerPoint(t[r]),n.extend(o[r]);e.push(o)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,r,o,i,a,s,u=this._parts;for(e=0,r=0,o=this._rings.length;e<o;e++)for(s=this._rings[e],n=0,i=s.length;n<i-1;n++)a=c.LineUtil.clipSegment(s[n],s[n+1],t,n,!0),a&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==i-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=c.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),c.polyline=function(t,e){return new c.Polyline(t,e)},c.Polyline._flat=function(t){return!c.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},c.PolyUtil={},c.PolyUtil.clipPolygon=function(t,e,n){var r,o,i,a,s,u,l,h,f,d=[1,4,2,8],_=c.LineUtil;for(o=0,l=t.length;o<l;o++)t[o]._code=_._getBitCode(t[o],e);for(a=0;a<4;a++){for(h=d[a],r=[],o=0,l=t.length,i=l-1;o<l;i=o++)s=t[o],u=t[i],s._code&h?u._code&h||(f=_._getEdgeIntersection(u,s,h,e,n),f._code=_._getBitCode(f,e),r.push(f)):(u._code&h&&(f=_._getEdgeIntersection(u,s,h,e,n),f._code=_._getBitCode(f,e),r.push(f)),r.push(s));t=r}return t},c.Polygon=c.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,o,i,a,s,u,c=this._rings[0],l=c.length;if(!l)return null;for(i=a=s=0,t=0,e=l-1;t<l;e=t++)n=c[t],r=c[e],o=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*o,s+=(n.y+r.y)*o,i+=3*o;return u=0===i?c[0]:[a/i,s/i],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=c.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof c.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){c.Polyline.prototype._setLatLngs.call(this,t),c.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new c.Point(e,e);if(t=new c.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var r,o=0,i=this._rings.length;o<i;o++)r=c.PolyUtil.clipPolygon(this._rings[o],t,!0),r.length&&this._parts.push(r)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),c.polygon=function(t,e){return new c.Polygon(t,e)},c.Rectangle=c.Polygon.extend({initialize:function(t,e){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=c.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),c.rectangle=function(t,e){return new c.Rectangle(t,e)},c.CircleMarker=c.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){c.setOptions(this,e),this._latlng=c.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=c.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return c.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new c.Bounds(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),c.circleMarker=function(t,e){return new c.CircleMarker(t,e)},c.Circle=c.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=c.extend({},n,{radius:e})),c.setOptions(this,e),this._latlng=c.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new c.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:c.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===c.CRS.Earth.distance){var o=Math.PI/180,i=this._mRadius/c.CRS.Earth.R/o,a=n.project([e+i,t]),s=n.project([e-i,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,h=Math.acos((Math.cos(i*o)-Math.sin(e*o)*Math.sin(l*o))/(Math.cos(e*o)*Math.cos(l*o)))/o;(isNaN(h)||0===h)&&(h=i/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:Math.max(Math.round(u.x-n.project([l,t-h]).x),1),this._radiusY=Math.max(Math.round(u.y-a.y),1)}else{var f=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(f).x}this._updateBounds()}}),c.circle=function(t,e,n){return new c.Circle(t,e,n)},c.SVG=c.Renderer.extend({getEvents:function(){var t=c.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=c.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=c.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){c.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),c.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=c.SVG.create("path");t.options.className&&c.DomUtil.addClass(e,t.options.className),t.options.interactive&&c.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){c.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,c.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,r=t._radiusY||n,o="a"+n+","+r+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){c.DomUtil.toFront(t._path)},_bringToBack:function(t){c.DomUtil.toBack(t._path)}}),c.extend(c.SVG,{create:function(t){return a.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,r,o,i,a,s,u="";for(n=0,o=t.length;n<o;n++){for(a=t[n],r=0,i=a.length;r<i;r++)s=a[r],u+=(r?"L":"M")+s.x+" "+s.y;u+=e?c.Browser.svg?"z":"x":""}return u||"M0 0"}}),c.Browser.svg=!(!a.createElementNS||!c.SVG.create("svg").createSVGRect),c.svg=function(t){return c.Browser.svg||c.Browser.vml?new c.SVG(t):null},c.Browser.vml=!c.Browser.svg&&function(){try{var t=a.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),c.SVG.include(c.Browser.vml?{_initContainer:function(){this._container=c.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(c.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=c.SVG.create("shape");c.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=c.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;c.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[c.stamp(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,o=t._container;o.stroked=!!r.stroke,o.filled=!!r.fill,r.stroke?(e||(e=t._stroke=c.SVG.create("stroke")),o.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=c.Util.isArray(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(o.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=c.SVG.create("fill")),o.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){c.DomUtil.toFront(t._container)},_bringToBack:function(t){c.DomUtil.toBack(t._container)}}:{}),c.Browser.vml&&(c.SVG.create=function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return a.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),c.Canvas=c.Renderer.extend({getEvents:function(){var t=c.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){c.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=a.createElement("canvas");c.DomEvent.on(t,"mousemove",c.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},c.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=c.Browser.retina?2:1;c.DomUtil.setPosition(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",c.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){c.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[c.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),r=[];for(e=0;e<n.length;e++)r.push(Number(n[e]));t.options._dashArray=r}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||c.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new c.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,o,i,a=t._parts,s=a.length,u=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),u.setLineDash&&u.setLineDash(t.options&&t.options._dashArray||[]),n=0;n<s;n++){for(r=0,o=a[n].length;r<o;r++)i=a[n][r],u[r?"lineTo":"moveTo"](i.x,i.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=t._radius,o=(t._radiusY||r)/r;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,r,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(c.DomEvent._fakeStop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(c.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,o=this._drawFirst;o;o=o.next)n=o.layer,n.options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(c.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),c.Browser.canvas=function(){return!!a.createElement("canvas").getContext}(),c.canvas=function(t){return c.Browser.canvas?new c.Canvas(t):null},c.Polyline.prototype._containsPoint=function(t,e){var n,r,o,i,a,s,u=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,i=this._parts.length;n<i;n++)for(s=this._parts[n],r=0,a=s.length,o=a-1;r<a;o=r++)if((e||0!==r)&&c.LineUtil.pointToSegmentDistance(t,s[o],s[r])<=u)return!0;return!1},c.Polygon.prototype._containsPoint=function(t){var e,n,r,o,i,a,s,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(e=this._parts[o],i=0,u=e.length,a=u-1;i<u;a=i++)n=e[i],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||c.Polyline.prototype._containsPoint.call(this,t,!0)},c.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},c.GeoJSON=c.FeatureGroup.extend({initialize:function(t,e){c.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,o=c.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)r=o[e],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var i=this.options;if(i.filter&&!i.filter(t))return this;var a=c.GeoJSON.geometryToLayer(t,i);return a?(a.feature=c.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),i.onEachFeature&&i.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=c.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),c.extend(c.GeoJSON,{geometryToLayer:function(t,e){var n,r,o,i,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,h=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=h(s),l?l(t,n):new c.Marker(n);case"MultiPoint":for(o=0,i=s.length;o<i;o++)n=h(s[o]),u.push(l?l(t,n):new c.Marker(n));return new c.FeatureGroup(u);case"LineString":case"MultiLineString":return r=this.coordsToLatLngs(s,"LineString"===a.type?0:1,h),new c.Polyline(r,e);case"Polygon":case"MultiPolygon":return r=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,h),new c.Polygon(r,e);case"GeometryCollection":for(o=0,i=a.geometries.length;o<i;o++){var f=this.geometryToLayer({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);f&&u.push(f)}return new c.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new c.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var r,o=[],i=0,a=t.length;i<a;i++)r=e?this.coordsToLatLngs(t[i],e-1,n):(n||this.coordsToLatLng)(t[i]),o.push(r);return o},latLngToCoords:function(t){return t.alt!==s?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var r=[],o=0,i=t.length;o<i;o++)r.push(e?c.GeoJSON.latLngsToCoords(t[o],e-1,n):c.GeoJSON.latLngToCoords(t[o]));return!e&&n&&r.push(r[0]),r},getFeature:function(t,e){return t.feature?c.extend({},t.feature,{geometry:e}):c.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var f={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(f),c.Circle.include(f),c.CircleMarker.include(f),c.Polyline.prototype.toGeoJSON=function(){var t=!c.Polyline._flat(this._latlngs),e=c.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return c.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},c.Polygon.prototype.toGeoJSON=function(){var t=!c.Polyline._flat(this._latlngs),e=t&&!c.Polyline._flat(this._latlngs[0]),n=c.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),c.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},c.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON();n.push(e?r.geometry:c.GeoJSON.asFeature(r))}}),e?c.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),c.geoJSON=function(t,e){return new c.GeoJSON(t,e)},c.geoJson=c.geoJSON,c.Draggable=c.Evented.extend({options:{clickTolerance:3},statics:{START:c.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(c.DomEvent.on(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(c.Draggable._dragging===this&&this.finishDrag(),c.DomEvent.off(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!c.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(c.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(c.Draggable._dragging=this,this._preventOutline&&c.DomUtil.preventOutline(this._element),c.DomUtil.disableImageDrag(),c.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new c.Point(e.clientX,e.clientY),c.DomEvent.on(a,c.Draggable.MOVE[t.type],this._onMove,this).on(a,c.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new c.Point(e.clientX,e.clientY),r=n.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(c.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(r),c.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,i.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),c.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){c.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(c.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in c.Draggable.MOVE)c.DomEvent.off(a,c.Draggable.MOVE[t],this._onMove,this).off(a,c.Draggable.END[t],this._onUp,this);c.DomUtil.enableImageDrag(),c.DomUtil.enableTextSelection(),this._moved&&this._moving&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,c.Draggable._dragging=!1}}),c.Handler=c.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),c.Map.mergeOptions({dragging:!0,inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new c.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}c.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-grab"),c.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=c.latLngBounds(this._map.options.maxBounds);this._offsetLimit=c.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,o=(r-e+n)%t+e-n,i=(r+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(i+n)?o:i;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/i),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),h=s.multiplyBy(l/u),f=l/(n.inertiaDeceleration*a),d=h.multiplyBy(-f/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),c.Util.requestAnimFrame(function(){e.panBy(d,{duration:f,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),c.Map.addInitHook("addHandler","dragging",c.Map.Drag),c.Map.mergeOptions({doubleClickZoom:!0}),c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom),c.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),c.Map.ScrollWheelZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=c.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c.bind(this._performZoom,this),r),c.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,i=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?i:-i))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),c.Map.addInitHook("addHandler","scrollWheelZoom",c.Map.ScrollWheelZoom),c.extend(c.DomEvent,{_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",_touchend:c.Browser.msPointer?"MSPointerUp":c.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function r(t){var e;if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===t.pointerType)return;e=c.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var n=Date.now(),r=n-(i||n);a=t.touches?t.touches[0]:t,s=r>0&&r<=u,i=n}}function o(t){if(s&&!a.cancelBubble){if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===t.pointerType)return;var n,r,o={};for(r in a)n=a[r],o[r]=n&&n.bind?n.bind(a):n;a=o}a.type="dblclick",e(a),i=null}}var i,a,s=!1,u=250,l="_leaflet_",h=this._touchstart,f=this._touchend;return t[l+h+n]=r,t[l+f+n]=o,t[l+"dblclick"+n]=e,t.addEventListener(h,r,!1),t.addEventListener(f,o,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",r=t[n+this._touchstart+e],o=t[n+this._touchend+e],i=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,r,!1),t.removeEventListener(this._touchend,o,!1),c.Browser.edge||t.removeEventListener("dblclick",i,!1),this}}),c.extend(c.DomEvent,{POINTER_DOWN:c.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:c.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:c.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:c.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,r){return"touchstart"===e?this._addPointerStart(t,n,r):"touchmove"===e?this._addPointerMove(t,n,r):"touchend"===e&&this._addPointerEnd(t,n,r),this},removePointerListener:function(t,e,n){var r=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,r,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,r,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,r,!1),t.removeEventListener(this.POINTER_CANCEL,r,!1)),this},_addPointerStart:function(t,e,n){var r=c.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;c.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=r,t.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocListener){var o=c.bind(this._globalPointerUp,this);a.documentElement.addEventListener(this.POINTER_DOWN,c.bind(this._globalPointerDown,this),!0),
a.documentElement.addEventListener(this.POINTER_MOVE,c.bind(this._globalPointerMove,this),!0),a.documentElement.addEventListener(this.POINTER_UP,o,!0),a.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var n in this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var r=c.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=r,t.addEventListener(this.POINTER_MOVE,r,!1)},_addPointerEnd:function(t,e,n){var r=c.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1)}}),c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23,bounceAtZoomLimits:!0}),c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),c.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),c.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var i=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===i.x&&0===i.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest);var a=c.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=c.Util.requestAnimFrame(a,this,!0),c.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,c.Util.cancelAnimFrame(this._animRequest),c.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom),c.Map.mergeOptions({tap:!0,tapTolerance:15}),c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(c.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new c.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&c.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),c.DomEvent.on(a,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),c.DomEvent.off(a,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&c.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new c.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=a.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,i,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),c.Browser.touch&&!c.Browser.pointer&&c.Map.addInitHook("addHandler","tap",c.Map.Tap),c.Map.mergeOptions({boxZoom:!0}),c.Map.BoxZoom=c.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void c.DomEvent.on(a,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=c.DomUtil.create("div","leaflet-zoom-box",this._container),c.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new c.Bounds(this._point,this._startPoint),n=e.getSize();c.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(c.DomUtil.remove(this._box),c.DomUtil.removeClass(this._container,"leaflet-crosshair")),c.DomUtil.enableTextSelection(),c.DomUtil.enableImageDrag(),c.DomEvent.off(a,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(c.bind(this._resetState,this),0);var e=new c.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom),c.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),c.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),c.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=a.body,e=a.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),i.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)r[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)r[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)r[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)r[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)r[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)r[o.zoomOut[e]]=-t},_addHooks:function(){c.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(r._panAnim&&r._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=c.point(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;r.closePopup()}c.DomEvent.stop(t)}}}),c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard),c.Handler.MarkerDrag=c.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),c.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&c.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,r=c.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(r);n&&c.DomUtil.setPosition(n,r),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),c.Control=c.Class.extend({options:{position:"topright"},initialize:function(t){c.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return c.DomUtil.addClass(e,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(e,r.firstChild):r.appendChild(e),this},remove:function(){return this._map?(c.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),c.control=function(t){return new c.Control(t)},c.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var i=n+t+" "+n+o;e[t+o]=c.DomUtil.create("div",i,r)}var e=this._controlCorners={},n="leaflet-",r=this._controlContainer=c.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){c.DomUtil.remove(this._controlContainer)}}),c.Control.Zoom=c.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=c.DomUtil.create("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,o){var i=c.DomUtil.create("a",n,r);return i.innerHTML=t,i.href="#",i.title=e,i.setAttribute("role","button"),i.setAttribute("aria-label",e),c.DomEvent.on(i,"mousedown dblclick",c.DomEvent.stopPropagation).on(i,"click",c.DomEvent.stop).on(i,"click",o,this).on(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";c.DomUtil.removeClass(this._zoomInButton,e),c.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&c.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&c.DomUtil.addClass(this._zoomInButton,e)}}),c.Map.mergeOptions({zoomControl:!0}),c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))}),c.control.zoom=function(t){return new c.Control.Zoom(t)},c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){c.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent&&c.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),c.Map.mergeOptions({attributionControl:!0}),c.Map.addInitHook(function(){this.options.attributionControl&&(new c.Control.Attribution).addTo(this)}),c.control.attribution=function(t){return new c.Control.Attribution(t)},c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=c.DomUtil.create("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=c.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=c.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(o),this._updateScale(this._iScale,r+" ft",r/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),c.control.scale=function(t){return new c.Control.Scale(t)},c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){c.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(c.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):c.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return c.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=c.DomUtil.create("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),c.DomEvent.disableClickPropagation(e),c.Browser.touch||c.DomEvent.disableScrollPropagation(e);var r=this._form=c.DomUtil.create("form",t+"-list");n&&(this._map.on("click",this.collapse,this),c.Browser.android||c.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=c.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",c.Browser.touch?c.DomEvent.on(o,"click",c.DomEvent.stop).on(o,"click",this.expand,this):c.DomEvent.on(o,"focus",this.expand,this),c.DomEvent.on(r,"click",function(){setTimeout(c.bind(this._onInputClick,this),0)},this),n||this.expand(),this._baseLayersList=c.DomUtil.create("div",t+"-base",r),this._separator=c.DomUtil.create("div",t+"-separator",r),this._overlaysList=c.DomUtil.create("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(c.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;c.DomUtil.empty(this._baseLayersList),c.DomUtil.empty(this._overlaysList);var t,e,n,r,o=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,o+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=a.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=a.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(e=a.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),e.layerId=c.stamp(t.layer),c.DomEvent.on(e,"click",this._onInputClick,this);var o=a.createElement("span");o.innerHTML=" "+t.name;var i=a.createElement("div");n.appendChild(i),i.appendChild(e),i.appendChild(o);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,r=this._form.getElementsByTagName("input"),o=[],i=[];this._handlingClick=!0;for(var a=r.length-1;a>=0;a--)t=r[a],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?o.push(e):!t.checked&&n&&i.push(e);for(a=0;a<i.length;a++)this._map.removeLayer(i[a]);for(a=0;a<o.length;a++)this._map.addLayer(o[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),r=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==s&&r<e.options.minZoom||e.options.maxZoom!==s&&r>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),c.control.layers=function(t,e,n){return new c.Control.Layers(t,e,n)}}(window,document)},function(t,e,n){"use strict";function r(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t!==r&&u(this,t)}function i(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){_(function(){var r;try{r=e(n)}catch(e){return p.reject(t,e)}r===t?p.reject(t,new TypeError("Cannot resolve promise with itself")):p.resolve(t,r)})}function s(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){i||(i=!0,p.reject(t,e))}function r(e){i||(i=!0,p.resolve(t,e))}function o(){e(r,n)}var i=!1,a=c(o);"error"===a.status&&n(a.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function l(t){return t instanceof this?t:p.resolve(new this(r),t)}function h(t){var e=new this(r);return p.reject(e,t)}function f(t){function e(t,e){function r(t){a[e]=t,++s!==o||i||(i=!0,p.resolve(c,a))}n.resolve(t).then(r,function(t){i||(i=!0,p.reject(c,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),s=0,u=-1,c=new this(r);++u<o;)e(t[u],u);return c}function d(t){function e(t){n.resolve(t).then(function(t){i||(i=!0,p.resolve(s,t))},function(t){i||(i=!0,p.reject(s,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,s=new this(r);++a<o;)e(t[a]);return s}var _=n(0),p={},m=["REJECTED"],v=["FULFILLED"],g=["PENDING"];t.exports=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===v||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==g){var o=this.state===v?t:e;a(n,o,this.outcome)}else this.queue.push(new i(n,t,e));return n},i.prototype.callFulfilled=function(t){p.resolve(this.promise,t)},i.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},i.prototype.callRejected=function(t){p.reject(this.promise,t)},i.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},p.resolve=function(t,e){var n=c(s,e);if("error"===n.status)return p.reject(t,n.value);var r=n.value;if(r)u(t,r);else{t.state=v,t.outcome=e;for(var o=-1,i=t.queue.length;++o<i;)t.queue[o].callFulfilled(e)}return t},p.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},o.resolve=l,o.reject=h,o.all=f,o.race=d},function(t,e,n){"use strict";(function(e){function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function o(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function i(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}function a(t){if(t instanceof ArrayBuffer)return i(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}function s(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&no.call(n)==ro}function u(t){var e,n,r;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=u(t[n]);return e}if(t instanceof Date)return t.toISOString();if(o(t))return a(t);if(!s(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=u(t[n]);"undefined"!=typeof i&&(e[n]=i)}return e}function c(t){var e=!1;return Gr(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function l(t){return Gr(function(e){e=u(e);var n=this,r="function"==typeof e[e.length-1]&&e.pop(),o=new eo(function(r,o){var i;try{var a=c(function(t,e){t?o(t):r(e)});e.push(a),i=t.apply(n,e),i&&"function"==typeof i.then&&r(i)}catch(t){o(t)}});return r&&o.then(function(t){r(null,t)},r),o})}function h(t,e){function n(t,e,n){if(oo.enabled){for(var r=[t.name,e],o=0;o<n.length-1;o++)r.push(n[o]);oo.apply(null,r);var i=n[n.length-1];n[n.length-1]=function(n,r){var o=[t.name,e];o=o.concat(n?["error",n]:["success",r]),oo.apply(null,o),i(n,r)}}}return l(Gr(function(r){if(this._closed)return eo.reject(new Error("database is closed"));if(this._destroyed)return eo.reject(new Error("database is destroyed"));var o=this;return n(o,t,r),this.taskqueue.isReady?e.apply(this,r):new eo(function(e,n){o.taskqueue.addTask(function(i){i?n(i):e(o[t].apply(o,r))})})}))}function f(t,e){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];i in t&&(n[i]=t[i])}return n}function d(t){return"$"+t}function _(t){return t.substring(1)}function p(){this._store={}}function m(t){if(this._store=new p,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function v(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}function g(t){return t}function y(t){return[{ok:t}]}function b(t,e,n){function r(){var t=[];d.forEach(function(e){e.docs.forEach(function(n){t.push({id:e.id,docs:[n]})})}),n(null,{results:t})}function o(){++h===l&&r()}function i(t,e,n){d[t]={id:e,docs:n},o()}function a(){if(!(p>=_.length)){var t=Math.min(p+uo,_.length),e=_.slice(p,t);s(e,p),p+=e.length}}function s(n,r){n.forEach(function(n,o){var s=r+o,u=c.get(n),l=f(u[0],["atts_since","attachments"]);l.open_revs=u.map(function(t){return t.rev}),l.open_revs=l.open_revs.filter(g);var h=g;0===l.open_revs.length&&(delete l.open_revs,h=y),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(l[t]=e[t])}),t.get(n,l,function(t,e){var r;r=t?[{error:t}]:h(e),i(s,n,r),a()})})}var u=e.docs,c=new ao;u.forEach(function(t){c.has(t.id)?c.get(t.id).push(t):c.set(t.id,[t])});var l=c.size,h=0,d=new Array(l),_=[];c.forEach(function(t,e){_.push(e)});var p=0;a()}function w(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function T(){return so}function x(t){w()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):T()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function E(){Kr.EventEmitter.call(this),this._listeners={},x(this)}function k(t){if("undefined"!==console&&t in console){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function L(t,e){var n=6e5;t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=n>>1,e=n);var r=Math.random(),o=e-t;return~~(o*r+t)}function P(t){var e=0;return t||(e=2e3),L(t,e)}function S(t,e){k("info","The above "+t+" is totally normal. "+e)}function C(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}function D(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=C.prototype,new n(e)}function A(t){if("object"!=typeof t){var e=t;t=yo,t.data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function B(t,e,n){try{return!t(e,n)}catch(t){var r="Filter function threw: "+t.toString();return D(xo,r)}}function O(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(r){r.doc||(r.doc={});var o=n&&B(t.filter,r.doc,e);if("object"==typeof o)return o;if(o)return!1;if(t.include_docs){if(!t.attachments)for(var i in r.doc._attachments)r.doc._attachments.hasOwnProperty(i)&&(r.doc._attachments[i].stub=!0)}else delete r.doc;return!0}}function M(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function N(){}function I(t){var e;if(t?"string"!=typeof t?e=D(mo):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=D(go)):e=D(vo),e)throw e}function R(t,e){return"listenerCount"in t?t.listenerCount(e):Kr.EventEmitter.listenerCount(t,e)}function U(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function q(t){var e=U(t);return e?e.join("/"):null}function j(t){for(var e=Oo.exec(t),n={},r=14;r--;){var o=Do[r],i=e[r]||"",a=["user","password"].indexOf(o)!==-1;n[o]=a?decodeURIComponent(i):i}return n[Ao]={},n[Do[12]].replace(Bo,function(t,e,r){e&&(n[Ao][e]=r)}),n}function z(t,e,n){return new eo(function(r,o){t.get(e,function(i,a){if(i){if(404!==i.status)return o(i);a={}}var s=a._rev,u=n(a);return u?(u._id=e,u._rev=s,void r(Z(t,u,n))):r({updated:!1,rev:s})})})}function Z(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(r){if(409!==r.status)throw r;return z(t,e._id,n)})}function F(t){return 0|Math.random()*t}function W(t,e){e=e||Mo.length;var n="",r=-1;if(t){for(;++r<t;)n+=Mo[F(e)];return n}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=Mo[3&F(16)|8];break;default:n+=Mo[F(16)]}return n}function H(t){for(var e,n,r,o,i=t.rev_tree.slice();o=i.pop();){var a=o.ids,s=a[2],u=o.pos;if(s.length)for(var c=0,l=s.length;c<l;c++)i.push({pos:u+1,ids:s[c]});else{var h=!!a[1].deleted,f=a[0];e&&!(r!==h?r:n!==u?n<u:e<f)||(e=f,n=u,r=h)}}return n+"-"+e}function J(t,e){for(var n,r=t.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=e(0===a.length,o,i[0],n.ctx,i[1]),u=0,c=a.length;u<c;u++)r.push({pos:o+1,ids:a[u],ctx:s})}function G(t,e){return t.pos-e.pos}function V(t){var e=[];J(t,function(t,n,r,o,i){t&&e.push({rev:n+"-"+r,pos:n,opts:i})}),e.sort(G).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function K(t){for(var e=H(t),n=V(t.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===e||a.opts.deleted||r.push(a.rev)}return r}function X(t){var e=[];return J(t.rev_tree,function(t,n,r,o,i){"available"!==i.status||t||(e.push(n+"-"+r),
i.status="missing")}),e}function Y(t){for(var e,n=[],r=t.slice();e=r.pop();){var o=e.pos,i=e.ids,a=i[0],s=i[1],u=i[2],c=0===u.length,l=e.history?e.history.slice():[];l.push({id:a,opts:s}),c&&n.push({pos:o+1-l.length,ids:l});for(var h=0,f=u.length;h<f;h++)r.push({pos:o+1,ids:u[h],history:l})}return n.reverse()}function Q(t,e){return t.pos-e.pos}function $(t,e,n){for(var r,o=0,i=t.length;o<i;)r=o+i>>>1,n(t[r],e)<0?o=r+1:i=r;return o}function tt(t,e,n){var r=$(t,e,n);t.splice(r,0,e)}function et(t,e){for(var n,r,o=e,i=t.length;o<i;o++){var a=t[o],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function nt(t,e){return t[0]<e[0]?-1:1}function rt(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var o=n.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(i[2][0]){for(var u=!1,c=0;c<i[2].length;c++)i[2][c][0]===a[2][s][0]&&(n.push({tree1:i[2][c],tree2:a[2][s]}),u=!0);u||(r="new_branch",tt(i[2],a[2][s],nt))}else r="new_leaf",i[2][0]=a[2][s]}return{conflicts:r,tree:t}}function ot(t,e,n){var r,o=[],i=!1,a=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var s=0,u=t.length;s<u;s++){var c=t[s];if(c.pos===e.pos&&c.ids[0]===e.ids[0])r=rt(c.ids,e.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(n!==!0){var l=c.pos<e.pos?c:e,h=c.pos<e.pos?e:c,f=h.pos-l.pos,d=[],_=[];for(_.push({ids:l.ids,diff:f,parent:null,parentIdx:null});_.length>0;){var p=_.pop();if(0!==p.diff)for(var m=p.ids[2],v=0,g=m.length;v<g;v++)_.push({ids:m[v],diff:p.diff-1,parent:p.ids,parentIdx:v});else p.ids[0]===h.ids[0]&&d.push(p)}var y=d[0];y?(r=rt(y.ids,h.ids),y.parent[2][y.parentIdx]=r.tree,o.push({pos:l.pos,ids:l.ids}),i=i||r.conflicts,a=!0):o.push(c)}else o.push(c)}return a||o.push(e),o.sort(Q),{tree:o,conflicts:i||"internal_node"}}function it(t,e){for(var n,r=Y(t),o={},i=0,a=r.length;i<a;i++){for(var s=r[i],u=s.ids,c=Math.max(0,u.length-e),l={pos:s.pos+c,ids:et(u,c)},h=0;h<c;h++){var f=s.pos+h+"-"+u[h].id;o[f]=!0}n=n?ot(n,l,!0).tree:[l]}return J(n,function(t,e,n){delete o[e+"-"+n]}),{tree:n,revs:Object.keys(o)}}function at(t,e,n){var r=ot(t,e),o=it(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function st(t,e){for(var n,r=t.slice(),o=e.split("-"),i=parseInt(o[0],10),a=o[1];n=r.pop();){if(n.pos===i&&n.ids[0]===a)return!0;for(var s=n.ids[2],u=0,c=s.length;u<c;u++)r.push({pos:n.pos+1,ids:s[u]})}return!1}function ut(t){return t.ids}function ct(t,e){e||(e=H(t));for(var n,r=e.substring(e.indexOf("-")+1),o=t.rev_tree.map(ut);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}}function lt(t){return/^_local/.test(t)}function ht(t,e){for(var n,r=e.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,a=i[0],s=i[1],u=i[2],c=0===u.length,l=n.history?n.history.slice():[];if(l.push({id:a,pos:o,opts:s}),c)for(var h=0,f=l.length;h<f;h++){var d=l[h],_=d.pos+"-"+d.id;if(_===t)return o+"-"+a}for(var p=0,m=u.length;p<m;p++)r.push({pos:o+1,ids:u[p],history:l})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function ft(t){return Qr('"use strict";\nreturn '+t+";",{})}function dt(t){var e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return Qr(e,{})}function _t(t,e){try{t.emit("change",e)}catch(t){k("error",'Error in .on("change", function):',t)}}function pt(t,e,n){function r(){o.cancel()}Kr.EventEmitter.call(this);var o=this;this.db=t,e=e?u(e):{};var i=e.complete=c(function(e,n){e?R(o,"error")>0&&o.emit("error",e):o.emit("complete",n),o.removeAllListeners(),t.removeListener("destroyed",r)});n&&(o.on("complete",function(t){n(null,t)}),o.on("error",n)),t.once("destroyed",r),e.onChange=function(t){o.isCancelled||_t(o,t)};var a=new eo(function(t,n){e.complete=function(e,r){e?n(e):t(r)}});o.once("cancel",function(){t.removeListener("destroyed",r),e.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(t){i(null,t)},i),t.taskqueue.isReady?o.doChanges(e):t.taskqueue.addTask(function(t){t?e.complete(t):o.isCancelled?o.emit("cancel"):o.doChanges(e)})}function mt(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=V(e.rev_tree).map(function(t){return{rev:t.rev}}));var o={id:e.id,changes:r,doc:t};return ct(e,t._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=K(e),o.doc._conflicts.length||delete o.doc._conflicts),o}function vt(t,e){return t<e?-1:t>e?1:0}function gt(t){return function(e,n){e||n[0]&&n[0].error?t(e||n[0]):t(null,n.length?n[0]:n)}}function yt(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=f(n._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}function bt(t,e){var n=vt(t._id,e._id);if(0!==n)return n;var r=t._revisions?t._revisions.start:0,o=e._revisions?e._revisions.start:0;return vt(r,o)}function wt(t){var e={},n=[];return J(t,function(t,r,o,i){var a=r+"-"+o;return t&&(e[a]=0),void 0!==i&&n.push({from:i,to:a}),a}),n.reverse(),n.forEach(function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])}),e}function Tt(t,e,n){var r="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;if(e.descending&&r.reverse(),!r.length)return t._allDocs({limit:0},n);var o={offset:e.skip};return eo.all(r.map(function(n){var r=lo({key:n,deleted:"ok"},e);return["limit","skip","keys"].forEach(function(t){delete r[t]}),new eo(function(e,i){t._allDocs(r,function(t,r){return t?i(t):(o.total_rows=r.total_rows,void e(r.rows[0]||{key:n,error:"not_found"}))})})})).then(function(t){return o.rows=t,o})}function xt(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,function(e,n){e?r(e):r(null,n),Yr(function(){t._compactionQueue.shift(),t._compactionQueue.length&&xt(t)})})})}function Et(t){return"_"===t.charAt(0)&&t+"is not a valid attachment name, attachment names cannot start with '_'"}function kt(){Kr.EventEmitter.call(this)}function Lt(){this.isReady=!1,this.failed=!1,this.queue=[]}function Pt(t,e){var n=t.match(/([a-z\-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Ct.adapters,o=Ct.preferredAdapters,i=Ct.prefix,a=e.adapter;if(!a)for(var s=0;s<o.length;++s){a=o[s];{if(!("idb"===a&&"websql"in r&&T()&&localStorage["_pouch__websqldb_"+i+t]))break;k("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var u=r[a],c=!(u&&"use_prefix"in u)||u.use_prefix;return{name:c?i+t:t,adapter:a}}function St(t){function e(){t.removeListener("closed",r),t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.removeListener("closed",r),t.emit("destroyed")}function r(){t.removeListener("destroyed",e),o.delete(t.name)}var o=t.constructor._destructionListeners;t.once("destroyed",e),t.once("closed",r),o.has(t.name)||o.set(t.name,[]),o.get(t.name).push(n)}function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(e=t,t=e.name,delete e.name),this.__opts=e=u(e),n.auto_compaction=e.auto_compaction,n.prefix=Ct.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var r=(e.prefix||"")+t,o=Pt(r,e);if(e.name=o.name,e.adapter=e.adapter||o.adapter,n.name=t,n._adapter=e.adapter,Vr("pouchdb:adapter")("Picked adapter: "+e.adapter),!Ct.adapters[e.adapter]||!Ct.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);kt.call(n),n.taskqueue=new Lt,n.adapter=e.adapter,Ct.adapters[e.adapter].call(n,e,function(t){return t?n.taskqueue.fail(t):(St(n),n.emit("created",n),Ct.emit("created",n.name),void n.taskqueue.ready(n))})}function Dt(t){Object.keys(Kr.EventEmitter.prototype).forEach(function(e){"function"==typeof Kr.EventEmitter.prototype[e]&&(t[e]=No[e].bind(No))});var e=t._destructionListeners=new ao;t.on("destroyed",function(t){e.get(t).forEach(function(t){t()}),e.delete(t)})}function At(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}function Bt(t){if(!/^\d+\-./.test(t))return D(Po);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function Ot(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,o=[r[0],e,[]],i=1,a=r.length;i<a;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}function Mt(t,e){var n,r,o,i={status:"available"};if(t._deleted&&(i.deleted=!0),e)if(t._id||(t._id=W()),r=W(32,16).toLowerCase(),t._rev){if(o=Bt(t._rev),o.error)return o;t._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,i,[]]]]}],n=o.prefix+1}else t._rev_tree=[{pos:1,ids:[r,i,[]]}],n=1;else if(t._revisions&&(t._rev_tree=Ot(t._revisions,i),n=t._revisions.start,r=t._revisions.ids[0]),!t._rev_tree){if(o=Bt(t._rev),o.error)return o;n=o.prefix,r=o.id,t._rev_tree=[{pos:n,ids:[r,i,[]]}]}I(t._id),t._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var u="_"===s[0];if(u&&!Uo[s]){var c=D(To,s);throw c.message=To.message+": "+s,c}u&&!qo[s]?a.metadata[s.slice(1)]=t[s]:a.data[s]=t[s]}return a}function Nt(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function It(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}function Rt(t,e){return Nt([It(t)],{type:e})}function Ut(t,e){return Rt(jo(t),e)}function qt(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,o=0;o<r;o++)e+=String.fromCharCode(n[o]);return e}function jt(t,e){if("undefined"==typeof FileReader)return e(qt((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";return r?e(n):void e(qt(n))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function zt(t,e){jt(t,function(t){e(t)})}function Zt(t,e){zt(t,function(t){e(zo(t))})}function Ft(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}function Wt(t){return zo(t)}function Ht(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}function Jt(t,e,n,r,o){(n>0||r<e.size)&&(e=Ht(e,n,r)),Ft(e,function(e){t.append(e),o()})}function Gt(t,e,n,r,o){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),o()}function Vt(t,e){function n(){Zo(o)}function r(){var t=l.end(!0),n=Wt(t);e(n),l.destroy()}function o(){var e=c*s,o=e+s;c++,c<u?h(l,t,e,o,n):h(l,t,e,o,r)}var i="string"==typeof t,a=i?t.length:t.size,s=Math.min(Fo,a),u=Math.ceil(a/s),c=0,l=i?new $r:new $r.ArrayBuffer,h=i?Gt:Jt;o()}function Kt(t){return $r.hash(t)}function Xt(t){try{return jo(t)}catch(t){var e=D(bo,"Attachment is not a valid base64 string");return{error:e}}}function Yt(t,e,n){var r=Xt(t.data);return r.error?n(r.error):(t.length=r.length,"blob"===e?t.data=Rt(r,t.content_type):"base64"===e?t.data=zo(r):t.data=r,void Vt(r,function(e){t.digest="md5-"+e,n()}))}function Qt(t,e,n){Vt(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,"binary"===e?zt(t.data,function(e){t.data=e,n()}):"base64"===e?Zt(t.data,function(e){t.data=e,n()}):n()})}function $t(t,e,n){return t.stub?n():void("string"==typeof t.data?Yt(t,e,n):Qt(t,e,n))}function te(t,e,n){function r(){i++,t.length===i&&(o?n(o):n())}if(!t.length)return n();var o,i=0;t.forEach(function(t){function n(t){o=t,a++,a===i.length&&r()}var i=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],a=0;if(!i.length)return r();for(var s in t.data._attachments)t.data._attachments.hasOwnProperty(s)&&$t(t.data._attachments[s],e,n)})}function ee(t,e,n,r,o,i,a,s){if(st(e.rev_tree,n.metadata.rev))return r[o]=n,i();var u=e.winningRev||H(e),c="deleted"in e?e.deleted:ct(e,u),l="deleted"in n.metadata?n.metadata.deleted:ct(n.metadata),h=/^1-/.test(n.metadata.rev);if(c&&!l&&s&&h){var f=n.data;f._rev=u,f._id=n.metadata.id,n=Mt(f,s)}var d=at(e.rev_tree,n.metadata.rev_tree[0],t),_=s&&(c&&l||!c&&"new_leaf"!==d.conflicts||c&&!l&&"new_branch"===d.conflicts);if(_){var p=D(po);return r[o]=p,i()}var m=n.metadata.rev;n.metadata.rev_tree=d.tree,n.stemmedRevs=d.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var v,g=H(n.metadata),y=ct(n.metadata,g),b=c===y?0:c<y?-1:1;v=m===g?y:ct(n.metadata,m),a(n,g,y,v,!0,b,o,i)}function ne(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}function re(t,e,n,r,o,i,a,s,u){function c(t,e,n){var r=H(t.metadata),o=ct(t.metadata,r);if("was_delete"in s&&o)return i[e]=D(_o,"deleted"),n();var u=h&&ne(t);if(u){var c=D(po);return i[e]=c,n()}var l=o?0:1;a(t,r,o,o,!1,l,e,n)}function l(){++d===_&&u&&u()}t=t||1e3;var h=s.new_edits,f=new ao,d=0,_=e.length;e.forEach(function(t,e){if(t._id&&lt(t._id)){var r=t._deleted?"_removeLocal":"_putLocal";return void n[r](t,{ctx:o},function(t,n){i[e]=t||n,l()})}var a=t.metadata.id;f.has(a)?(_--,f.get(a).push([t,e])):f.set(a,[[t,e]])}),f.forEach(function(e,n){function o(){++u<e.length?s():l()}function s(){var s=e[u],l=s[0],f=s[1];if(r.has(n))ee(t,r.get(n),l,i,f,o,a,h);else{var d=at([],l.metadata.rev_tree[0],t);l.metadata.rev_tree=d.tree,l.stemmedRevs=d.stemmedRevs||[],c(l,f,o)}}var u=0;s()})}function oe(t){try{return JSON.parse(t)}catch(e){return to.parse(t)}}function ie(t){try{return JSON.stringify(t)}catch(e){return to.stringify(t)}}function ae(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(D(ko,n,e.type))}}function se(t,e,n){return{data:ie(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function ue(t){if(!t)return null;var e=oe(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function ce(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function le(t,e,n,r){n?r(t?"string"!=typeof t?t:Ut(t,e):Nt([""],{type:e})):t?"string"!=typeof t?jt(t,function(t){r(zo(t))}):r(t):r("")}function he(t,e,n,r){function o(){++s===a.length&&r&&r()}function i(t,e){var r=t._attachments[e],i=r.digest,a=n.objectStore(Go).get(i);a.onsuccess=function(t){r.body=t.target.result.body,o()}}var a=Object.keys(t._attachments||{});if(!a.length)return r&&r();var s=0;a.forEach(function(n){e.attachments&&e.include_docs?i(t,n):(t._attachments[n].stub=!0,o())})}function fe(t,e){return eo.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return eo.all(n.map(function(n){var r=t.doc._attachments[n];if("body"in r){var o=r.body,i=r.content_type;return new eo(function(a){le(o,i,e,function(e){t.doc._attachments[n]=lo(f(r,["digest","content_type"]),{data:e}),a()})})}}))}}))}function de(t,e,n){function r(){c--,c||o()}function o(){i.length&&i.forEach(function(t){var e=u.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::ï¿¿",!1,!1));e.onsuccess=function(e){var n=e.target.result;n||s.delete(t)}})}var i=[],a=n.objectStore(Jo),s=n.objectStore(Go),u=n.objectStore(Vo),c=t.length;t.forEach(function(t){var n=a.index("_doc_id_rev"),o=e+"::"+t;n.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return r();a.delete(e);var n=u.index("seq").openCursor(IDBKeyRange.only(e));n.onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];i.push(n),u.delete(e.primaryKey),e.continue()}else r()}}})}function _e(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}function pe(t,e,n,r,o,i){function a(){var t=[Ho,Jo,Go,Xo,Vo,Ko],e=_e(o,t,"readwrite");return e.error?i(e.error):(y=e.txn,y.onabort=ae(i),y.ontimeout=ae(i),y.oncomplete=h,b=y.objectStore(Ho),w=y.objectStore(Jo),T=y.objectStore(Go),x=y.objectStore(Vo),E=y.objectStore(Ko),E.get(Ko).onsuccess=function(t){L=t.target.result,c()},void d(function(t){return t?(I=!0,i(t)):void l()}))}function s(){B=!0,c()}function u(){re(t.revs_limit,P,r,N,y,M,_,n,s)}function c(){L&&B&&(L.docCount+=O,E.put(L))}function l(){function t(){++n===P.length&&u()}function e(e){var n=ue(e.target.result);n&&N.set(n.id,n),t()}if(P.length)for(var n=0,r=0,o=P.length;r<o;r++){var i=P[r];if(i._id&&lt(i._id))t();else{var a=b.get(i.metadata.id);a.onsuccess=e}}}function h(){I||(Qo.notify(r._meta.name),i(null,M))}function f(t,e){var n=T.get(t);n.onsuccess=function(n){if(n.target.result)e();else{var r=D(So,"unknown stub attachment with digest "+t);r.status=412,e(r)}}}function d(t){function e(){++o===n.length&&t(r)}var n=[];if(P.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,o=0;n.forEach(function(t){f(t,function(t){t&&!r&&(r=t),e()})})}function _(t,e,n,r,o,i,a,s){t.metadata.winningRev=e,t.metadata.deleted=n;var u=t.data;u._id=t.metadata.id,u._rev=t.metadata.rev,r&&(u._deleted=!0);var l=u._attachments&&Object.keys(u._attachments).length;return l?m(t,e,n,o,a,s):(O+=i,c(),void p(t,e,n,o,a,s))}function p(t,e,n,o,i,a){function s(i){var a=t.stemmedRevs||[];o&&r.auto_compaction&&(a=a.concat(X(t.metadata))),a&&a.length&&de(a,t.metadata.id,y),h.seq=i.target.result;var s=se(h,e,n),u=b.put(s);u.onsuccess=c}function u(t){t.preventDefault(),t.stopPropagation();var e=w.index("_doc_id_rev"),n=e.getKey(l._doc_id_rev);n.onsuccess=function(t){var e=w.put(l,t.target.result);e.onsuccess=s}}function c(){M[i]={ok:!0,id:h.id,rev:h.rev},N.set(t.metadata.id,t.metadata),v(t,h.seq,a)}var l=t.data,h=t.metadata;l._doc_id_rev=h.id+"::"+h.rev,delete l._id,delete l._rev;var f=w.put(l);f.onsuccess=s,f.onerror=u}function m(t,e,n,r,o,i){function a(){c===l.length&&p(t,e,n,r,o,i)}function s(){c++,a()}var u=t.data,c=0,l=Object.keys(u._attachments);l.forEach(function(n){var r=t.data._attachments[n];if(r.stub)c++,a();else{var o=r.data;delete r.data,r.revpos=parseInt(e,10);var i=r.digest;g(i,o,s)}})}function v(t,e,n){function r(){++i===a.length&&n()}function o(n){var o=t.data._attachments[n].digest,i=x.put({seq:e,digestSeq:o+"::"+e});i.onsuccess=r,i.onerror=function(t){t.preventDefault(),t.stopPropagation(),r()}}var i=0,a=Object.keys(t.data._attachments||{});if(!a.length)return n();for(var s=0;s<a.length;s++)o(a[s])}function g(t,e,n){var r=T.count(t);r.onsuccess=function(r){var o=r.target.result;if(o)return n();var i={digest:t,body:e},a=T.put(i);a.onsuccess=n}}for(var y,b,w,T,x,E,k,L,P=e.docs,S=0,C=P.length;S<C;S++){var A=P[S];A._id&&lt(A._id)||(A=P[S]=Mt(A,n.new_edits),A.error&&!k&&(k=A))}if(k)return i(k);var B=!1,O=0,M=new Array(P.length),N=new ao,I=!1,R=r._meta.blobSupport?"blob":"base64";te(P,R,function(t){return t?i(t):void a()})}function me(t,e,n,r,o){function i(t){l=t.target.result,c&&o(c,l,h)}function a(t){c=t.target.result,l&&o(c,l,h)}function s(){if(!c.length)return o();var n,s=c[c.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(s,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return o()}else n=IDBKeyRange.lowerBound(s,!0);e=n,c=null,l=null,t.getAll(e,r).onsuccess=i,t.getAllKeys(e,r).onsuccess=a}function u(t){var e=t.target.result;return e?void o([e.key],[e.value],e):o()}var c,l,h,f="function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&r>1&&!n;f?(h={continue:s},t.getAll(e,r).onsuccess=i,t.getAllKeys(e,r).onsuccess=a):n?t.openCursor(e,"prev").onsuccess=u:t.openCursor(e).onsuccess=u}function ve(t,e,n){function r(t){var e=t.target.result;e?(o.push(e.value),e.continue()):n({target:{result:o}})}if("function"==typeof t.getAll)return void(t.getAll(e).onsuccess=n);var o=[];t.openCursor(e).onsuccess=r}function ge(t,e,n,r,o){try{if(t&&e)return o?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return o?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return o?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(t){return{error:t}}return null}function ye(t,e,n){function r(e,n,r){var o=e.id+"::"+r;k.get(o).onsuccess=function(r){if(n.doc=ce(r.target.result),t.conflicts){var o=K(e);o.length&&(n.doc._conflicts=o)}he(n.doc,t,b)}}function o(e,n){var o={id:n.id,key:n.id,value:{rev:e}},i=n.deleted;"ok"===t.deleted?(L.push(o),i?(o.value.deleted=!0,o.doc=null):t.include_docs&&r(n,o,e)):!i&&d--<=0&&(L.push(o),t.include_docs&&r(n,o,e))}function i(t){for(var e=0,n=t.length;e<n&&L.length!==_;e++){var r=t[e],i=ue(r),a=i.winningRev;o(a,i)}}function a(t,e,n){n&&(i(e),L.length<_&&n.continue())}function s(e){var n=e.target.result;t.descending&&(n=n.reverse()),i(n)}function u(){n(null,{total_rows:w,offset:t.skip,rows:L})}function c(){t.attachments?fe(L,t.binary).then(u):u()}var l="startkey"in t&&t.startkey,h="endkey"in t&&t.endkey,f="key"in t&&t.key,d=t.skip||0,_="number"==typeof t.limit?t.limit:-1,p=t.inclusive_end!==!1,m=ge(l,h,p,f,t.descending),v=m&&m.error;if(v&&("DataError"!==v.name||0!==v.code))return n(D(ko,v.name,v.message));var g=[Ho,Jo,Ko];t.attachments&&g.push(Go);var y=_e(e,g,"readonly");if(y.error)return n(y.error);var b=y.txn;b.oncomplete=c,b.onabort=ae(n);var w,T=b.objectStore(Ho),x=b.objectStore(Jo),E=b.objectStore(Ko),k=x.index("_doc_id_rev"),L=[];return E.get(Ko).onsuccess=function(t){w=t.target.result.docCount},v||0===_?void 0:_===-1?ve(T,m,s):void me(T,m,t.descending,_+d,a)}function be(t){return new eo(function(e){var n=Nt([""]),r=t.objectStore(Yo).put(n,"key");r.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}}).catch(function(){return!1})}function we(t,e){var n=t.objectStore(Ho).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}function Te(t,e,n,r){try{t(e,n)}catch(t){r.emit("error",t)}}function xe(){!$o&&ti.length&&($o=!0,ti.shift()())}function Ee(t,e,n){ti.push(function(){t(function(t,r){Te(e,t,r,n),$o=!1,Yr(function(){xe(n)})})}),xe()}function ke(t,e,n,r){function o(e,n,r){function o(e,n){var r=t.processChange(n,e,t);f=r.seq=e.seq;var o=w(r);return"object"==typeof o?t.complete(o):void(o&&(b++,_&&y.push(r),t.attachments&&t.include_docs?he(n,t,p,function(){fe([r],t.binary).then(function(){t.onChange(r)})}):t.onChange(r)))}function i(){for(var t=0,e=s.length;t<e&&b!==d;t++){var n=s[t];if(n){var i=u[t];o(i,n)}}b!==d&&r.continue()}if(r&&e.length){var s=new Array(e.length),u=new Array(e.length),c=0;n.forEach(function(t,n){var r=ce(t),o=e[n];a(r,o,function(t,r){u[n]=t,s[n]=r,++c===e.length&&i()})})}}function i(t,e,n,r){if(n.seq!==e)return r();if(n.winningRev===t._rev)return r(n,t);var o=t._id+"::"+n.winningRev,i=g.get(o);i.onsuccess=function(t){r(n,ce(t.target.result))}}function a(t,e,n){if(h&&!h.has(t._id))return n();var r=T.get(t._id);return r?i(t,e,r,n):void(v.get(t._id).onsuccess=function(o){r=ue(o.target.result),T.set(t._id,r),i(t,e,r,n)})}function s(){t.complete(null,{results:y,last_seq:f})}function c(){!t.continuous&&t.attachments?fe(y).then(s):s()}if(t=u(t),t.continuous){var l=n+":"+W();return Qo.addListener(n,l,e,t),Qo.notify(n),{cancel:function(){Qo.removeListener(n,l)}}}var h=t.doc_ids&&new io(t.doc_ids);t.since=t.since||0;var f=t.since,d="limit"in t?t.limit:-1;0===d&&(d=1);var _;_="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var p,m,v,g,y=[],b=0,w=O(t),T=new ao,x=[Ho,Jo];t.attachments&&x.push(Go);var E=_e(r,x,"readonly");if(E.error)return t.complete(E.error);p=E.txn,p.onabort=ae(t.complete),p.oncomplete=c,m=p.objectStore(Jo),v=p.objectStore(Ho),g=m.index("_doc_id_rev");var k=t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null;me(m,k,t.descending,d,o)}function Le(t,e){var n=this;Ee(function(e){Pe(n,t,e)},e,n.constructor)}function Pe(t,e,n){function r(t){var e=t.createObjectStore(Ho,{keyPath:"id"});t.createObjectStore(Jo,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Go,{keyPath:"digest"}),t.createObjectStore(Ko,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(Yo),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Xo,{keyPath:"_id"});var n=t.createObjectStore(Vo,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function o(t,e){var n=t.objectStore(Ho);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var o=r.value,i=ct(o);o.deletedOrLocal=i?"1":"0",n.put(o),r.continue()}else e()}}function i(t){t.createObjectStore(Xo,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function a(t,e){var n=t.objectStore(Xo),r=t.objectStore(Ho),o=t.objectStore(Jo),i=r.openCursor();i.onsuccess=function(t){var i=t.target.result;if(i){var a=i.value,s=a.id,u=lt(s),c=H(a);if(u){var l=s+"::"+c,h=s+"::",f=s+"::~",d=o.index("_doc_id_rev"),_=IDBKeyRange.bound(h,f,!1,!1),p=d.openCursor(_);p.onsuccess=function(t){if(p=t.target.result){var e=p.value;e._doc_id_rev===l&&n.put(e),o.delete(p.primaryKey),p.continue()}else r.delete(i.primaryKey),i.continue()}}else i.continue()}else e&&e()}}function s(t){var e=t.createObjectStore(Vo,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function u(t,e){var n=t.objectStore(Jo),r=t.objectStore(Go),o=t.objectStore(Vo),i=r.count();i.onsuccess=function(t){var r=t.target.result;return r?void(n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var r=n.value,i=n.primaryKey,a=Object.keys(r._attachments||{}),s={},u=0;u<a.length;u++){var c=r._attachments[a[u]];s[c.digest]=!0}var l=Object.keys(s);for(u=0;u<l.length;u++){var h=l[u];o.put({seq:i,digestSeq:h+"::"+i})}n.continue()}):e()}}function c(t){function e(t){return t.data?ue(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(Jo),r=t.objectStore(Ho),o=r.openCursor();o.onsuccess=function(t){function o(){var t=s.id+"::",e=s.id+"::ï¿¿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),o=0;r.onsuccess=function(t){var e=t.target.result;if(!e)return s.seq=o,i();var n=e.primaryKey;n>o&&(o=n),e.continue()}}function i(){var t=se(s,s.winningRev,s.deleted),e=r.put(t);e.onsuccess=function(){a.continue()}}var a=t.target.result;if(a){var s=e(a.value);return s.winningRev=s.winningRev||H(s),s.seq?i():void o()}}}var h=e.name,f=null;t._meta=null,t.type=function(){return"idb"},t._id=l(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,r,o){pe(e,n,r,t,f,o)},t._get=function(t,e,n){function r(){n(a,{doc:o,metadata:i,ctx:s})}var o,i,a,s=e.ctx;if(!s){var u=_e(f,[Ho,Jo,Go],"readonly");if(u.error)return n(u.error);s=u.txn}s.objectStore(Ho).get(t).onsuccess=function(t){if(i=ue(t.target.result),!i)return a=D(_o,"missing"),r();var n;if(e.rev)n=e.latest?ht(e.rev,i):e.rev;else{n=i.winningRev;var u=ct(i);if(u)return a=D(_o,"deleted"),r()}var c=s.objectStore(Jo),l=i.id+"::"+n;c.index("_doc_id_rev").get(l).onsuccess=function(t){return o=t.target.result,o&&(o=ce(o)),o?void r():(a=D(_o,"missing"),r())}}},t._getAttachment=function(t,e,n,r,o){var i;if(r.ctx)i=r.ctx;else{var a=_e(f,[Ho,Jo,Go],"readonly");if(a.error)return o(a.error);i=a.txn}var s=n.digest,u=n.content_type;i.objectStore(Go).get(s).onsuccess=function(t){var e=t.target.result.body;le(e,u,r.binary,function(t){o(null,t)})}},t._info=function(e){var n,r,o=_e(f,[Ko,Jo],"readonly");if(o.error)return e(o.error);var i=o.txn;i.objectStore(Ko).get(Ko).onsuccess=function(t){r=t.target.result.docCount},i.objectStore(Jo).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},i.oncomplete=function(){e(null,{doc_count:r,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){ye(t,f,e)},t._changes=function(e){ke(e,t,h,f)},t._close=function(t){f.close(),ei.delete(h),t()},t._getRevisionTree=function(t,e){var n=_e(f,[Ho],"readonly");if(n.error)return e(n.error);var r=n.txn,o=r.objectStore(Ho).get(t);o.onsuccess=function(t){var n=ue(t.target.result);n?e(null,n.rev_tree):e(D(_o))}},t._doCompaction=function(t,e,n){var r=[Ho,Jo,Go,Vo],o=_e(f,r,"readwrite");if(o.error)return n(o.error);var i=o.txn,a=i.objectStore(Ho);a.get(t).onsuccess=function(n){var r=ue(n.target.result);J(r.rev_tree,function(t,n,r,o,i){var a=n+"-"+r;e.indexOf(a)!==-1&&(i.status="missing")}),de(e,t,i);var o=r.winningRev,a=r.deleted;i.objectStore(Ho).put(se(r,o,a))},i.onabort=ae(n),i.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=_e(f,[Xo],"readonly");if(n.error)return e(n.error);var r=n.txn,o=r.objectStore(Xo).get(t);o.onerror=ae(e),o.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(D(_o))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var r=t._rev,o=t._id;r?t._rev="0-"+(parseInt(r.split("-")[1],10)+1):t._rev="0-1";var i,a=e.ctx;if(!a){var s=_e(f,[Xo],"readwrite");if(s.error)return n(s.error);a=s.txn,a.onerror=ae(n),a.oncomplete=function(){i&&n(null,i)}}var u,c=a.objectStore(Xo);r?(u=c.get(o),u.onsuccess=function(o){var a=o.target.result;if(a&&a._rev===r){var s=c.put(t);s.onsuccess=function(){i={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,i)}}else n(D(po))}):(u=c.add(t),u.onerror=function(t){n(D(po)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){i={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,i)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var r=e.ctx;if(!r){var o=_e(f,[Xo],"readwrite");if(o.error)return n(o.error);r=o.txn,r.oncomplete=function(){i&&n(null,i)}}var i,a=t._id,s=r.objectStore(Xo),u=s.get(a);u.onerror=ae(n),u.onsuccess=function(r){var o=r.target.result;o&&o._rev===t._rev?(s.delete(a),i={ok:!0,id:a,rev:"0-0"},e.ctx&&n(null,i)):n(D(_o))}},t._destroy=function(t,e){Qo.removeAllListeners(h);var n=ni.get(h);n&&n.result&&(n.result.close(),ei.delete(h));var r=indexedDB.deleteDatabase(h);r.onsuccess=function(){ni.delete(h),T()&&h in localStorage&&delete localStorage[h],e(null,{ok:!0})},r.onerror=ae(e)};var d=ei.get(h);if(d)return f=d.idb,t._meta=d.global,Yr(function(){n(null,t)});var _;_=e.storage?Se(h,e.storage):indexedDB.open(h,Wo),ni.set(h,_),_.onupgradeneeded=function(t){function e(){var t=h[f-1];f++,t&&t(l,e)}var n=t.target.result;if(t.oldVersion<1)return r(n);var l=t.currentTarget.transaction;t.oldVersion<3&&i(n),t.oldVersion<4&&s(n);var h=[o,a,u,c],f=t.oldVersion;e()},_.onsuccess=function(e){function r(){"undefined"!=typeof s&&l&&(t._meta={name:h,instanceId:u,blobSupport:s},ei.set(h,{idb:f,global:t._meta}),n(null,t))}function o(){if("undefined"!=typeof a&&"undefined"!=typeof i){var t=h+"_id";t in i?u=i[t]:i[t]=u=W(),i.docCount=a,c.objectStore(Ko).put(i)}}f=e.target.result,f.onversionchange=function(){f.close(),ei.delete(h)},f.onabort=function(t){k("error","Database has a global failure",t.target.error),f.close(),ei.delete(h)};var i,a,s,u,c=f.transaction([Ko,Yo,Ho],"readwrite"),l=!1;c.objectStore(Ko).get(Ko).onsuccess=function(t){i=t.target.result||{id:Ko},o()},we(c,function(t){a=t,o()}),Ro||(Ro=be(c)),Ro.then(function(t){s=t,r()}),c.oncomplete=function(){l=!0,r()}},_.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";k("error",t),n(D(ko,t))}}function Se(t,e){try{return indexedDB.open(t,{version:Wo,storage:e})}catch(e){return indexedDB.open(t,Wo)}}function Ce(t){return decodeURIComponent(escape(t))}function De(t){return t<65?t-48:t-55}function Ae(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(De(t.charCodeAt(e++))<<4|De(t.charCodeAt(e++)));return r}function Be(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(De(t.charCodeAt(e+2))<<12|De(t.charCodeAt(e+3))<<8|De(t.charCodeAt(e))<<4|De(t.charCodeAt(e+1))),
e+=4;return r}function Oe(t,e){return"UTF-8"===e?Ce(Ae(t,0,t.length)):Be(t,0,t.length)}function Me(t){return"'"+t+"'"}function Ne(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function Ie(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function Re(t){return delete t._id,delete t._rev,JSON.stringify(t)}function Ue(t,e,n){return t=JSON.parse(t),t._id=e,t._rev=n,t}function qe(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function je(t,e,n,r,o){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function ze(t,e,n){function r(){++i===t.length&&o()}function o(){if(a.length){var t="SELECT DISTINCT digest AS digest FROM "+li+" WHERE seq IN "+qe(a.length);n.executeSql(t,a,function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).digest);if(n.length){var o="DELETE FROM "+li+" WHERE seq IN ("+a.map(function(){return"?"}).join(",")+")";t.executeSql(o,a,function(t){var e="SELECT digest FROM "+li+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";t.executeSql(e,n,function(t,e){for(var r=new io,o=0;o<e.rows.length;o++)r.add(e.rows.item(o).digest);n.forEach(function(e){r.has(e)||(t.executeSql("DELETE FROM "+li+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+si+" WHERE digest=?",[e]))})})})}})}}if(t.length){var i=0,a=[];t.forEach(function(t){var o="SELECT seq FROM "+ai+" WHERE doc_id=? AND rev=?";n.executeSql(o,[e,t],function(t,e){if(!e.rows.length)return r();var n=e.rows.item(0).seq;a.push(n),t.executeSql("DELETE FROM "+ai+" WHERE seq=?",[n],r)})})}}function Ze(t){return function(e){k("error","WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||e.type,o=e.target||e.message;t(D(Lo,o,r))}}function Fe(t){if("size"in t)return 1e6*t.size;var e="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return e?5e6:1}function We(t,e,n,r,o,i,a){function s(){return y?a(y):(i.notify(r._name),void a(null,b))}function u(t,e){var n="SELECT count(*) as cnt FROM "+si+" WHERE digest=?";g.executeSql(n,[t],function(n,r){if(0===r.rows.item(0).cnt){var o=D(So,"unknown stub attachment with digest "+t);e(o)}else e()})}function c(t){function e(){++o===n.length&&t(r)}var n=[];if(m.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,o=0;n.forEach(function(t){u(t,function(t){t&&!r&&(r=t),e()})})}function l(t,e,n,o,i,a,s,u){function c(){function e(t,e){function r(){return++i===a.length&&e(),!1}function o(e){var o="INSERT INTO "+li+" (digest, seq) VALUES (?,?)",i=[n._attachments[e].digest,t];g.executeSql(o,i,r,r)}var i=0,a=Object.keys(n._attachments||{});if(!a.length)return e();for(var s=0;s<a.length;s++)o(a[s])}var n=t.data,r=o?1:0,i=n._id,a=n._rev,s=Re(n),u="INSERT INTO "+ai+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[i,a,s,r];g.executeSql(u,c,function(t,n){var r=n.insertId;e(r,function(){f(t,r)})},function(){var t=je("seq",ai,null,"doc_id=? AND rev=?");return g.executeSql(t,[i,a],function(t,n){var o=n.rows.item(0).seq,u="UPDATE "+ai+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",c=[s,r,i,a];t.executeSql(u,c,function(t){e(o,function(){f(t,o)})})}),!1})}function l(t){_||(t?(_=t,u(_)):p===m.length&&c())}function h(t){p++,l(t)}function f(n,o){var a=t.metadata.id,c=t.stemmedRevs||[];i&&r.auto_compaction&&(c=X(t.metadata).concat(c)),c.length&&ze(c,a,n),t.metadata.seq=o;var l=t.metadata.rev;delete t.metadata.rev;var h=i?"UPDATE "+ii+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+ai+" WHERE doc_id="+ii+".id AND rev=?) WHERE id=?":"INSERT INTO "+ii+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=ie(t.metadata),d=i?[f,o,e,a]:[a,o,o,f];n.executeSql(h,d,function(){b[s]={ok:!0,id:t.metadata.id,rev:l},w.set(a,t.metadata),u()})}var _=null,p=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var m=Object.keys(t.data._attachments||{});o&&(t.data._deleted=!0),m.forEach(function(n){var r=t.data._attachments[n];if(r.stub)p++,l();else{var o=r.data;delete r.data,r.revpos=parseInt(e,10);var i=r.digest;d(i,o,h)}}),m.length||c()}function h(){re(t.revs_limit,m,r,w,g,b,l,n)}function f(t){function e(){++n===m.length&&t()}if(!m.length)return t();var n=0;m.forEach(function(t){if(t._id&&lt(t._id))return e();var n=t.metadata.id;g.executeSql("SELECT json FROM "+ii+" WHERE id = ?",[n],function(t,r){if(r.rows.length){var o=oe(r.rows.item(0).json);w.set(n,o)}e()})})}function d(t,e,n){var r="SELECT digest FROM "+si+" WHERE digest=?";g.executeSql(r,[t],function(o,i){return i.rows.length?n():(r="INSERT INTO "+si+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(r,[t,Ne(e)],function(){n()},function(){return n(),!1}))})}var _=n.new_edits,p=e.docs,m=p.map(function(t){if(t._id&&lt(t._id))return t;var e=Mt(t,_);return e}),v=m.filter(function(t){return t.error});if(v.length)return a(v[0]);var g,y,b=new Array(m.length),w=new ao;te(m,"binary",function(t){return t?a(t):void o.transaction(function(t){g=t,c(function(t){t?y=t:f(h)})},Ze(a),s)})}function He(t){return t.websql(t.name,t.version,t.description,t.size)}function Je(t){try{return{db:He(t)}}catch(t){return{error:t}}}function Ge(t){var e=hi.get(t.name);return e||(e=Je(t),hi.set(t.name,e)),e}function Ve(t,e,n,r,o){function i(){++u===s.length&&o&&o()}function a(t,o){var a=t._attachments[o],s={binary:e.binary,ctx:r};n._getAttachment(t._id,o,a,s,function(e,n){t._attachments[o]=lo(f(a,["digest","content_type"]),{data:n}),i()})}var s=Object.keys(t._attachments||{});if(!s.length)return o&&o();var u=0;s.forEach(function(n){e.attachments&&e.include_docs?a(t,n):(t._attachments[n].stub=!0,i())})}function Ke(t,e){function n(){T()&&(window.localStorage["_pouch__websqldb_"+b._name]=!0),e(null,b)}function r(t,e){t.executeSql(mi),t.executeSql("ALTER TABLE "+ai+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(_i),t.executeSql("ALTER TABLE "+ii+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+ii+" (local, id)");var n="SELECT "+ii+".winningseq AS seq, "+ii+".json AS metadata FROM "+ai+" JOIN "+ii+" ON "+ai+".seq = "+ii+".winningseq";t.executeSql(n,[],function(t,n){for(var r=[],o=[],i=0;i<n.rows.length;i++){var a=n.rows.item(i),s=a.seq,u=JSON.parse(a.metadata);ct(u)&&r.push(s),lt(u.id)&&o.push(u.id)}t.executeSql("UPDATE "+ii+"SET local = 1 WHERE id IN "+qe(o.length),o,function(){t.executeSql("UPDATE "+ai+" SET deleted = 1 WHERE seq IN "+qe(r.length),r,e)})})})})}function o(t,e){var n="CREATE TABLE IF NOT EXISTS "+ui+" (id UNIQUE, rev, json)";t.executeSql(n,[],function(){var n="SELECT "+ii+".id AS id, "+ai+".json AS data FROM "+ai+" JOIN "+ii+" ON "+ai+".seq = "+ii+".winningseq WHERE local = 1";t.executeSql(n,[],function(t,n){function r(){if(!o.length)return e(t);var n=o.shift(),i=JSON.parse(n.data)._rev;t.executeSql("INSERT INTO "+ui+" (id, rev, json) VALUES (?,?,?)",[n.id,i,n.data],function(t){t.executeSql("DELETE FROM "+ii+" WHERE id=?",[n.id],function(t){t.executeSql("DELETE FROM "+ai+" WHERE seq=?",[n.seq],function(){r()})})})}for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i));r()})})}function i(t,e){function n(n){function r(){if(!n.length)return e(t);var o=n.shift(),i=Oe(o.hex,y),a=i.lastIndexOf("::"),s=i.substring(0,a),u=i.substring(a+2),c="UPDATE "+ai+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(c,[s,u,i],function(){r()})}r()}var r="ALTER TABLE "+ai+" ADD COLUMN doc_id";t.executeSql(r,[],function(t){var e="ALTER TABLE "+ai+" ADD COLUMN rev";t.executeSql(e,[],function(t){t.executeSql(pi,[],function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+ai;t.executeSql(e,[],function(t,e){for(var r=[],o=0;o<e.rows.length;o++)r.push(e.rows.item(o));n(r)})})})})}function a(t,e){function n(t){var n="SELECT COUNT(*) AS cnt FROM "+si;t.executeSql(n,[],function(t,n){function r(){var n=je(bi+", "+ii+".id AS id",[ii,ai],yi,null,ii+".id ");n+=" LIMIT "+a+" OFFSET "+i,i+=a,t.executeSql(n,[],function(t,n){function o(t,e){var n=i[t]=i[t]||[];n.indexOf(e)===-1&&n.push(e)}if(!n.rows.length)return e(t);for(var i={},a=0;a<n.rows.length;a++)for(var s=n.rows.item(a),u=Ue(s.data,s.id,s.rev),c=Object.keys(u._attachments||{}),l=0;l<c.length;l++){var h=u._attachments[c[l]];o(h.digest,s.seq)}var f=[];if(Object.keys(i).forEach(function(t){var e=i[t];e.forEach(function(e){f.push([t,e])})}),!f.length)return r();var d=0;f.forEach(function(e){var n="INSERT INTO "+li+" (digest, seq) VALUES (?,?)";t.executeSql(n,e,function(){++d===f.length&&r()})})})}var o=n.rows.item(0).cnt;if(!o)return e(t);var i=0,a=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+li+" (digest, seq INTEGER)";t.executeSql(r,[],function(t){t.executeSql(gi,[],function(t){t.executeSql(vi,[],n)})})}function s(t,e){var n="ALTER TABLE "+si+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(n,[],e)}function c(t,e){var n="ALTER TABLE "+ii+" ADD COLUMN max_seq INTEGER";t.executeSql(n,[],function(t){var n="UPDATE "+ii+" SET max_seq=(SELECT MAX(seq) FROM "+ai+" WHERE doc_id=id)";t.executeSql(n,[],function(t){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+ii+" (max_seq)";t.executeSql(n,[],e)})})}function h(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,n){var r=n.rows.item(0).hex;y=2===r.length?"UTF-8":"UTF-16",e()})}function f(){for(;E.length>0;){var t=E.pop();t(null,w)}}function d(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+ci+" (dbid, db_version INTEGER)",u="CREATE TABLE IF NOT EXISTS "+si+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",l="CREATE TABLE IF NOT EXISTS "+li+" (digest, seq INTEGER)",h="CREATE TABLE IF NOT EXISTS "+ii+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+ai+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",_="CREATE TABLE IF NOT EXISTS "+ui+" (id UNIQUE, rev, json)";t.executeSql(u),t.executeSql(_),t.executeSql(l,[],function(){t.executeSql(vi),t.executeSql(gi)}),t.executeSql(h,[],function(){t.executeSql(mi),t.executeSql(d,[],function(){t.executeSql(_i),t.executeSql(pi),t.executeSql(n,[],function(){var e="INSERT INTO "+ci+" (db_version, dbid) VALUES (?,?)";w=W();var n=[oi,w];t.executeSql(e,n,function(){f()})})})})}else{var p=function(){var n=e<oi;n&&t.executeSql("UPDATE "+ci+" SET db_version = "+oi);var r="SELECT dbid FROM "+ci;t.executeSql(r,[],function(t,e){w=e.rows.item(0).dbid,f()})},m=[r,o,i,a,s,c,p],v=e,g=function(t){m[v-1](t,g),v++};g(t)}}function _(){P.transaction(function(t){h(t,function(){p(t)})},Ze(e),n)}function p(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+ci;t.executeSql(e,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+ci,[],function(t,e){var n=e.rows.item(0).db_version;d(t,n)}):t.executeSql("ALTER TABLE "+ci+" ADD COLUMN db_version INTEGER",[],function(){d(t,1)}):d(t,0)})}function m(t,e){var n="SELECT MAX(seq) AS seq FROM "+ai;t.executeSql(n,[],function(t,n){var r=n.rows.item(0).seq||0;e(r)})}function v(t,e){var n=je("COUNT("+ii+".id) AS 'num'",[ii,ai],yi,ai+".deleted=0");t.executeSql(n,[],function(t,n){e(n.rows.item(0).num)})}function g(t,e,n,r,o){var i=je(bi,[ii,ai],yi,ii+".id=?"),a=[e];t.executeSql(i,a,function(t,e){if(!e.rows.length){var i=D(_o,"missing");return o(i)}var a=e.rows.item(0),s=oe(a.metadata);r(ht(n,s))})}var y,b=this,w=null,x=Fe(t),E=[];b._name=t.name;var k=lo({},t,{version:di,description:t.name,size:x}),L=Ge(k);if(L.error)return Ze(e)(L.error);var P=L.db;"function"!=typeof P.readTransaction&&(P.readTransaction=P.transaction),_(),b.type=function(){return"websql"},b._id=l(function(t){t(null,w)}),b._info=function(t){var e,n;P.readTransaction(function(t){m(t,function(t){e=t}),v(t,function(t){n=t})},Ze(t),function(){t(null,{doc_count:n,update_seq:e,websql_encoding:y})})},b._bulkDocs=function(e,n,r){We(t,e,n,b,P,fi,r)},b._get=function(t,e,n){function r(t){n(t,{doc:o,metadata:i,ctx:a})}var o,i,a=e.ctx;if(!a)return P.readTransaction(function(r){b._get(t,lo({ctx:r},e),n)});var s,u;if(e.rev){if(e.latest)return void g(a,t,e.rev,function(r){e.latest=!1,e.rev=r,b._get(t,e,n)},r);s=je(bi,[ii,ai],ii+".id="+ai+".doc_id",[ai+".doc_id=?",ai+".rev=?"]),u=[t,e.rev]}else s=je(bi,[ii,ai],yi,ii+".id=?"),u=[t];a.executeSql(s,u,function(t,n){if(!n.rows.length){var a=D(_o,"missing");return r(a)}var s=n.rows.item(0);if(i=oe(s.metadata),s.deleted&&!e.rev){var u=D(_o,"deleted");return r(u)}o=Ue(s.data,i.id,s.rev),r()})},b._allDocs=function(t,e){var n,r=[],o="startkey"in t&&t.startkey,i="endkey"in t&&t.endkey,a="key"in t&&t.key,s="descending"in t&&t.descending,u="limit"in t?t.limit:-1,c="skip"in t?t.skip:0,l=t.inclusive_end!==!1,h=[],f=[];if(a!==!1)f.push(ii+".id = ?"),h.push(a);else if(o!==!1||i!==!1){if(o!==!1&&(f.push(ii+".id "+(s?"<=":">=")+" ?"),h.push(o)),i!==!1){var d=s?">":"<";l&&(d+="="),f.push(ii+".id "+d+" ?"),h.push(i)}a!==!1&&(f.push(ii+".id = ?"),h.push(a))}"ok"!==t.deleted&&f.push(ai+".deleted = 0"),P.readTransaction(function(e){if(v(e,function(t){n=t}),0!==u){var o=je(bi,[ii,ai],yi,f,ii+".id "+(s?"DESC":"ASC"));o+=" LIMIT "+u+" OFFSET "+c,e.executeSql(o,h,function(e,n){for(var o=0,i=n.rows.length;o<i;o++){var a=n.rows.item(o),s=oe(a.metadata),u=s.id,c=Ue(a.data,u,a.rev),l=c._rev,h={id:u,key:u,value:{rev:l}};if(t.include_docs){if(h.doc=c,h.doc._rev=l,t.conflicts){var f=K(s);f.length&&(h.doc._conflicts=f)}Ve(h.doc,t,b,e)}if(a.deleted){if("ok"!==t.deleted)continue;h.value.deleted=!0,h.doc=null}r.push(h)}})}},Ze(e),function(){e(null,{total_rows:n,offset:t.skip,rows:r})})},b._changes=function(t){function e(){var e=ii+".json AS metadata, "+ii+".max_seq AS maxSeq, "+ai+".json AS winningDoc, "+ai+".rev AS winningRev ",n=ii+" JOIN "+ai,u=ii+".id="+ai+".doc_id AND "+ii+".winningseq="+ai+".seq",c=["maxSeq > ?"],l=[t.since];t.doc_ids&&(c.push(ii+".id IN "+qe(t.doc_ids.length)),l=l.concat(t.doc_ids));var h="maxSeq "+(r?"DESC":"ASC"),f=je(e,n,u,c,h),d=O(t);t.view||t.filter||(f+=" LIMIT "+o);var _=t.since||0;P.readTransaction(function(e){e.executeSql(f,l,function(e,n){function r(e){return function(){t.onChange(e)}}for(var u=0,c=n.rows.length;u<c;u++){var l=n.rows.item(u),h=oe(l.metadata);_=l.maxSeq;var f=Ue(l.winningDoc,h.id,l.winningRev),p=t.processChange(f,h,t);p.seq=l.maxSeq;var m=d(p);if("object"==typeof m)return t.complete(m);if(m&&(s++,i&&a.push(p),t.attachments&&t.include_docs?Ve(f,t,b,e,r(p)):r(p)()),s===o)break}})},Ze(t.complete),function(){t.continuous||t.complete(null,{results:a,last_seq:_})})}if(t=u(t),t.continuous){var n=b._name+":"+W();return fi.addListener(b._name,n,b,t),fi.notify(b._name),{cancel:function(){fi.removeListener(b._name,n)}}}var r=t.descending;t.since=t.since&&!r?t.since:0;var o="limit"in t?t.limit:-1;0===o&&(o=1);var i;i="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var a=[],s=0;e()},b._close=function(t){t()},b._getAttachment=function(t,e,n,r,o){var i,a=r.ctx,s=n.digest,u=n.content_type,c="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+si+" WHERE digest=?";a.executeSql(c,[s],function(t,e){var n=e.rows.item(0),a=n.escaped?Ie(n.body):Oe(n.body,y);i=r.binary?Rt(a,u):zo(a),o(null,i)})},b._getRevisionTree=function(t,e){P.readTransaction(function(n){var r="SELECT json AS metadata FROM "+ii+" WHERE id = ?";n.executeSql(r,[t],function(t,n){if(n.rows.length){var r=oe(n.rows.item(0).metadata);e(null,r.rev_tree)}else e(D(_o))})})},b._doCompaction=function(t,e,n){return e.length?void P.transaction(function(n){var r="SELECT json AS metadata FROM "+ii+" WHERE id = ?";n.executeSql(r,[t],function(n,r){var o=oe(r.rows.item(0).metadata);J(o.rev_tree,function(t,n,r,o,i){var a=n+"-"+r;e.indexOf(a)!==-1&&(i.status="missing")});var i="UPDATE "+ii+" SET json = ? WHERE id = ?";n.executeSql(i,[ie(o),t])}),ze(e,t,n)},Ze(n),function(){n()}):n()},b._getLocal=function(t,e){P.readTransaction(function(n){var r="SELECT json, rev FROM "+ui+" WHERE id=?";n.executeSql(r,[t],function(n,r){if(r.rows.length){var o=r.rows.item(0),i=Ue(o.json,t,o.rev);e(null,i)}else e(D(_o))})})},b._putLocal=function(t,e,n){function r(t){var r,c;i?(r="UPDATE "+ui+" SET rev=?, json=? WHERE id=? AND rev=?",c=[o,u,a,i]):(r="INSERT INTO "+ui+" (id, rev, json) VALUES (?,?,?)",c=[a,o,u]),t.executeSql(r,c,function(t,r){r.rowsAffected?(s={ok:!0,id:a,rev:o},e.ctx&&n(null,s)):n(D(po))},function(){return n(D(po)),!1})}"function"==typeof e&&(n=e,e={}),delete t._revisions;var o,i=t._rev,a=t._id;o=i?t._rev="0-"+(parseInt(i.split("-")[1],10)+1):t._rev="0-1";var s,u=Re(t);e.ctx?r(e.ctx):P.transaction(r,Ze(n),function(){s&&n(null,s)})},b._removeLocal=function(t,e,n){function r(r){var i="DELETE FROM "+ui+" WHERE id=? AND rev=?",a=[t._id,t._rev];r.executeSql(i,a,function(r,i){return i.rowsAffected?(o={ok:!0,id:t._id,rev:"0-0"},void(e.ctx&&n(null,o))):n(D(_o))})}"function"==typeof e&&(n=e,e={});var o;e.ctx?r(e.ctx):P.transaction(r,Ze(n),function(){o&&n(null,o)})},b._destroy=function(t,e){fi.removeAllListeners(b._name),P.transaction(function(t){var e=[ii,ai,si,ci,ui,li];e.forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},Ze(e),function(){T()&&(delete window.localStorage["_pouch__websqldb_"+b._name],delete window.localStorage[b._name]),e(null,{ok:!0})})}}function Xe(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}function Ye(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=T(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var n=Xe();return t&&(localStorage[e]=n?"1":"0"),n}function Qe(){return"function"==typeof openDatabase&&Ye()}function $e(t,e,n,r){return openDatabase(t,e,n,r)}function tn(t,e){var n=lo({websql:$e},t);Ke.call(this,n,e)}function en(){for(var t={},e=new eo(function(e,n){t.resolve=e,t.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.promise=e,eo.resolve().then(function(){return fetch.apply(null,n)}).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t}function nn(t,e){var n,r,o,i=new Headers,a={method:t.method,credentials:"include",headers:i};return t.json&&(i.set("Accept","application/json"),i.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.processData&&"string"!=typeof t.body?a.body=JSON.stringify(t.body):"body"in t?a.body=t.body:a.body=null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&i.set(e,t.headers[e])}),n=en(t.url,a),t.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),n.promise.then(function(e){return o={statusCode:e.status},t.timeout>0&&clearTimeout(r),o.statusCode>=200&&o.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){o.statusCode>=200&&o.statusCode<300?e(null,o,t):(t.status=o.statusCode,e(t))}).catch(function(t){t||(t=new Error("canceled")),e(t)}),{abort:n.reject}}function rn(t,e){var n,r,o=!1,i=function(){n.abort(),u()},a=function(){o=!0,n.abort(),u()},s={abort:i},u=function(){clearTimeout(r),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(t){return e(new Error(t.name||"Url is invalid"))}n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null);for(var c in t.headers)t.headers.hasOwnProperty(c)&&n.setRequestHeader(c,t.headers[c]);return t.timeout>0&&(r=setTimeout(a,t.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(a,t.timeout))},"undefined"!=typeof n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var i;i=t.binary?Nt([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,r,i)}else{var a={};if(o)a=new Error("ETIMEDOUT"),a.code="ETIMEDOUT";else if("string"==typeof n.response)try{a=JSON.parse(n.response)}catch(t){}a.status=n.status,e(a)}u()}},t.body&&t.body instanceof Blob?Ft(t.body,function(t){n.send(t)}):n.send(t.body),s}function on(){try{return new XMLHttpRequest,!0}catch(t){return!1}}function an(t,e){return Ti||t.xhr?rn(t,e):nn(t,e)}function sn(){return""}function un(t,e){function n(e,n,r){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){return r(t)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?A(t):t})),t.binary&&xi(e,n),r(null,e,n)}t=u(t);var r={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return t=lo(r,t),t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),an(t,function(r,o,i){if(r)return e(A(r));var a,s=o.headers&&o.headers["content-type"],u=i||sn();if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof u&&(/json/.test(s)||/^[\s]*\{/.test(u)&&/\}[\s]*$/.test(u)))try{u=JSON.parse(u.toString())}catch(t){}o.statusCode>=200&&o.statusCode<300?n(u,o,e):(a=A(u),a.status=o.statusCode,e(a))})}function cn(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1,o=n.indexOf("msie")!==-1,i=n.indexOf("edge")!==-1,a=r||(o||i)&&"GET"===t.method,s=!("cache"in t)||t.cache,u=/^blob:/.test(t.url);if(!u&&(a||!s)){var c=t.url.indexOf("?")!==-1;t.url+=(c?"&":"?")+"_nonce="+Date.now()}return un(t,e)}function ln(t,e){return new eo(function(n,r){function o(){l++,t[h++]().then(a,s)}function i(){++f===d?c?r(c):n():u()}function a(){l--,i()}function s(t){l--,c=c||t,i()}function u(){for(;l<e&&h<d;)o()}var c,l=0,h=0,f=0,d=t.length;u()})}function hn(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];n.data=Ut(n.data,n.content_type)})}function fn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function dn(t){return t._attachments&&Object.keys(t._attachments)?eo.all(Object.keys(t._attachments).map(function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new eo(function(t){Zt(n.data,t)}).then(function(t){n.data=t})})):eo.resolve()}function _n(t){if(!t.prefix)return!1;var e=j(t.prefix).protocol;return"http"===e||"https"===e}function pn(t,e){if(_n(e)){var n=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(n)}var r=j(t);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var o=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=o.pop(),r.db.indexOf("%")===-1&&(r.db=encodeURIComponent(r.db)),r.path=o.join("/"),r}function mn(t,e){return vn(t,t.db+"/"+e)}function vn(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function gn(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function yn(t,e){function n(t,e,n){var r=t.ajax||{},o=lo(u(d),r,e);return Pi(o.method+" "+o.url),s._ajax(o,n)}function r(t,e){return new eo(function(r,o){n(t,e,function(t,e){return t?o(t):void r(e)})})}function o(t,e){return h(t,Gr(function(t){i().then(function(){return e.apply(this,t)}).catch(function(e){var n=t.pop();n(e)})}))}function i(){if(t.skipSetup||t.skip_setup)return eo.resolve();if(v)return v;var e={method:"GET",url:l};return v=r({},e).catch(function(t){return t&&t.status&&404===t.status?(S(404,"PouchDB is just detecting if the remote exists."),r({},{method:"PUT",url:l})):eo.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||eo.reject(t)}),v.catch(function(){v=null}),v}function a(t){return t.split("/").map(encodeURIComponent).join("/")}var s=this,c=pn(t.name,t),l=mn(c,"");t=u(t);var d=t.ajax||{};if(t.auth||c.auth){var _=t.auth||c.auth,p=_.username+":"+_.password,m=zo(unescape(encodeURIComponent(p)));d.headers=d.headers||{},d.headers.Authorization="Basic "+m}s._ajax=cn;var v;Yr(function(){e(null,s)}),s.type=function(){return"http"},s.id=o("id",function(t){n({},{method:"GET",url:vn(c,"")},function(e,n){var r=n&&n.uuid?n.uuid+c.db:mn(c,"");t(null,r)})}),s.request=o("request",function(t,e){t.url=mn(c,t.url),n({},t,e)}),s.compact=o("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=u(t),n(t,{url:mn(c,"_compact"),method:"POST"},function(){function n(){s.info(function(r,o){o&&!o.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)})}n()})}),s.bulkGet=h("bulkGet",function(t,e){function r(e){var r={};t.revs&&(r.revs=!0),t.attachments&&(r.attachments=!0),t.latest&&(r.latest=!0),n(t,{url:mn(c,"_bulk_get"+gn(r)),method:"POST",body:{docs:t.docs}},e)}function o(){function n(t){return function(n,r){s[t]=r.results,++a===o&&e(null,{results:M(s)})}}for(var r=ki,o=Math.ceil(t.docs.length/r),a=0,s=new Array(o),u=0;u<o;u++){var c=f(t,["revs","attachments","latest"]);c.ajax=d,c.docs=t.docs.slice(u*r,Math.min(t.docs.length,(u+1)*r)),b(i,c,n(u))}}var i=this,a=vn(c,""),s=Li[a];"boolean"!=typeof s?r(function(t,n){t?(Li[a]=!1,S(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(Li[a]=!0,e(null,n))}):s?r(e):o()}),s._info=function(t){i().then(function(){n({},{method:"GET",url:mn(c,"")},function(e,n){return e?t(e):(n.host=mn(c,""),void t(null,n))})}).catch(t)},s.get=o("get",function(t,e,n){function o(t){function n(n){var i=o[n],s=fn(t._id)+"/"+a(n)+"?rev="+t._rev;return r(e,{method:"GET",url:mn(c,s),binary:!0}).then(function(t){return e.binary?t:new eo(function(e){Zt(t,e)})}).then(function(t){delete i.stub,delete i.length,i.data=t})}var o=t._attachments,i=o&&Object.keys(o);if(o&&i.length){var s=i.map(function(t){return function(){return n(t)}});return ln(s,5)}}function i(t){return Array.isArray(t)?eo.all(t.map(function(t){if(t.ok)return o(t.ok)})):o(t)}"function"==typeof e&&(n=e,e={}),e=u(e);var s={};e.revs&&(s.revs=!0),e.revs_info&&(s.revs_info=!0),e.latest&&(s.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),s.open_revs=e.open_revs),e.rev&&(s.rev=e.rev),e.conflicts&&(s.conflicts=e.conflicts),t=fn(t);var l={method:"GET",url:mn(c,t+gn(s))};r(e,l).then(function(t){return eo.resolve().then(function(){if(e.attachments)return i(t)}).then(function(){n(null,t)})}).catch(n)}),s.remove=o("remove",function(t,e,r,o){var i;"string"==typeof e?(i={_id:t,_rev:e},"function"==typeof r&&(o=r,r={})):(i=t,"function"==typeof e?(o=e,r={}):(o=r,r=e));var a=i._rev||r.rev;n(r,{method:"DELETE",url:mn(c,fn(i._id))+"?rev="+a},o)}),s.getAttachment=o("getAttachment",function(t,e,r,o){"function"==typeof r&&(o=r,r={});var i=r.rev?"?rev="+r.rev:"",s=mn(c,fn(t))+"/"+a(e)+i;n(r,{method:"GET",url:s,binary:!0},o)}),s.removeAttachment=o("removeAttachment",function(t,e,r,o){var i=mn(c,fn(t)+"/"+a(e))+"?rev="+r;n({},{method:"DELETE",url:i},o)}),s.putAttachment=o("putAttachment",function(t,e,r,o,i,s){"function"==typeof i&&(s=i,i=o,o=r,r=null);var u=fn(t)+"/"+a(e),l=mn(c,u);if(r&&(l+="?rev="+r),"string"==typeof o){var h;try{h=jo(o)}catch(t){return s(D(bo,"Attachment is not a valid base64 string"))}o=h?Rt(h,i):""}var f={headers:{"Content-Type":i},method:"PUT",url:l,processData:!1,body:o,timeout:d.timeout||6e4};n({},f,s)}),s._bulkDocs=function(t,e,r){t.new_edits=e.new_edits,i().then(function(){return eo.all(t.docs.map(dn))}).then(function(){n(e,{method:"POST",url:mn(c,"_bulk_docs"),timeout:e.timeout,body:t},function(t,e){return t?r(t):(e.forEach(function(t){t.ok=!0}),void r(null,e))})}).catch(r)},s._put=function(t,e,r){i().then(function(){return dn(t)}).then(function(){n(e,{method:"PUT",url:mn(c,fn(t._id)),body:t},function(t,e){return t?r(t):void r(null,e)})}).catch(r)},s.allDocs=o("allDocs",function(t,e){"function"==typeof t&&(e=t,t={}),t=u(t);var n,o={},i="GET";t.conflicts&&(o.conflicts=!0),t.descending&&(o.descending=!0),t.include_docs&&(o.include_docs=!0),t.attachments&&(o.attachments=!0),t.key&&(o.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(o.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(o.endkey=JSON.stringify(t.endkey)),"undefined"!=typeof t.inclusive_end&&(o.inclusive_end=!!t.inclusive_end),"undefined"!=typeof t.limit&&(o.limit=t.limit),"undefined"!=typeof t.skip&&(o.skip=t.skip);var a=gn(o);"undefined"!=typeof t.keys&&(i="POST",n={keys:t.keys}),r(t,{method:i,url:mn(c,"_all_docs"+a),body:n}).then(function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(hn),e(null,n)}).catch(e)}),s._changes=function(t){var e="batch_size"in t?t.batch_size:Ei;t=u(t),t.timeout="timeout"in t?t.timeout:"timeout"in d?d.timeout:3e4;var r,o=t.timeout?{timeout:t.timeout-5e3}:{},a="undefined"!=typeof t.limit&&t.limit;r="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var s=a;if(t.style&&(o.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(o.include_docs=!0),t.attachments&&(o.attachments=!0),t.continuous&&(o.feed="longpoll"),t.conflicts&&(o.conflicts=!0),t.descending&&(o.descending=!0),"heartbeat"in t?t.heartbeat&&(o.heartbeat=t.heartbeat):t.continuous&&(o.heartbeat=1e4),t.filter&&"string"==typeof t.filter&&(o.filter=t.filter),t.view&&"string"==typeof t.view&&(o.filter="_view",o.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var l in t.query_params)t.query_params.hasOwnProperty(l)&&(o[l]=t.query_params[l]);var h,f="GET";t.doc_ids&&(o.filter="_doc_ids",f="POST",h={doc_ids:t.doc_ids});var _,p,m=function(r,u){if(!t.aborted){o.since=r,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),t.descending?a&&(o.limit=s):o.limit=!a||s>e?e:s;var l={method:f,url:mn(c,"_changes"+gn(o)),timeout:t.timeout,body:h};p=r,t.aborted||i().then(function(){_=n(t,l,u)}).catch(u)}},v={results:[]},g=function(n,o){if(!t.aborted){var i=0;if(o&&o.results){i=o.results.length,v.last_seq=o.last_seq;var u={};u.query=t.query_params,o.results=o.results.filter(function(e){s--;var n=O(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&hn(e),r&&v.results.push(e),t.onChange(e)),n})}else if(n)return t.aborted=!0,void t.complete(n);o&&o.last_seq&&(p=o.last_seq);var c=a&&s<=0||o&&i<e||t.descending;(!t.continuous||a&&s<=0)&&c?t.complete(null,v):Yr(function(){m(p,g)})}};return m(t.since||0,g),{cancel:function(){t.aborted=!0,_&&_.abort()}}},s.revsDiff=o("revsDiff",function(t,e,r){"function"==typeof e&&(r=e,e={}),n(e,{method:"POST",url:mn(c,"_revs_diff"),body:t},r)}),s._close=function(t){t()},s._destroy=function(t,e){n(t,{url:mn(c,""),method:"DELETE"},function(t,n){return t&&t.status&&404!==t.status?e(t):void e(null,n)})}}function bn(t,e,n){for(var r="",o=n-t.length;r.length<o;)r+=e;return r}function wn(t,e,n){var r=bn(t,e,n);return r+t}function Tn(t,e){if(t===e)return 0;t=xn(t),e=xn(e);var n=Bn(t),r=Bn(e);if(n-r!==0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return Dn(t,e)}return Array.isArray(t)?Cn(t,e):An(t,e)}function xn(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-(1/0)||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=xn(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];"undefined"!=typeof i&&(t[o]=xn(i))}}}}return t}function En(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return On(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,o=n.length,i="";if(e)for(;++r<o;)i+=kn(n[r]);else for(;++r<o;){
var a=n[r];i+=kn(a)+kn(t[a])}return i}return""}function kn(t){var e="\0";return t=xn(t),Bn(t)+Ai+En(t)+e}function Ln(t,e){var n,r=e,o="1"===t[e];if(o)n=0,e++;else{var i="0"===t[e];e++;var a="",s=t.substring(e,e+Di),u=parseInt(s,10)+Ci;for(i&&(u=-u),e+=Di;;){var c=t[e];if("\0"===c)break;a+=c,e++}a=a.split("."),n=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:e-r}}function Pn(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===t.length-2){var a=t.pop();o[a]=n}else t.push(n)}}function Sn(t){for(var e=[],n=[],r=0;;){var o=t[r++];if("\0"!==o)switch(o){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var i=Ln(t,r);e.push(i.num),r+=i.length;break;case"4":for(var a="";;){var s=t[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(a);break;case"5":var u={element:[],index:e.length};e.push(u.element),n.push(u);break;case"6":var c={element:{},index:e.length};e.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+o)}else{if(1===e.length)return e.pop();Pn(e,n)}}}function Cn(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var o=Tn(t[r],e[r]);if(0!==o)return o}return t.length===e.length?0:t.length>e.length?1:-1}function Dn(t,e){return t===e?0:t>e?1:-1}function An(t,e){for(var n=Object.keys(t),r=Object.keys(e),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=Tn(n[i],r[i]);if(0!==a)return a;if(a=Tn(t[n[i]],e[r[i]]),0!==a)return a}return n.length===r.length?0:n.length>r.length?1:-1}function Bn(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function On(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,o=r?"0":"2",i=(r?-n:n)-Ci,a=wn(i.toString(),"0",Di);o+=Ai+a;var s=Math.abs(parseFloat(e[0]));r&&(s=10-s);var u=s.toFixed(20);return u=u.replace(/\.?0+$/,""),o+=Ai+u}function Mn(){this.promise=new eo(function(t){t()})}function Nn(t){var e,n=t.db,r=t.viewName,o=t.map,i=t.reduce,a=t.temporary,s=o.toString()+(i&&i.toString())+"undefined";if(!a&&(e=n._cachedViews=n._cachedViews||{},e[s]))return e[s];var u=n.info().then(function(t){function u(t){t.views=t.views||{};var e=r;e.indexOf("/")===-1&&(e=r+"/"+r);var n=t.views[e]=t.views[e]||{};if(!n[c])return n[c]=!0,t}var c=t.db_name+"-mrview-"+(a?"temp":Kt(s));return z(n,"_local/mrviews",u).then(function(){return n.registerDependentDatabase(c).then(function(t){var r=t.db;r.auto_compaction=!0;var a={name:c,db:r,sourceDB:n,adapter:n.adapter,mapFun:o,reduceFun:i};return a.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return a.seq=t?t.seq:0,e&&a.db.once("destroyed",function(){delete e[s]}),a})})})});return e&&(e[s]=u),u}function In(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,In)}catch(t){}}function Rn(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Rn)}catch(t){}}function Un(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Un)}catch(t){}}function qn(t){var e="builtin "+t+" function requires map values to be numbers or number arrays";return new Un(e)}function jn(t){for(var e=0,n=0,r=t.length;n<r;n++){var o=t[n];if("number"!=typeof o){if(!Array.isArray(o))throw qn("_sum");e="number"==typeof e?[e]:e;for(var i=0,a=o.length;i<a;i++){var s=o[i];if("number"!=typeof s)throw qn("_sum");"undefined"==typeof e[i]?e.push(s):e[i]+=s}}else"number"==typeof e?e+=o:e[0]+=o}return e}function zn(t,e){return Qr("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:jn,log:Bi,isArray:Oi,toJSON:Mi})}function Zn(t,e){return e&&t.then(function(t){Yr(function(){e(null,t)})},function(t){Yr(function(){e(t)})}),t}function Fn(t){return Gr(function(e){var n=e.pop(),r=t.apply(this,e);return"function"==typeof n&&Zn(r,n),r})}function Wn(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function Hn(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function Jn(t){var e=new io(t),n=new Array(e.size),r=-1;return e.forEach(function(t){n[++r]=t}),n}function Gn(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,r){e[++n]=r}),e}function Vn(t){return t.indexOf("/")===-1?[t,t]:t.split("/")}function Kn(t){return 1===t.length&&/^1-/.test(t[0].rev)}function Xn(t,e){try{t.emit("error",e)}catch(t){k("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),k("error",e)}}function Yn(t,e,n){try{e(n)}catch(e){Xn(t,e)}}function Qn(t,e,n,r,o){try{return{output:e(n,r,o)}}catch(e){return Xn(t,e),{error:e}}}function $n(t,e){var n=Tn(t.key,e.key);return 0!==n?n:Tn(t.value,e.value)}function tr(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function er(t){var e=t.value,n=e&&"object"==typeof e&&e._id||t.id;return n}function nr(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];e[t].data=Ut(n.data,n.content_type)})})}function rr(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&nr(e),e}}function or(t,e,n,r){var o=e[t];"undefined"!=typeof o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(t+"="+o))}function ir(t){if("undefined"!=typeof t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function ar(t){return t.group_level=ir(t.group_level),t.limit=ir(t.limit),t.skip=ir(t.skip),t}function sr(t){if(t){if("number"!=typeof t)return new In('Invalid value for integer: "'+t+'"');if(t<0)return new In('Invalid value for positive integer: "'+t+'"')}}function ur(t,e){var n=t.descending?"endkey":"startkey",r=t.descending?"startkey":"endkey";if("undefined"!=typeof t[n]&&"undefined"!=typeof t[r]&&Tn(t[n],t[r])>0)throw new In("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&t.reduce!==!1){if(t.include_docs)throw new In("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new In("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=sr(t[e]);if(n)throw n})}function cr(t,e,n){var r,o=[],i="GET";if(or("reduce",n,o),or("include_docs",n,o),or("attachments",n,o),or("limit",n,o),or("descending",n,o),or("group",n,o),or("group_level",n,o),or("skip",n,o),or("stale",n,o),or("conflicts",n,o),or("startkey",n,o,!0),or("start_key",n,o,!0),or("endkey",n,o,!0),or("end_key",n,o,!0),or("inclusive_end",n,o),or("key",n,o,!0),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof n.keys){var a=2e3,s="keys="+encodeURIComponent(JSON.stringify(n.keys));s.length+o.length+1<=a?o+=("?"===o[0]?"&":"?")+s:(i="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var u=Vn(e);return t.request({method:i,url:"_design/"+u[0]+"/_view/"+u[1]+o,body:r}).then(rr(n))}return r=r||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?r[t]=e[t]:r[t]=e[t].toString()}),t.request({method:"POST",url:"_temp_view"+o,body:r}).then(rr(n))}function lr(t,e,n){return new eo(function(r,o){t._query(e,n,function(t,e){return t?o(t):void r(e)})})}function hr(t){return new eo(function(e,n){t._viewCleanup(function(t,r){return t?n(t):void e(r)})})}function fr(t){return function(e){if(404===e.status)return t;throw e}}function dr(t,e,n){function r(){return Kn(l)?eo.resolve(s):e.db.get(a).catch(fr(s))}function o(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):eo.resolve({rows:[]})}function i(t,e){for(var n=[],r=new io,o=0,i=e.rows.length;o<i;o++){var a=e.rows[o],s=a.doc;if(s&&(n.push(s),r.add(s._id),s._deleted=!c.has(s._id),!s._deleted)){var u=c.get(s._id);"value"in u&&(s.value=u.value)}}var l=Gn(c);return l.forEach(function(t){if(!r.has(t)){var e={_id:t},o=c.get(t);"value"in o&&(e.value=o.value),n.push(e)}}),t.keys=Jn(l.concat(t.keys)),n.push(t),n}var a="_local/doc_"+t,s={_id:a,keys:[]},u=n.get(t),c=u[0],l=u[1];return r().then(function(t){return o(t).then(function(e){return i(t,e)})})}function _r(t,e,n){var r="_local/lastSeq";return t.db.get(r).catch(fr({_id:r,seq:0})).then(function(r){var o=Gn(e);return eo.all(o.map(function(n){return dr(n,t,e)})).then(function(e){var o=M(e);return r.seq=n,o.push(r),t.db.bulkDocs({docs:o})})})}function pr(t){var e="string"==typeof t?t:t.name,n=Ni[e];return n||(n=Ni[e]=new Mn),n}function mr(t){return Hn(pr(t),function(){return vr(t)})()}function vr(t){function e(t,e){var n={id:u._id,key:xn(t)};"undefined"!=typeof e&&null!==e&&(n.value=xn(e)),s.push(n)}function n(e,n){return function(){return _r(t,e,n)}}function r(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:h,limit:Ri}).then(o)}function o(t){var e=t.results;if(e.length){var o=i(e);if(f.add(n(o,h)),!(e.length<Ri))return r()}}function i(e){for(var n=new ao,r=0,o=e.length;r<o;r++){var i=e[r];if("_"!==i.doc._id[0]){s=[],u=i.doc,u._deleted||Yn(t.sourceDB,c,u),s.sort($n);var l=a(s);n.set(i.doc._id,[l,i.changes])}h=i.seq}return n}function a(t){for(var e,n=new ao,r=0,o=t.length;r<o;r++){var i=t[r],a=[i.key,i.id];r>0&&0===Tn(i.key,e)&&a.push(r),n.set(kn(a),i),e=i.key}return n}var s,u,c;if("function"==typeof t.mapFun&&2===t.mapFun.length){var l=t.mapFun;c=function(t){return l(t,e)}}else c=zn(t.mapFun.toString(),e);var h=t.seq||0,f=new Mn;return r().then(function(){return f.finish()}).then(function(){t.seq=h})}function gr(t,e,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=Ui[t.reduceFun]?Ui[t.reduceFun]:zn(t.reduceFun.toString());var i=[],a=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach(function(t){var e=i[i.length-1],n=o?t.key:null;return o&&Array.isArray(n)&&(n=n.slice(0,a)),e&&0===Tn(e.groupKey,n)?(e.keys.push([t.key,t.id]),void e.values.push(t.value)):void i.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var s=0,u=i.length;s<u;s++){var c=i[s],l=Qn(t.sourceDB,r,c.keys,c.values,!1);if(l.error&&l.error instanceof Un)throw l.error;e.push({value:l.error?null:l.output,key:c.groupKey})}return{rows:tr(e,n.limit,n.skip)}}function yr(t,e){return Hn(pr(t),function(){return br(t,e)})()}function br(t,e){function n(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return o=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var r=Sn(t.doc._id);return{key:r[0],id:r[1],value:"value"in t.doc?t.doc.value:null}})})}function r(n){var r;if(r=i?gr(t,n,e):{total_rows:o,offset:a,rows:n},e.include_docs){var s=Jn(n.map(er));return t.sourceDB.allDocs({keys:s,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new ao;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),n.forEach(function(t){var n=er(t),r=e.get(n);r&&(t.doc=r)}),r})}return r}var o,i=t.reduceFun&&e.reduce!==!1,a=e.skip||0;if("undefined"==typeof e.keys||e.keys.length||(e.limit=0,delete e.keys),"undefined"!=typeof e.keys){var s=e.keys,u=s.map(function(t){var e={startkey:kn([t]),endkey:kn([t,{}])};return n(e)});return eo.all(u).then(M).then(r)}var c={descending:e.descending};if(e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"undefined"!=typeof e.startkey&&(c.startkey=kn(e.descending?[e.startkey,{}]:[e.startkey])),"undefined"!=typeof e.endkey){var l=e.inclusive_end!==!1;e.descending&&(l=!l),c.endkey=kn(l?[e.endkey,{}]:[e.endkey])}if("undefined"!=typeof e.key){var h=kn([e.key]),f=kn([e.key,{}]);c.descending?(c.endkey=h,c.startkey=f):(c.startkey=h,c.endkey=f)}return i||("number"==typeof e.limit&&(c.limit=e.limit),c.skip=a),n(c).then(r)}function wr(t){return t.request({method:"POST",url:"_view_cleanup"})}function Tr(t){return t.get("_local/mrviews").then(function(e){var n=new ao;Object.keys(e.views).forEach(function(t){var e=Vn(t),r="_design/"+e[0],o=e[1],i=n.get(r);i||(i=new io,n.set(r,i)),i.add(o)});var r={keys:Gn(n),include_docs:!0};return t.allDocs(r).then(function(r){var o={};r.rows.forEach(function(t){var r=t.key.substring(8);n.get(t.key).forEach(function(n){var i=r+"/"+n;e.views[i]||(i=n);var a=Object.keys(e.views[i]),s=t.doc&&t.doc.views&&t.doc.views[n];a.forEach(function(t){o[t]=o[t]||s})})});var i=Object.keys(o).filter(function(t){return!o[t]}),a=i.map(function(e){return Hn(pr(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return eo.all(a).then(function(){return{ok:!0}})})},fr({ok:!0}))}function xr(t,e,n){if("http"===t.type())return cr(t,e,n);if("function"==typeof t._query)return lr(t,e,n);if("string"!=typeof e){ur(n,e);var r={db:t,viewName:"temp_view/temp_view",map:e.map,reduce:e.reduce,temporary:!0};return Ii.add(function(){return Nn(r).then(function(t){function e(){return t.db.destroy()}return Wn(mr(t).then(function(){return yr(t,n)}),e)})}),Ii.finish()}var o=e,i=Vn(o),a=i[0],s=i[1];return t.get("_design/"+a).then(function(e){var r=e.views&&e.views[s];if(!r||"string"!=typeof r.map)throw new Rn("ddoc "+a+" has no view named "+s);ur(n,r);var i={db:t,viewName:o,map:r.map,reduce:r.reduce};return Nn(i).then(function(t){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&Yr(function(){mr(t)}),yr(t,n)):mr(t).then(function(){return yr(t,n)})})})}function Er(t){return/^1-/.test(t)}function kr(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}function Lr(t,e){var n=Object.keys(e._attachments);return eo.all(n.map(function(n){return t.getAttachment(e._id,n,{rev:e._rev})}))}function Pr(t,e,n){var r="http"===e.type()&&"http"!==t.type(),o=Object.keys(n._attachments);return r?t.get(n._id).then(function(r){return eo.all(o.map(function(o){return kr(r,n,o)?e.getAttachment(n._id,o):t.getAttachment(r._id,o)}))}).catch(function(t){if(404!==t.status)throw t;return Lr(e,n)}):Lr(e,n)}function Sr(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n].missing;r.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,latest:!0}}function Cr(t,e,n,r){function o(){var o=Sr(n);if(o.docs.length)return t.bulkGet(o).then(function(n){if(r.cancelled)throw new Error("cancelled");return eo.all(n.results.map(function(n){return eo.all(n.docs.map(function(n){var r=n.ok;return n.error&&(f=!1),r&&r._attachments?Pr(e,t,r).then(function(t){var e=Object.keys(r._attachments);return t.forEach(function(t,n){var o=r._attachments[e[n]];delete o.stub,delete o.length,o.data=t}),r}):r}))})).then(function(t){h=h.concat(M(t).filter(Boolean))})})}function i(t){return t._attachments&&Object.keys(t._attachments).length>0}function a(t){return t._conflicts&&t._conflicts.length>0}function s(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(t){if(r.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){t.deleted||!t.doc||!Er(t.value.rev)||i(t.doc)||a(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,h.push(t.doc),delete n[t.id])})})}function c(){var t=Object.keys(n).filter(function(t){var e=n[t].missing;return 1===e.length&&Er(e[0])});if(t.length>0)return s(t)}function l(){return{ok:f,docs:h}}n=u(n);var h=[],f=!0;return eo.resolve().then(c).then(o).then(l)}function Dr(t,e,n,r,o){return t.get(e).catch(function(n){if(404===n.status)return"http"===t.type()&&S(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:Fi,version:Zi};throw n}).then(function(i){if(!o.cancelled&&i.last_seq!==n)return i.history=(i.history||[]).filter(function(t){return t.session_id!==r}),i.history.unshift({last_seq:n,session_id:r}),i.history=i.history.slice(0,Wi),i.version=Zi,i.replicator=Fi,i.session_id=r,i.last_seq=n,t.put(i).catch(function(i){if(409===i.status)return Dr(t,e,n,r,o);throw i})})}function Ar(t,e,n,r){this.src=t,this.target=e,this.id=n,this.returnValue=r}function Br(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:Or(t.history,e.history)}function Or(t,e){var n=t[0],r=t.slice(1),o=e[0],i=e.slice(1);if(!n||0===e.length)return{last_seq:Hi,history:[]};var a=n.session_id;if(Mr(a,e))return{last_seq:n.last_seq,history:t};var s=o.session_id;return Mr(s,r)?{last_seq:o.last_seq,history:i}:Or(r,i)}function Mr(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Mr(t,r))}function Nr(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function Ir(t,e,n,r){if(t.retry===!1)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=P),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var o=function(){t.current_back_off=Gi},i=function(){e.removeListener("active",o)};e.once("paused",i),e.once("active",o)}t.current_back_off=t.current_back_off||Gi,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}function Rr(t){return Object.keys(t).sort(Tn).reduce(function(e,n){return e[n]=t[n],e},{})}function Ur(t,e,n){var r=n.doc_ids?n.doc_ids.sort(Tn):"",o=n.filter?n.filter.toString():"",i="",a="";return n.filter&&n.query_params&&(i=JSON.stringify(Rr(n.query_params))),n.filter&&"_view"===n.filter&&(a=n.view.toString()),eo.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+o+a+i+r;return new eo(function(t){Vt(e,t)})}).then(function(t){return t=t.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+t})}function qr(t,e,n,r,o){function i(){return x?eo.resolve():Ur(t,e,n).then(function(n){T=n,x=new Ar(t,e,T,r)})}function a(){if(I=[],0!==w.docs.length){var t=w.docs,i={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},i).then(function(e){if(r.cancelled)throw _(),new Error("cancelled");var n=Object.create(null);e.forEach(function(t){t.error&&(n[t.id]=t)});var i=Object.keys(n).length;o.doc_write_failures+=i,o.docs_written+=t.length-i,t.forEach(function(t){var e=n[t._id];if(e){if(o.errors.push(e),"unauthorized"!==e.name&&"forbidden"!==e.name)throw e;r.emit("denied",u(e))}else I.push(t)})},function(e){throw o.doc_write_failures+=t.length,e})}}function s(){if(w.error)throw new Error("There was a problem getting docs.");o.last_seq=C=w.seq;var t=u(o);return I.length&&(t.docs=I,r.emit("change",t)),L=!0,x.writeCheckpoint(w.seq,R).then(function(){if(L=!1,r.cancelled)throw _(),new Error("cancelled");w=void 0,g()}).catch(function(t){throw b(t),t})}function c(){var t={};return w.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(r.cancelled)throw _(),new Error("cancelled");w.diffs=t})}function l(){return Cr(t,e,w.diffs,r).then(function(t){w.error=!t.ok,t.docs.forEach(function(t){delete w.diffs[t._id],o.docs_read++,w.docs.push(t)})})}function h(){if(!r.cancelled&&!w){if(0===E.length)return void f(!0);w=E.shift(),c().then(l).then(a).then(s).then(h).catch(function(t){d("batch processing terminated with error",t)})}}function f(t){return 0===k.changes.length?void(0!==E.length||w||((D&&U.live||P)&&(r.state="pending",r.emit("paused")),P&&_())):void((t||P||k.changes.length>=A)&&(E.push(k),k={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),h()))}function d(t,e){S||(e.message||(e.message=t),o.ok=!1,o.status="aborting",E=[],k={seq:0,changes:[],docs:[]},_(e))}function _(i){S||r.cancelled&&(o.status="cancelled",L)||(o.status=o.status||"complete",o.end_time=new Date,o.last_seq=C,S=!0,i?(i.result=o,"unauthorized"===i.name||"forbidden"===i.name?(r.emit("error",i),r.removeAllListeners()):Ir(n,r,i,function(){qr(t,e,n,r)})):(r.emit("complete",o),r.removeAllListeners()))}function p(t){if(r.cancelled)return _();var e=O(n)(t);e&&(k.seq=t.seq,k.changes.push(t),f(0===E.length&&U.live))}function m(t){if(M=!1,r.cancelled)return _();if(t.results.length>0)U.since=t.last_seq,g(),f(!0);else{var e=function(){D?(U.live=!0,g()):P=!0,f(!0)};w||0!==t.results.length?e():(L=!0,x.writeCheckpoint(t.last_seq,R).then(function(){L=!1,o.last_seq=C=t.last_seq,e()}).catch(b))}}function v(t){return M=!1,r.cancelled?_():void d("changes rejected",t)}function g(){function e(){i.cancel()}function o(){r.removeListener("cancel",e)}if(!M&&!P&&E.length<B){M=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",e);var i=t.changes(U).on("change",p);i.then(o,o),i.then(m).catch(v),n.retry&&(r._changes=i,r._abortChanges=e)}}function y(){i().then(function(){return r.cancelled?void _():x.getCheckpoint().then(function(t){C=t,U={since:C,limit:A,batch_size:A,style:"all_docs",doc_ids:N,return_docs:!0},n.filter&&("string"!=typeof n.filter?U.include_docs=!0:U.filter=n.filter),"heartbeat"in n&&(U.heartbeat=n.heartbeat),"timeout"in n&&(U.timeout=n.timeout),n.query_params&&(U.query_params=n.query_params),n.view&&(U.view=n.view),g()})}).catch(function(t){d("getCheckpoint rejected with ",t)})}function b(t){L=!1,d("writeCheckpoint completed with error",t)}var w,T,x,E=[],k={seq:0,changes:[],docs:[]},L=!1,P=!1,S=!1,C=0,D=n.continuous||n.live||!1,A=n.batch_size||100,B=n.batches_limit||10,M=!1,N=n.doc_ids,I=[],R=W();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var U={};return r.ready(t,e),r.cancelled?void _():(r._addedListeners||(r.once("cancel",_),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(t){n.complete(null,t)})),r._addedListeners=!0),void("undefined"==typeof n.since?y():i().then(function(){return L=!0,x.writeCheckpoint(n.since,R)}).then(function(){return L=!1,r.cancelled?void _():(C=n.since,void y())}).catch(b)))}function jr(){Kr.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new eo(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(t,n){return e.then(t,n)},t.catch=function(t){return e.catch(t)},t.catch(function(){})}function zr(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function Zr(t,e,n,r){if("function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw D(xo,"`doc_ids` filter parameter is not a list.");n.complete=r,n=u(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var o=new jr(n),i=zr(t,n),a=zr(e,n);return qr(i,a,n,o),o}function Fr(t,e,n,r){return"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n=u(n),n.PouchConstructor=n.PouchConstructor||this,t=zr(t,n),e=zr(e,n),new Wr(t,e,n,r)}function Wr(t,e,n,r){function o(t){_.emit("change",{direction:"pull",change:t})}function i(t){_.emit("change",{direction:"push",change:t})}function a(t){_.emit("denied",{direction:"push",doc:t})}function s(t){_.emit("denied",{direction:"pull",doc:t})}function u(){_.pushPaused=!0,_.pullPaused&&_.emit("paused")}function c(){_.pullPaused=!0,_.pushPaused&&_.emit("paused")}function l(){_.pushPaused=!1,_.pullPaused&&_.emit("active",{direction:"push"})}function h(){_.pullPaused=!1,_.pushPaused&&_.emit("active",{direction:"pull"})}function f(t){return function(e,n){var r="change"===e&&(n===o||n===i),f="denied"===e&&(n===s||n===a),d="paused"===e&&(n===c||n===u),p="active"===e&&(n===h||n===l);(r||f||d||p)&&(e in v||(v[e]={}),v[e][t]=!0,2===Object.keys(v[e]).length&&_.removeAllListeners(e))}}function d(t,e,n){t.listeners(e).indexOf(n)==-1&&t.on(e,n)}var _=this;this.canceled=!1;var p=n.push?lo({},n,n.push):n,m=n.pull?lo({},n,n.pull):n;this.push=Zr(t,e,p),this.pull=Zr(e,t,m),this.pushPaused=!0,this.pullPaused=!0;var v={};n.live&&(this.push.on("complete",_.pull.cancel.bind(_.pull)),this.pull.on("complete",_.push.cancel.bind(_.push))),this.on("newListener",function(t){"change"===t?(d(_.pull,"change",o),d(_.push,"change",i)):"denied"===t?(d(_.pull,"denied",s),d(_.push,"denied",a)):"active"===t?(d(_.pull,"active",h),d(_.push,"active",l)):"paused"===t&&(d(_.pull,"paused",c),d(_.push,"paused",u))}),this.on("removeListener",function(t){"change"===t?(_.pull.removeListener("change",o),_.push.removeListener("change",i)):"denied"===t?(_.pull.removeListener("denied",s),_.push.removeListener("denied",a)):"active"===t?(_.pull.removeListener("active",h),_.push.removeListener("active",l)):"paused"===t&&(_.pull.removeListener("paused",c),_.push.removeListener("paused",u))}),this.pull.on("removeListener",f("pull")),this.push.on("removeListener",f("push"));var g=eo.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return _.emit("complete",e),r&&r(null,e),_.removeAllListeners(),e},function(t){if(_.cancel(),r?r(t):_.emit("error",t),_.removeAllListeners(),r)throw t});this.then=function(t,e){return g.then(t,e)},this.catch=function(t){return g.catch(t)}}function Hr(t){t.replicate=Zr,t.sync=Fr,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return{from:function(e,n,r){return t.constructor.replicate(e,t,n,r)},to:function(e,n,r){return t.constructor.replicate(t,e,n,r)}}}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}}var Jr=r(n(14)),Gr=r(n(3)),Vr=r(n(16)),Kr=n(5),Xr=r(n(12)),Yr=r(n(0)),Qr=r(n(20)),$r=r(n(21)),to=r(n(22)),eo="function"==typeof Promise?Promise:Jr,no=Function.prototype.toString,ro=no.call(Object),oo=Vr("pouchdb:api");p.prototype.get=function(t){var e=d(t);return this._store[e]},p.prototype.set=function(t,e){var n=d(t);return this._store[n]=e,!0},p.prototype.has=function(t){var e=d(t);return e in this._store},p.prototype.delete=function(t){var e=d(t),n=e in this._store;return delete this._store[e],n},p.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var o=e[n],i=this._store[o];o=_(o),t(i,o)}},Object.defineProperty(p.prototype,"size",{get:function(){return Object.keys(this._store).length}}),m.prototype.add=function(t){return this._store.set(t,!0)},m.prototype.has=function(t){return this._store.has(t)},m.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(m.prototype,"size",{get:function(){return this._store.size}});var io,ao;v()?(io=Set,ao=Map):(io=m,ao=p);var so,uo=6;if(w())so=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),so=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){so=!1}Xr(E,Kr.EventEmitter),E.prototype.addListener=function(t,e,n,r){function o(){function t(){a=!1}if(i._listeners[e]){if(a)return void(a="waiting");a=!0;var s=f(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(s).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===a&&Yr(o),a=!1}).on("error",t)}}if(!this._listeners[e]){var i=this,a=!1;this._listeners[e]=o,this.on(t,o)}},E.prototype.removeListener=function(t,e){e in this._listeners&&(Kr.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},E.prototype.notifyLocalWindows=function(t){w()?chrome.storage.local.set({dbName:t}):T()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},E.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var co;co="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};var lo=co;Xr(C,Error),C.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var ho,fo=(new C(401,"unauthorized","Name or password is incorrect."),new C(400,"bad_request","Missing JSON list of 'docs'")),_o=new C(404,"not_found","missing"),po=new C(409,"conflict","Document update conflict"),mo=new C(400,"bad_request","_id field must contain a string"),vo=new C(412,"missing_id","_id is required for puts"),go=new C(400,"bad_request","Only reserved document ids may start with underscore."),yo=(new C(412,"precondition_failed","Database not open"),new C(500,"unknown_error","Database encountered an unknown error")),bo=new C(500,"badarg","Some query argument is invalid"),wo=(new C(400,"invalid_request","Request was invalid"),new C(400,"query_parse_error","Some query parameter is invalid")),To=new C(500,"doc_validation","Bad special document member"),xo=new C(400,"bad_request","Something wrong with the request"),Eo=new C(400,"bad_request","Document must be a JSON object"),ko=(new C(404,"not_found","Database not found"),new C(500,"indexed_db_went_bad","unknown")),Lo=new C(500,"web_sql_went_bad","unknown"),Po=(new C(500,"levelDB_went_went_bad","unknown"),new C(403,"forbidden","Forbidden by design doc validate_doc_update function"),new C(400,"bad_request","Invalid rev format")),So=(new C(412,"file_exists","The database could not be created, the file already exists."),new C(412,"missing_stub","A pre-existing attachment stub wasn't found")),Co=(new C(413,"invalid_url","Provided URL is invalid"),N.name);ho=Co?function(t){return t.name}:function(t){return t.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var Do=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ao="queryKey",Bo=/(?:^|&)([^&=]*)=?([^&]*)/g,Oo=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Mo="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Xr(pt,Kr.EventEmitter),pt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},pt.prototype.doChanges=function(t){var e=this,n=t.complete;if(t=u(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=mt,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"===t.since)return void this.db.info().then(function(r){return e.isCancelled?void n(null,{status:"cancelled"}):(t.since=r.update_seq,void e.doChanges(t))},n);if(t.view&&!t.filter&&(t.filter="_view"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=q(t.view):t.filter=q(t.filter),"http"!==this.db.type()&&!t.doc_ids))return this.filterChanges(t);"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var r=this.db._changes(t);if(r&&"function"==typeof r.cancel){var o=e.cancel;e.cancel=Gr(function(t){r.cancel(),o.apply(this,t)})}},pt.prototype.filterChanges=function(t){var e=this,n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=D(xo,"`view` filter parameter not found or invalid.");return n(r)}var o=U(t.view);this.db.get("_design/"+o[0],function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(A(r));var a=i&&i.views&&i.views[o[1]]&&i.views[o[1]].map;return a?(t.filter=dt(a),void e.doChanges(t)):n(D(_o,i.views?"missing json key: "+o[1]:"missing json key: views"))})}else{var i=U(t.filter);if(!i)return e.doChanges(t);this.db.get("_design/"+i[0],function(r,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(A(r));var a=o&&o.filters&&o.filters[i[1]];return a?(t.filter=ft(a),void e.doChanges(t)):n(D(_o,o&&o.filters?"missing json key: "+i[1]:"missing json key: filters"))})}},Xr(kt,Kr.EventEmitter),kt.prototype.post=h("post",function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?n(D(Eo)):void this.bulkDocs({docs:[t]},e,gt(n))}),kt.prototype.put=h("put",function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?n(D(Eo)):(I(t._id),lt(t._id)&&"function"==typeof this._putLocal?t._deleted?this._removeLocal(t,n):this._putLocal(t,n):void("function"==typeof this._put&&e.new_edits!==!1?this._put(t,e,n):this.bulkDocs({
docs:[t]},e,gt(n))))}),kt.prototype.putAttachment=h("putAttachment",function(t,e,n,r,o){function i(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:o,data:r,revpos:++n},a.put(t)}var a=this;return"function"==typeof o&&(o=r,r=n,n=null),"undefined"==typeof o&&(o=r,r=n,n=null),o||k("warn","Attachment",e,"on document",t,"is missing content_type"),a.get(t).then(function(t){if(t._rev!==n)throw D(po);return i(t)},function(e){if(e.reason===_o.message)return i({_id:t});throw e})}),kt.prototype.removeAttachment=h("removeAttachment",function(t,e,n,r){var o=this;o.get(t,function(t,i){return t?void r(t):i._rev!==n?void r(D(po)):i._attachments?(delete i._attachments[e],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,r)):r()})}),kt.prototype.remove=h("remove",function(t,e,n,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(o=t,"function"==typeof e?(r=e,n={}):(r=n,n=e)),n=n||{},n.was_delete=!0;var i={_id:o._id,_rev:o._rev||n.rev};return i._deleted=!0,lt(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(o,r):void this.bulkDocs({docs:[i]},n,gt(r))}),kt.prototype.revsDiff=h("revsDiff",function(t,e,n){function r(t,e){s.has(t)||s.set(t,{missing:[]}),s.get(t).missing.push(e)}function o(e,n){var o=t[e].slice(0);J(n,function(t,n,i,a,s){var u=n+"-"+i,c=o.indexOf(u);c!==-1&&(o.splice(c,1),"available"!==s.status&&r(e,u))}),o.forEach(function(t){r(e,t)})}"function"==typeof e&&(n=e,e={});var i=Object.keys(t);if(!i.length)return n(null,{});var a=0,s=new ao;i.map(function(e){this._getRevisionTree(e,function(r,u){if(r&&404===r.status&&"missing"===r.message)s.set(e,{missing:t[e]});else{if(r)return n(r);o(e,u)}if(++a===i.length){var c={};return s.forEach(function(t,e){c[e]=t}),n(null,c)}})},this)}),kt.prototype.bulkGet=h("bulkGet",function(t,e){b(this,t,e)}),kt.prototype.compactDocument=h("compactDocument",function(t,e,n){var r=this;this._getRevisionTree(t,function(o,i){if(o)return n(o);var a=wt(i),s=[],u=[];Object.keys(a).forEach(function(t){a[t]>e&&s.push(t)}),J(i,function(t,e,n,r,o){var i=e+"-"+n;"available"===o.status&&s.indexOf(i)!==-1&&u.push(i)}),r._doCompaction(t,u,n)})}),kt.prototype.compact=h("compact",function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&xt(n)}),kt.prototype._compact=function(t,e){function n(t){a.push(o.compactDocument(t.id,0))}function r(t){var n=t.last_seq;eo.all(a).then(function(){return z(o,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<n)&&(t.last_seq=n,t)})}).then(function(){e(null,{ok:!0})}).catch(e)}var o=this,i={return_docs:!1,last_seq:t.last_seq||0},a=[];o.changes(i).on("change",n).on("complete",r).on("error",e)},kt.prototype.get=h("get",function(t,e,n){function r(){var r=[],a=o.length;return a?void o.forEach(function(o){i.get(t,{rev:o,revs:e.revs,latest:e.latest,attachments:e.attachments},function(t,e){if(t)r.push({missing:o});else{for(var i,s=0,u=r.length;s<u;s++)if(r[s].ok&&r[s].ok._rev===e._rev){i=!0;break}i||r.push({ok:e})}a--,a||n(null,r)})}):n(null,r)}if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(D(mo));if(lt(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var o=[],i=this;if(!e.open_revs)return this._get(t,e,function(t,r){if(t)return n(t);var o=r.doc,a=r.metadata,s=r.ctx;if(e.conflicts){var u=K(a);u.length&&(o._conflicts=u)}if(ct(a,o._rev)&&(o._deleted=!0),e.revs||e.revs_info){for(var c=o._rev.split("-"),l=parseInt(c[0],10),h=c[1],f=Y(a.rev_tree),d=null,_=0;_<f.length;_++){var p=f[_],m=p.ids.map(function(t){return t.id}).indexOf(h),v=m===l-1;(v||!d&&m!==-1)&&(d=p)}var g=d.ids.map(function(t){return t.id}).indexOf(o._rev.split("-")[1])+1,y=d.ids.length-g;if(d.ids.splice(g,y),d.ids.reverse(),e.revs&&(o._revisions={start:d.pos+d.ids.length-1,ids:d.ids.map(function(t){return t.id})}),e.revs_info){var b=d.pos+d.ids.length;o._revs_info=d.ids.map(function(t){return b--,{rev:b+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&o._attachments){var w=o._attachments,T=Object.keys(w).length;if(0===T)return n(null,o);Object.keys(w).forEach(function(t){this._getAttachment(o._id,t,w[t],{rev:o._rev,binary:e.binary,ctx:s},function(e,r){var i=o._attachments[t];i.data=r,delete i.stub,delete i.length,--T||n(null,o)})},i)}else{if(o._attachments)for(var x in o._attachments)o._attachments.hasOwnProperty(x)&&(o._attachments[x].stub=!0);n(null,o)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){return t?n(t):(o=V(e).map(function(t){return t.rev}),void r())});else{if(!Array.isArray(e.open_revs))return n(D(yo,"function_clause"));o=e.open_revs;for(var a=0;a<o.length;a++){var s=o[a];if("string"!=typeof s||!/^\d+-/.test(s))return n(D(Po))}r()}}),kt.prototype.getAttachment=h("getAttachment",function(t,e,n,r){var o=this;n instanceof Function&&(r=n,n={}),this._get(t,n,function(i,a){return i?r(i):a.doc._attachments&&a.doc._attachments[e]?(n.ctx=a.ctx,n.binary=!0,o._getAttachment(t,e,a.doc._attachments[e],n,r),void 0):r(D(_o))})}),kt.prototype.allDocs=h("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip="undefined"!=typeof t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(D(wo,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return Tt(this,t,e)}return this._allDocs(t,e)}),kt.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new pt(this,t,e)},kt.prototype.close=h("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),kt.prototype.info=h("info",function(t){var e=this;this._info(function(n,r){return n?t(n):(r.db_name=r.db_name||e.name,r.auto_compaction=!(!e.auto_compaction||"http"===e.type()),r.adapter=e.type(),void t(null,r))})}),kt.prototype.id=h("id",function(t){return this._id(t)}),kt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},kt.prototype.bulkDocs=h("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(D(fo));for(var r=0;r<t.docs.length;++r)if("object"!=typeof t.docs[r]||Array.isArray(t.docs[r]))return n(D(Eo));var o;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){o=o||Et(e),t._attachments[e].content_type||k("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),o)return n(D(xo,o));"new_edits"in e||("new_edits"in t?e.new_edits=t.new_edits:e.new_edits=!0);var i=this;e.new_edits||"http"===i.type()||t.docs.sort(bt),yt(t.docs);var a=t.docs.map(function(t){return t._id});return this._bulkDocs(t,e,function(t,r){if(t)return n(t);if(e.new_edits||(r=r.filter(function(t){return t.error})),"http"!==i.type())for(var o=0,s=r.length;o<s;o++)r[o].id=r[o].id||a[o];n(null,r)})}),kt.prototype.registerDependentDatabase=h("registerDependentDatabase",function(t,e){function n(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}var r=new this.constructor(t,this.__opts);z(this,"_local/_pouch_dependentDbs",n).then(function(){e(null,{db:r})}).catch(e)}),kt.prototype.destroy=h("destroy",function(t,e){function n(){r._destroy(t,function(t,n){return t?e(t):(r._destroyed=!0,r.emit("destroyed"),void e(null,n||{ok:!0}))})}"function"==typeof t&&(e=t,t={});var r=this,o=!("use_prefix"in r)||r.use_prefix;return"http"===r.type()?n():void r.get("_local/_pouch_dependentDbs",function(t,i){if(t)return 404!==t.status?e(t):n();var a=i.dependentDbs,s=r.constructor,u=Object.keys(a).map(function(t){var e=o?t.replace(new RegExp("^"+s.prefix),""):t;return new s(e,r.__opts).destroy()});eo.all(u).then(n,e)})}),Lt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Lt.prototype.fail=function(t){this.failed=t,this.execute()},Lt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Lt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},Xr(Ct,kt),Ct.debug=Vr,Ct.adapters={},Ct.preferredAdapters=[],Ct.prefix="_pouch_";var No=new Kr.EventEmitter;Dt(Ct),Ct.adapter=function(t,e,n){e.valid()&&(Ct.adapters[t]=e,n&&Ct.preferredAdapters.push(t))},Ct.plugin=function(t){if("function"==typeof t)t(Ct);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Ct.prototype[e]=t[e]})}return Ct},Ct.defaults=function(t){function e(t,n){return this instanceof e?(n=n||{},t&&"object"==typeof t&&(n=t,t=n.name,delete n.name),n=lo({},e.__defaults,n),void Ct.call(this,t,n)):new e(t,n)}return Xr(e,Ct),e.preferredAdapters=Ct.preferredAdapters.slice(),Object.keys(Ct).forEach(function(t){t in e||(e[t]=Ct[t])}),e.__defaults=lo({},this.__defaults,t),e};var Io="6.1.1";Ct.version=Io;var Ro,Uo=At(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),qo=At(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),jo=function(t){return atob(t)},zo=function(t){return btoa(t)},Zo=e.setImmediate||e.setTimeout,Fo=32768,Wo=5,Ho="document-store",Jo="by-sequence",Go="attach-store",Vo="attach-seq-store",Ko="meta-store",Xo="local-store",Yo="detect-blob-support",Qo=new E,$o=!1,ti=[],ei=new ao,ni=new ao;Le.valid=function(){var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!t&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var ri=function(t){t.adapter("idb",Le,!0)},oi=7,ii=Me("document-store"),ai=Me("by-sequence"),si=Me("attach-store"),ui=Me("local-store"),ci=Me("metadata-store"),li=Me("attach-seq-store"),hi=new ao,fi=new E,di=1,_i="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+ai+" (seq, deleted)",pi="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+ai+" (doc_id, rev)",mi="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+ii+" (winningseq)",vi="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+li+" (seq)",gi="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+li+" (digest, seq)",yi=ai+".seq = "+ii+".winningseq",bi=ai+".seq AS seq, "+ai+".deleted AS deleted, "+ai+".json AS data, "+ai+".rev AS rev, "+ii+".json AS metadata";tn.valid=Qe,tn.use_prefix=!0;var wi=function(t){t.adapter("websql",tn,!0)},Ti=on(),xi=function(){},Ei=25,ki=50,Li={},Pi=Vr("pouchdb:http");yn.valid=function(){return!0};var Si=function(t){t.adapter("http",yn,!1),t.adapter("https",yn,!1)},Ci=-324,Di=3,Ai="";Mn.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()}),this.promise},Mn.prototype.finish=function(){return this.promise},Xr(In,Error),Xr(Rn,Error),Xr(Un,Error);var Bi=k.bind(null,"log"),Oi=Array.isArray,Mi=JSON.parse,Ni={},Ii=new Mn,Ri=50,Ui={_sum:function(t,e){return jn(e)},_count:function(t,e){return e.length},_stats:function(t,e){function n(t){for(var e=0,n=0,r=t.length;n<r;n++){var o=t[n];e+=o*o}return e}return{sum:jn(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:n(e)}}},qi=Fn(function(){var t=this;return"http"===t.type()?wr(t):"function"==typeof t._viewCleanup?hr(t):Tr(t)}),ji=function(t,e,n){"function"==typeof e&&(n=e,e={}),e=e?ar(e):{},"function"==typeof t&&(t={map:t});var r=this,o=eo.resolve().then(function(){return xr(r,t,e)});return Zn(o,n),o},zi={query:ji,viewCleanup:qi},Zi=1,Fi="pouchdb",Wi=5,Hi=0;Ar.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Ar.prototype.updateTarget=function(t,e){return Dr(this.target,this.id,t,e,this.returnValue)},Ar.prototype.updateSource=function(t,e){var n=this;return this.readOnlySource?eo.resolve(!0):Dr(this.src,this.id,t,e,this.returnValue).catch(function(t){if(Nr(t))return n.readOnlySource=!0,!0;throw t})};var Ji={undefined:function(t,e){return 0===Tn(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return Br(e,t).last_seq}};Ar.prototype.getCheckpoint=function(){var t=this;return t.target.get(t.id).then(function(e){return t.readOnlySource?eo.resolve(e.last_seq):t.src.get(t.id).then(function(t){if(e.version!==t.version)return Hi;var n;return n=e.version?e.version.toString():"undefined",n in Ji?Ji[n](e,t):Hi},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:Hi}).then(function(){return Hi},function(n){return Nr(n)?(t.readOnlySource=!0,e.last_seq):Hi});throw n})}).catch(function(t){if(404!==t.status)throw t;return Hi})};var Gi=0;Xr(jr,Kr.EventEmitter),jr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},jr.prototype.ready=function(t,e){function n(){o.cancel()}function r(){t.removeListener("destroyed",n),e.removeListener("destroyed",n)}var o=this;o._readyCalled||(o._readyCalled=!0,t.once("destroyed",n),e.once("destroyed",n),o.once("complete",r))},Xr(Wr,Kr.EventEmitter),Wr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ct.plugin(ri).plugin(wi).plugin(Si).plugin(zi).plugin(Hr),t.exports=Ct}).call(e,n(1))},function(t,e,n){(function(r){function o(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,r)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function u(){try{return e.storage.debug}catch(t){}if("undefined"!=typeof r&&"env"in r)return r.env.DEBUG}function c(){try{return window.localStorage}catch(t){}}e=t.exports=n(17),e.log=a,e.formatArgs=i,e.save=s,e.load=u,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(u())}).call(e,n(19))},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function o(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(c||r);t.diff=o,t.prev=c,t.curr=r,c=r;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var o=e.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(t,a),i.splice(s,1),s--}return n}),e.formatArgs.call(t,i);var u=n.log||e.log||console.log.bind(console);u.apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),"function"==typeof e.init&&e.init(n),n}function i(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function a(){e.enable("")}function s(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o.default=o,e.coerce=u,e.disable=a,e.enable=i,e.enabled=s,e.humanize=n(18),e.names=[],e.skips=[],e.formatters={};var c},function(t,e){function n(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){return t>=c?Math.round(t/c)+"d":t>=u?Math.round(t/u)+"h":t>=s?Math.round(t/s)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function o(t){return i(t,c,"day")||i(t,u,"hour")||i(t,s,"minute")||i(t,a,"second")||t+" ms"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,c=24*u,l=365.25*c;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return n(t);if("number"===i&&isNaN(t)===!1)return e.long?o(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){p&&d&&(p=!1,d.length?_=d.concat(_):m=-1,_.length&&s())}function s(){if(!p){var t=o(a);p=!0;for(var e=_.length;e;){for(d=_,_=[];++m<e;)d&&d[m].run();m=-1,e=_.length}d=null,p=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,_=[],p=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];_.push(new u(t,e)),1!==_.length||p||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e){(function(){var e={}.hasOwnProperty,n=[].slice;t.exports=function(t,r){var o,i,a,s;i=[],s=[];for(o in r)e.call(r,o)&&(a=r[o],"this"!==o&&(i.push(o),s.push(a)));return Function.apply(null,n.call(i).concat([t])).apply(r.this,s)}}).call(this)},function(t,e,n){!function(e){t.exports=e()}(function(t){"use strict";function e(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];n+=(r&o|~r&i)+e[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+e[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+e[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+e[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+e[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+e[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+e[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+e[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+e[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+e[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+e[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+e[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+e[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+e[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+e[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+e[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+e[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+e[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+e[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+e[9]-343485551|0,r=(r<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function n(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var r,o,i,a,s,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=c;r+=64)e(l,n(t.substring(r-64,r)));for(t=t.substring(r-64),o=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(e(l,i),r=0;r<16;r+=1)i[r]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=s,i[15]=u,e(l,i),l}function i(t){var n,o,i,a,s,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=c;n+=64)e(l,r(t.subarray(n-64,n)));for(t=n-64<c?t.subarray(n-64):new Uint8Array(0),o=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)i[n>>2]|=t[n]<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(e(l,i),n=0;n<16;n+=1)i[n]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=s,i[15]=u,e(l,i),l}function a(t){var e,n="";for(e=0;e<4;e+=1)n+=p[t>>8*e+4&15]+p[t>>8*e&15];return n}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function c(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}function l(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function f(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}var _=function(t,e){return t+e&4294967295},p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==s(o("hello"))&&(_=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,a,s,u=this.byteLength,c=e(n,u),l=u;return r!==t&&(l=e(r,u)),c>l?new ArrayBuffer(0):(o=l-c,i=new ArrayBuffer(o),a=new Uint8Array(i),s=new Uint8Array(this,c,o),a.set(s),i)}}(),d.prototype.append=function(t){return this.appendBinary(u(t)),this},d.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var r,o=this._buff.length;for(r=64;r<=o;r+=64)e(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},d.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=f(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},d.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(t,n){var r,o,i,a=n;if(t[a>>2]|=128<<(a%4<<3),a>55)for(e(this._hash,t),a=0;a<16;a+=1)t[a]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=o,t[15]=i,e(this._hash,t)},d.hash=function(t,e){return d.hashBinary(u(t),e)},d.hashBinary=function(t,e){var n=o(t),r=s(n);return e?f(r):r},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(t){var n,o=h(this._buff.buffer,t,!0),i=o.length;for(this._length+=t.byteLength,n=64;n<=i;n+=64)e(this._hash,r(o.subarray(n-64,n)));return this._buff=n-64<i?new Uint8Array(o.buffer.slice(n-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=s(this._hash),t&&(n=f(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var t=d.prototype.getState.call(this);return t.buff=l(t.buff),t},d.ArrayBuffer.prototype.setState=function(t){return t.buff=c(t.buff,!0),d.prototype.setState.call(this,t)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(t,e){var n=i(new Uint8Array(t)),r=s(n);return e?f(r):r},d})},function(t,e,n){"use strict";function r(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(t);else if(i===e.length-2){var a=e.pop();o[a]=t}else e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var n,r,o,i,a,s,u,c,l,h,f,d="";n=e.pop();)if(r=n.obj,o=n.prefix||"",i=n.val||"",d+=o,i)d+=i;else if("object"!=typeof r)d+="undefined"==typeof r?null:JSON.stringify(r);else if(null===r)d+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),a=r.length-1;a>=0;a--)s=0===a?"":",",e.push({obj:r[a],prefix:s});e.push({val:"["})}else{u=[];for(c in r)r.hasOwnProperty(c)&&u.push(c);for(e.push({val:"}"}),a=u.length-1;a>=0;a--)l=u[a],h=r[l],f=a>0?",":"",f+=JSON.stringify(l)+":",e.push({obj:h,prefix:f});e.push({val:"{"})}return d},e.parse=function(t){for(var e,n,o,i,a,s,u,c,l,h=[],f=[],d=0;;)if(e=t[d++],"}"!==e&&"]"!==e&&"undefined"!=typeof e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":d+=3,r(null,h,f);break;case"t":d+=3,r(!0,h,f);break;case"f":d+=4,r(!1,h,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",d--;;){if(o=t[d++],!/[\d\.\-e\+]/.test(o)){d--;break}n+=o}r(parseFloat(n),h,f);break;case'"':for(i="",a=void 0,s=0;;){if(u=t[d++],'"'===u&&("\\"!==a||s%2!==1))break;i+=u,a=u,"\\"===a?s++:s=0}r(JSON.parse('"'+i+'"'),h,f);break;case"[":c={element:[],index:h.length},h.push(c.element),f.push(c);break;case"{":l={element:{},index:h.length},h.push(l.element),f.push(l);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();r(h.pop(),h,f)}}},function(t,e,n){t.exports=n(2)}]);
//# sourceMappingURL=app.js.map